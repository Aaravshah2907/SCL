<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>persistent</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../programming-and-data-types.html",
          "name": "Programming"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../functions.html",
          "name": "Functions"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../scope-variables-and-generate-names.html",
          "name": "Scope Variables and Generate Names"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "scope-variables-and-generate-names"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExtendedCapabilities",

        "itemListElement":
        [
{
          "@type": "ListItem",
          "position": 1,
"item": 
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "codegen",
          "value": "limited"

        }
          }
        ]
        }
        </script>
<meta xmlns="http://www.w3.org/1999/xhtml" name="chunktype" content="refpage"><meta xmlns="http://www.w3.org/1999/xhtml" name="refentity" itemprop="refentity" content="function:persistent"><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fcn">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ref/function">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This MATLAB function declares the specified variables as persistent."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "refentry";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../programming-and-data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Programming</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../functions.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Functions</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../scope-variables-and-generate-names.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_67305db2-32ed-4030-ab04-23c843f78f13"><span itemprop="title">Scope Variables and Generate Names</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item notranslate"><a href="#responsive_offcanvas"><span class="refname">persistent</span></a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-refentry">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li><a href="#d126e1309315" class="intrnllnk">Syntax</a></li><li class="nav-item"><a href="#description" class="nav-link intrnllnk">Description</a></li><li class="nav-item"><a href="#d126e1309352" class="nav-link intrnllnk">Examples</a><ul class="nav"><li class="nav-item"><a href="#mw_844fc807-8c63-4900-8d59-b1baa9583d21" class="nav-link intrnllnk">Count Calls to Function</a></li></ul><ul class="nav"><li class="nav-item"><a href="#d126e1309387" class="nav-link intrnllnk">Log Data at Specified Time Interval</a></li></ul></li><li class="nav-item"><a href="#d126e1309442" class="nav-link intrnllnk">Tips</a></li><li class="nav-item"><a href="#refsect-extended-capabilities" class="nav-link intrnllnk">Extended Capabilities</a></li><li class="nav-item"><a href="#f76-920859_vh" class="nav-link intrnllnk">Version History</a></li><li class="nav-item"><a href="#f76-920859_seealso" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=scope-variables-and-generate-names&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-ref-function"><div class="function_ref"><span id="f76-920859" class="anchor_target"></span><h1 class="r2025b notranslate" itemprop="title"><span class="refname">persistent</span></h1><div class="doc_topic_desc"><div class="purpose_container"><p itemprop="purpose">Define persistent variable</p><div class="switch"><a href="javascript:void(0);" id="expandAllPage" data-allexpanded="true1">collapse all in page</a></div></div></div>
<div class="ref_sect"><h2 id="d126e1309315">Syntax</h2><div class="syntax_signature"><div class="syntax_signature_module"><div class="code_responsive"><code class="synopsis"><a href="#d126e1309322" class="intrnllnk">persistent var1 ... varN</a></code></div></div></div></div><div class="clear"></div><h2 id="description">Description</h2><div class="descriptions"><div class="cshsummary" id="csh_f76-920859"><div class="description_module"><div class="description_element"><div class="code_responsive"><p><span id="d126e1309322" itemprop="syntax"><code class="synopsis">persistent var1 ... varN</code></span> declares the
                specified variables as persistent. Persistent variables are local to the function in
                which they are declared, yet their values are retained in memory between calls to
                the function. Code at the MATLAB<sup>&#x00AE;</sup> command line and in other functions cannot change persistent
                variables.</p><p>When MATLAB first encounters a particular <code class="function">persistent</code> statement, it initializes the persistent variable to an empty matrix (<code class="literal">[]</code>).</p><p>MATLAB clears persistent variables when you clear or modify a function that
                is in memory. To keep a function in memory, use <a href="mlock.html"><code class="function">mlock</code></a>.</p></div><p class="syntax_example"><a href="persistent.html#mw_844fc807-8c63-4900-8d59-b1baa9583d21" class="intrnllnk">example</a></p></div></div></div></div><div class="clear"></div><div class="examples"><h2 id="d126e1309352">Examples</h2><div class="expandableContent" id="expandableExamples"><p class="switch"><a href="javascript:void(0);" class="expandAllLink" data-allexpanded="true3">collapse all</a></p><div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true" id="expand_accordion_heading_mw_844fc807-8c63-4900-8d59-b1baa9583d21"><div class="accordion-item "><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_844fc807-8c63-4900-8d59-b1baa9583d21" data-bs-target="#expand_accordion_body_mw_844fc807-8c63-4900-8d59-b1baa9583d21" aria-controls="expand_accordion_body_mw_844fc807-8c63-4900-8d59-b1baa9583d21" class="accordion-button add_cursor_pointer" aria-expanded="true"><h3 id="mw_844fc807-8c63-4900-8d59-b1baa9583d21">Count Calls to Function</h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_844fc807-8c63-4900-8d59-b1baa9583d21" aria-labelledby="expand_accordion_heading_mw_844fc807-8c63-4900-8d59-b1baa9583d21" class="accordion-collapse collapse show"><div class="accordion-body">
                <p class="shortdesc">Create the function <code class="literal">myFun</code> in your current
                    working folder. Each time you call the function, the value of
                        <code class="literal">n</code> increases.</p>
            <div class="procedure"><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> myFun()
    <span style="color:#0000FF">persistent</span> n
    <span style="color:#0000FF">if</span> isempty(n)
        n = 0;
    <span style="color:#0000FF">end</span>
    n = n+1
<span style="color:#0000FF">end</span></pre></div></div></div><p>At the command prompt, call <code class="literal">myFun</code> three times.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>myFun
myFun
myFun</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>n =

     1


n =

     2


n =

     3</pre></div></div></div><p>Clear <code class="literal">myFun</code> and call it another two times. Clearing the function also clears the persistent variable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>clear <span style="color:#A020F0">myFun</span>
myFun
myFun</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>n =

     1


n =

     2</pre></div></div></div></div></div></div></div></div><div class="accordion" role="tablist" aria-multiselectable="true" id="expand_accordion_heading_d126e1309387"><div class="accordion-item "><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_d126e1309387" data-bs-target="#expand_accordion_body_d126e1309387" aria-controls="expand_accordion_body_d126e1309387" class="accordion-button add_cursor_pointer" aria-expanded="true"><h3 id="d126e1309387">Log Data at Specified Time Interval</h3></button></div><div role="tabpanel" id="expand_accordion_body_d126e1309387" aria-labelledby="expand_accordion_heading_d126e1309387" class="accordion-collapse collapse show"><div class="accordion-body">
                <p class="shortdesc">Write a function that logs data if at least three seconds have passed since the last log entry. Define <code class="literal">logTime</code> as a persistent variable that stores the last time <code class="literal">logData</code> wrote to the file.</p>
            <div class="procedure"><p>In a file in your current working folder, define the <code class="function">logData</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> logData(fname,n)
    <span style="color:#0000FF">persistent</span> logTime
    currTime = datetime;
    
    <span style="color:#0000FF">if</span> isempty(logTime)
        logTime = currTime;
        disp(<span style="color:#A020F0">'Logging initial value.'</span>)
        dlmwrite(fname,n)
        <span style="color:#0000FF">return</span>
    <span style="color:#0000FF">end</span>
    
    dt = currTime - logTime;
    <span style="color:#0000FF">if</span> dt &gt; seconds(3)
        disp(<span style="color:#A020F0">'Logging.'</span>)
        dlmwrite(fname,n,<span style="color:#A020F0">'-append'</span>)
        logTime = currTime;
    <span style="color:#0000FF">else</span>
      disp([<span style="color:#A020F0">'Not logging. '</span> num2str(seconds(dt)) <span style="color:#A020F0">' sec since last log.'</span>])
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>At the command prompt, call <code class="literal">logData</code> in a loop. The loop has 10 iterations, and each iteration takes approximately 1 second. Therefore, MATLAB writes 4 values to <code class="literal">myLog.txt</code> (at approximately 0, 3, 6, and 9 seconds).</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">for</span> n = 1:10
    pause(1)
    logData(<span style="color:#A020F0">'myLog.txt'</span>,rand)
<span style="color:#0000FF">end</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Logging initial value.
Not logging. 1.005 sec since last log.
Not logging. 2.009 sec since last log.
Logging.
Not logging. 1.007 sec since last log.
Not logging. 2.013 sec since last log.
Logging.
Not logging. 1.005 sec since last log.
Not logging. 2.007 sec since last log.
Logging.</pre></div></div></div><p>Call the <code class="literal">logData</code> function again to append another value.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>logData(<span style="color:#A020F0">'myLog.txt'</span>,rand)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Logging.</pre></div></div></div><p>Clear the <code class="literal">logData</code> function to reinitialize the persistent variable. Call the <code class="literal">logData</code> function again. This time, the function overwrites <code class="literal">myLog.txt</code> instead of appending a value.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>clear <span style="color:#A020F0">logData</span>
logData(<span style="color:#A020F0">'myLog.txt'</span>,rand)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Logging initial value.</pre></div></div></div></div></div></div></div></div></div></div></div><div class="ref_sect"><h2 id="d126e1309442">Tips</h2><div class="itemizedlist"><ul><li><p>Persistent variables are similar to global variables because MATLAB creates permanent storage for both. They differ from global variables because persistent variables are known only to the function that declares them. Therefore, code at the MATLAB command line or other functions cannot change persistent variables.</p></li><li><p>Since MATLAB initializes a persistent variable to an empty matrix (<code class="literal">[]</code>), typically functions check to see if a persistent variable is empty, and, if so, initialize it. <div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> myFun()
    <span style="color:#0000FF">persistent</span> n
    <span style="color:#0000FF">if</span> isempty(n)
        n = 0;
    <span style="color:#0000FF">end</span>
    n = n+1;
<span style="color:#0000FF">end</span></pre></div></div></div></p></li><li><p>The declaration of a variable as persistent must precede any other references to the variable, including input or output arguments. For example, the <code class="function">persistent</code> declarations in the following functions are invalid.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> myfunA(x)
    <span style="color:#0000FF">persistent</span> x
<span style="color:#0000FF">end</span>

<span style="color:#0000FF">function</span> myfunB
    x = 0;
    <span style="color:#0000FF">persistent</span> x
<span style="color:#0000FF">end</span></pre></div></div></div></p></li><li><p>To clear a persistent variable, use <a href="clear.html"><code class="function">clear</code></a> with the name of the function that declares the variable. For example, <code class="literal">clear myFun</code>.</p></li></ul></div></div><div class="ref_sect"><h2 id="refsect-extended-capabilities">Extended Capabilities</h2><div class="expandableContent"><p class="switch"><a href="javascript:void(0);" class="expandAllLink">expand all</a></p><div id="accordion_refsect-extended-capabilities" role="tablist" aria-multiselectable="true"><span id="mw_4431bff4-9b44-47e6-a8ff-44bb318fc1ed" class="anchor_target"></span><div class="mw_ws_accordion_container"><div class="accordion -presentation_expander -presentation_condensed"><div class="accordion-item"><span id="f76-920859" class="anchor_target"></span><div class="accordion-header"><button data-bs-toggle="collapse" data-bs-target="#expand_body_f76-920859_codegen" aria-controls="expand_body_f76-920859_codegen" class="accordion-button collapsed" aria-expanded="false"><h3 id="f76-920859_codegen">C/C++ Code Generation<br/> <span class=" remove_bold add_font_color_general">Generate C and C++ code using MATLAB&#174; Coder&#8482;.</span></h3></button></div><div id="expand_body_f76-920859_codegen" class="accordion-collapse collapsed collapse"><div class="accordion-body"><p>
                <span>Usage notes and limitations:</span>
                </p>
<div class="itemizedlist"><ul><li><p>Persistent variables in the generated code do not share values with
                                MATLAB.</p></li><li><p>Every generated MEX function has its own copy of persistent data. Each
                            invocation of a particular MEX function reuses values from prior
                            invocations.</p></li><li><p>In a Simulink<sup>&#x00AE;</sup> model, each <a href="../../simulink/slref/matlabfunction.html"><span class="block">MATLAB Function</span></a><span role="cross_prod"> (Simulink)</span> block
                            contains its own copy of persistent data. If a MATLAB function that contains a persistent variable is called
                            from two different blocks, the model has two persistent variables. Also,
                            each run of the simulation creates a new copy of the persistent
                            data.</p></li><li><p>In the MATLAB code intended for code generation, a persistent variable
                                <code class="literal">p</code> must be assigned before <code class="literal">p</code> is
                            used. The only exception is a check using <code class="literal">isempty(p)</code>
                            that can be performed before assignment. You can use this check to make
                            sure that <code class="literal">p</code> is assigned before it is used in your
                                MATLAB code.</p></li><li><p>If the parent function declares a persistent variable, the function
                            must assign the variable before it calls a nested function that uses the
                            persistent variable.</p></li><li><p>Persistent variables cannot be renamed in generated code. See <a href="../../coder/ug/reusing-the-same-variable-with-different-properties.html" class="a">Reuse the Same Variable with Different Properties</a><span role="cross_prod"> (MATLAB Coder)</span>.</p></li><li><p>The body of a <a href="../../coder/ref/parfor.html"><code class="function">parfor</code></a><span role="cross_prod"> (MATLAB Coder)</span>-loop cannot
                            contain a persistent variable declaration.</p></li><li><p>The generated code does not enforce order of evaluation in
                            expressions. For most expressions, the order of evaluation is not
                            significant. However, for expressions with side effects, the generated
                            code can produce the side effects in different order from the original
                                MATLAB code. Expressions that produce side effects include those
                            that modify persistent variables. See <a href="../../coder/ug/expected-differences-in-behavior-after-compiling-your-matlab-code.html" class="a">Differences Between Generated Code and MATLAB Code</a><span role="cross_prod"> (MATLAB Coder)</span>.</p></li><li><p>A handle object that a persistent variable refers to must be a
                            singleton object. See <a href="../../coder/ug/memory-management-of-handle-objects-in-generated-code.html" class="a">Handle Object Limitations for Code Generation</a><span role="cross_prod"> (MATLAB Coder)</span>.</p></li><li><p>The code generator computes class initial values at class loading time
                            before code generation. If you use persistent variables in MATLAB class property initialization, the value of the persistent
                            variable that is computed when the class loads belongs to MATLAB. It is not the value that is used at code generation
                            time.</p><p>In particular, if you use <a href="../../coder/ref/coder.target.html"><code class="function">coder.target</code></a><span role="cross_prod"> (MATLAB Coder)</span> in a
                                MATLAB class property initialization,
                                <code class="literal">coder.target('MATLAB')</code> returns
                                <code class="literal">true</code>.</p><p>See <a href="../../coder/ug/how-working-with-matlab-classes-is-different-for-code-generation.html" class="a">MATLAB Classes Definition for Code Generation</a><span role="cross_prod"> (MATLAB Coder)</span>.</p></li></ul></div><p>

            </p></div></div></div></div></div></div></div></div><div class="ref_sect"><h2 id="f76-920859_vh">Version History</h2><p><strong>Introduced before R2006a</strong></p></div><div class="ref_sect"><h2 id="f76-920859_seealso">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="global.html"><span itemprop="name"><code class="function">global</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="clear.html"><span itemprop="name"><code class="function">clear</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="mislocked.html"><span itemprop="name"><code class="function">mislocked</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="mlock.html"><span itemprop="name"><code class="function">mlock</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="munlock.html"><span itemprop="name"><code class="function">munlock</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="double.isempty.html"><span itemprop="name"><code class="function">isempty</code></span></a></span></p></div>
    </div></div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
