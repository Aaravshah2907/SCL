<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>odeEvent</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../mathematics.html",
          "name": "Mathematics"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../numerical-integration-and-differential-equations.html",
          "name": "Numerical Integration and Differential Equations"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../ordinary-differential-equations.html",
          "name": "Ordinary Differential Equations"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "ordinary-differential-equations"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script>
<meta xmlns="http://www.w3.org/1999/xhtml" name="chunktype" content="refpage"><meta xmlns="http://www.w3.org/1999/xhtml" name="refentity" itemprop="refentity" content="function:odeEvent"><meta xmlns="http://www.w3.org/1999/xhtml" name="refentity" itemprop="refentity" content="object:odeEvent"><meta xmlns="http://www.w3.org/1999/xhtml" name="refentity" itemprop="refentity" content="object:odeEvent"><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fcn">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ref/function">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="odeEvent objects define events that the solver detects while solving an ordinary differential equation."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "refentry";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../mathematics.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Mathematics</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../numerical-integration-and-differential-equations.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Numerical Integration and Differential Equations</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../ordinary-differential-equations.html?s_tid=CRUX_lftnav" itemprop="url" id="ordinary-differential-equations"><span itemprop="title">Ordinary Differential Equations</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item notranslate"><a href="#responsive_offcanvas">odeEvent</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-refentry">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#d126e1225750" class="nav-link intrnllnk">Description</a></li><li class="nav-item"><a href="#mw_0209b014-f1db-4c8c-aee8-48b859cfc5b2" class="nav-link intrnllnk">Creation</a><ul class="nav"><li class="nav-item"><a href="#mw_3ddb3c5a-b4b4-4b7a-ae7b-13d4da18a689" class="nav-link intrnllnk">Description</a></li></ul></li><li class="nav-item"><a href="#mw_7a5fe759-e410-4ff3-9a5a-5d82d03ccdea" class="nav-link intrnllnk">Properties</a><ul class="nav"><li class="nav-item"><a href="#mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" class="nav-link intrnllnk">EventFcn</a></li><li class="nav-item"><a href="#mw_24892376-da06-4024-bd2e-46fb35237eec" class="nav-link intrnllnk">Direction</a></li><li class="nav-item"><a href="#mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" class="nav-link intrnllnk">Response</a></li><li class="nav-item"><a href="#mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" class="nav-link intrnllnk">CallbackFcn</a></li></ul></li><li class="nav-item"><a href="#mw_e346de75-0faf-4ff3-808e-0f5745a4e1fb" class="nav-link intrnllnk">Examples</a><ul class="nav"><li class="nav-item"><a href="#mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" class="nav-link intrnllnk">Use Callback Function to Restart Integration of Bouncing Ball</a></li></ul></li><li class="nav-item"><a href="#mw_cda0ef9f-c3f0-4d1a-9ba0-38d9febd0e1f" class="nav-link intrnllnk">Version History</a><ul class="nav"><li class="nav-item"><a href="#mw_065eed73-4f4b-4df9-a8f3-eaa913509c92" class="nav-link intrnllnk">Specify event for delay differential equations (DDEs)</a></li></ul><ul class="nav"><li class="nav-item"><a href="#mw_42dc697a-22e8-462f-8423-f3823f1cb7d8" class="nav-link intrnllnk">Specify event for implicit ODEs</a></li></ul></li><li class="nav-item"><a href="#mw_b8ff528c-2c28-4b75-b696-03b5ae607950_seealso" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=ordinary-differential-equations&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-ref"><div class="object_ref"><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950" class="anchor_target"></span><h1 class="r2025b notranslate" itemprop="title">odeEvent</h1><div class="doc_topic_desc"><div class="purpose_container"><p itemprop="purpose" class="add_margin_0">ODE event definition</p><p class="add_margin_0 add_clear_left"><em>Since R2023b</em></p><div class="switch"><a href="javascript:void(0);" id="expandAllPage">expand all in page</a></div></div></div><div class="refsummary" itemprop="content"><h2 id="d126e1225750">Description</h2><div class="cshsummary" id="csh_mw_b8ff528c-2c28-4b75-b696-03b5ae607950"><div class="shortsummary"><p><code class="object">odeEvent</code> objects define events that the solver detects while
      solving an ordinary differential equation. An event occurs when one of the event functions you
      specify crosses zero. You can specify the type of zero crossings to detect and what actions
      should be performed when an event occurs, including the use of a custom callback function. For
      example, you can use event functions to detect when an object hits the ground or when a planet
      completes an orbit.</p></div><p>Create an <a href="ode.html"><code class="object">ode</code></a> object to
      represent the ODE problem, and specify an <code class="object">odeEvent</code> object as the value of the
        <code class="property">EventDefinition</code> property to incorporate event detection into the
      problem.</p></div></div><div id="mw_0209b014-f1db-4c8c-aee8-48b859cfc5b2_div" class="ref_sect createobject"><h2 id="mw_0209b014-f1db-4c8c-aee8-48b859cfc5b2">Creation</h2>
<span id="mw_fab2a7f3-51ed-402e-8189-bd0464754554" class="anchor_target"></span><div class="ref_sect"><h3 id="mw_fab2a7f3-51ed-402e-8189-bd0464754554">Syntax</h3><div class="syntax_signature"><div class="syntax_signature_module"><div class="code_responsive"><code class="synopsis"><a href="#d126e1225775" class="intrnllnk">E = odeEvent</a></code></div><div class="code_responsive"><code class="synopsis"><a href="#d126e1225787" class="intrnllnk">E = odeEvent(PropertyName=Value)</a></code></div></div></div></div><div class="clear"></div><div id="mw_3ddb3c5a-b4b4-4b7a-ae7b-13d4da18a689_div" class="refsect2 description"><h3 id="mw_3ddb3c5a-b4b4-4b7a-ae7b-13d4da18a689">Description</h3><div class="description_module"><div class="description_element"><div class="code_responsive"><p><span id="d126e1225775" itemprop="syntax"><code class="synopsis"><code class="argument">E</code> = odeEvent</code></span> creates an
            <code class="class">odeEvent</code> object with empty properties.</p></div></div><div class="description_element"><div class="code_responsive"><p><span id="d126e1225787" itemprop="syntax"><code class="synopsis"><code class="argument">E</code> = odeEvent(<a href="#mw_7a5fe759-e410-4ff3-9a5a-5d82d03ccdea" class="intrnllnk"><code class="argument">PropertyName=Value</code></a>)</code></span>
          specifies one or more property values using name-value arguments. For example, <code class="literal">E
            = odeEvent(Direction="ascending")</code> defines an event for ascending zero
          crossings.</p></div><p class="syntax_example"><a href="odeevent.html#mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" class="intrnllnk">example</a></p></div></div></div></div><div class="ref_sect"><h2 id="mw_7a5fe759-e410-4ff3-9a5a-5d82d03ccdea">Properties</h2><div class="expandableContent"><p class="switch "><a href="javascript:void(0);" class="expandAllLink" data-allexpanded="false">expand all</a></p><div class="mw_ws_accordion_container"><div class="accordion" id="mw_7a5fe759-e410-4ff3-9a5a-5d82d03ccdea_accordion-group" role="tablist" aria-multiselectable="true"><div itemscope="" class="ref_sect" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/ReferenceEntityGroup" itemprop="refentitygroup">
      <div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true"><div class="accordion-item " itemscope="" itemprop="property" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/PropertyReference" itemid="mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c"><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" data-bs-target="#expand_accordion_body_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" aria-controls="expand_accordion_body_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" class="accordion-button add_cursor_pointer collapsed" aria-expanded="false"><span id="prop_EventFcn" class="anchor_target"></span><h3 id="mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c"><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/ReferenceEntity" itemprop="refentityobj"><meta itemprop="refentity" content="property:odeEvent.EventFcn"><code itemprop="name" id="propname_EventFcn">EventFcn</code></span> &#8212; <span itemprop="purpose">Event function</span><br/> <span class="add_font_color_general remove_bold"><span class="example_desc" itemprop="inputvalues"><span itemprop="inputvalue">function handle</span></span></span></h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" aria-labelledby="expand_accordion_heading_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c" class="accordion-collapse collapse"><div class="accordion-body"><div class="cshsummary" id="csh_mw_c0efc95d-9bb3-4a80-bb5b-ef7725dea33c"><p>Event function, specified as a function handle. The event function defines one or
            more expressions based on the current values of the solution <code class="literal">(t,y)</code>,
              <code class="literal">(t,y,yp)</code> when <code class="argument">EquationType</code> is
              <code class="literal">"fullyimplicit"</code>, or <code class="literal">(t,y,Z)</code> or
              <code class="literal">(t,y,ydel,ypdel)</code> when <code class="argument">EquationType</code> is
              <code class="literal">"delay"</code> from the solver. The output of the event function can be a
            scalar (to detect a single event) or a vector (to detect multiple events). An event
            occurs when the value of one or more of the outputs from the event function crosses
            zero.</p><p>The event function must accept two input arguments for <code class="literal">(t,y)</code>,
            such as <code class="literal">v = myEvents(t,y)</code>, three input arguments for
              <code class="literal">(t,y,yp)</code>, such as <code class="literal">v = myEvents(t,y,yp)</code>, and
              <code class="literal">(t,y,Z)</code>, such as <code class="literal">v = myEvents(t,y,Z)</code>, or four
            input arguments for <code class="literal">(t,y,ydel,ypdel)</code>, such as <code class="literal">v =
              myEvents(t,y,ydel,ypdel)</code>. If the <code class="property">Parameters</code> property of
            the <code class="object">ode</code> object includes parameters to pass to the event function, then
            the event function also can accept three, four, or five input arguments to receive the
            parameter values, <code class="literal">v = myEvents(t,y,p)</code>, <code class="literal">v =
              myEvents(t,y,yp,p)</code>, <code class="literal">v = myEvents(t,y,Z,p)</code>, or <code class="literal">v
              = myEvents(t,y,ydel,ypdel,p)</code>.</p><p>For example, this event function detects events whenever one of the two solution
            components of an ODE crosses zero.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> v = myEvents(t,y)
  v(1) = y(1);
  v(2) = y(2);
<span style="color:#0000FF">end</span></pre></div></div></div><p>Use the <code class="property">Direction</code> property to specify the type of zero
            crossings to detect. Use the <code class="property">Response</code> property to define how the
            solver should respond when an event is triggered.</p><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.EventFcn = @(t,y) y(1)</code> defines an event function that triggers an
            event whenever the first component of the solution <code class="literal">y(1)</code> crosses
            zero.</p><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.EventFcn = @myEvents</code> specifies a handle to a function containing
            the events to detect.</p></div><p class="datatypelist"><strong>Data Types: </strong><code>function_handle</code></p></div></div></div></div></div>
      <div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true"><div class="accordion-item " itemscope="" itemprop="property" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/PropertyReference" itemid="mw_24892376-da06-4024-bd2e-46fb35237eec"><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_24892376-da06-4024-bd2e-46fb35237eec" data-bs-target="#expand_accordion_body_mw_24892376-da06-4024-bd2e-46fb35237eec" aria-controls="expand_accordion_body_mw_24892376-da06-4024-bd2e-46fb35237eec" class="accordion-button add_cursor_pointer collapsed" aria-expanded="false"><span id="prop_Direction" class="anchor_target"></span><h3 id="mw_24892376-da06-4024-bd2e-46fb35237eec"><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/ReferenceEntity" itemprop="refentityobj"><meta itemprop="refentity" content="property:odeEvent.Direction"><code itemprop="name" id="propname_Direction">Direction</code></span> &#8212; <span itemprop="purpose">Direction of zero crossings to detect</span><br/> <span class="add_font_color_general remove_bold"><span class="example_desc" itemprop="inputvalues"><span itemprop="inputvalue defaultvalue"><code class="literal">"both"</code></span> (default) | <span itemprop="inputvalue"><code class="literal">"ascending"</code></span> | <span itemprop="inputvalue"><code class="literal">"descending"</code></span> | <span itemprop="inputvalue">vector</span></span></span></h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_24892376-da06-4024-bd2e-46fb35237eec" aria-labelledby="expand_accordion_heading_mw_24892376-da06-4024-bd2e-46fb35237eec" class="accordion-collapse collapse"><div class="accordion-body"><div class="cshsummary" id="csh_mw_24892376-da06-4024-bd2e-46fb35237eec"><p>Direction of zero crossings to detect, specified as a scalar or vector of the values
            in the table. If you specify a vector of values, then the length of the vector must
            equal the number of elements in the output from <code class="property">EventFcn</code>.</p><div class="table-responsive"><table class="table table-condensed"><colgroup><col class="tcol1" width="33%"><col class="tcol2" width="33%"><col class="tcol3" width="33%"></colgroup><thead><tr><th>Value</th><th>Description</th><th>Example Events</th></tr></thead><tbody><tr><td><code class="literal">"both"</code></td><td>All zero crossings of the event function are detected.</td><td>
                    <div class="informalfigure"><div id="d126e1225952" class="mediaobject"><p><img src="ode_events_0.png" alt="Event function plot with two zero crossings." height="188" width="250"></p></div></div>
                  </td></tr><tr><td><code class="literal">"ascending"</code></td><td>Zero crossings where the event function has a positive slope (integrating
                    forward in time) are detected.</td><td>
                    <div class="informalfigure"><div id="d126e1225965" class="mediaobject"><p><img src="ode_events_1.png" alt="Event function plot with one zero crossing where the slope is positive." height="188" width="250"></p></div></div>
                  </td></tr><tr><td><code class="literal">"descending"</code></td><td>Zero crossings where the event function has a negative slope (integrating
                    forward in time) are detected.</td><td>
                    <div class="informalfigure"><div id="d126e1225978" class="mediaobject"><p><img src="ode_events_n1.png" alt="Event function plot with one zero crossing where the slope is negative." height="188" width="250"></p></div></div>
                  </td></tr></tbody></table></div><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.Direction = "both"</code> detects all zero crossings of the event
            function.</p><p class="description_valueexample"><strong>Example: </strong>Integrating forward in time, <code class="literal">E.Direction = "ascending"</code>
            detects only zero crossings where the event function is increasing. </p><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.Direction = ["both" "ascending" "descending"]</code> specifies different
            zero-crossing directions to detect for each of three outputs from
              <code class="literal">EventFcn</code>.</p></div></div></div></div></div></div>
      <div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true"><div class="accordion-item " itemscope="" itemprop="property" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/PropertyReference" itemid="mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5"><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" data-bs-target="#expand_accordion_body_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" aria-controls="expand_accordion_body_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" class="accordion-button add_cursor_pointer collapsed" aria-expanded="false"><span id="prop_Response" class="anchor_target"></span><h3 id="mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5"><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/ReferenceEntity" itemprop="refentityobj"><meta itemprop="refentity" content="property:odeEvent.Response"><code itemprop="name" id="propname_Response">Response</code></span> &#8212; <span itemprop="purpose">Solver response to triggered events</span><br/> <span class="add_font_color_general remove_bold"><span class="example_desc" itemprop="inputvalues"><span itemprop="inputvalue defaultvalue"><code class="literal">"proceed"</code></span> (default) | <span itemprop="inputvalue"><code class="literal">"stop"</code></span> | <span itemprop="inputvalue"><code class="literal">"callback"</code></span> | <span itemprop="inputvalue">vector</span></span></span></h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" aria-labelledby="expand_accordion_heading_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5" class="accordion-collapse collapse"><div class="accordion-body"><div class="cshsummary" id="csh_mw_e381f56a-bdd9-4125-8c30-12efbf66f7a5"><p>Solver response to triggered events, specified as a scalar or vector of the values
            in the table. If you specify a vector of values, then the length of the vector must
            equal the number of elements in the output from <code class="property">EventFcn</code>.</p><div class="table-responsive"><table class="table table-condensed"><colgroup><col class="tcol1" width="50%"><col class="tcol2" width="50%"></colgroup><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">"proceed"</code></td><td>The solver logs the event and continues integrating.</td></tr><tr><td><code class="literal">"stop"</code></td><td>The solver logs the event and stops the integration.</td></tr><tr><td><code class="literal">"callback"</code></td><td>The solver invokes a callback function before logging the event. The
                    function can return up to three outputs to indicate whether to continue or stop
                    the integration, a new value for <code class="literal">ye</code> (the solution at the time
                    of the event), or new <code class="property">Parameters</code> to use when restarting the
                    integration from time <code class="literal">te</code> (the time of the event). Define the
                    callback function using the <code class="property">CallbackFcn</code> property.</td></tr></tbody></table></div><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.Response = "stop"</code> stops the integration if an event is
            detected.</p><p class="description_valueexample"><strong>Example: </strong><code class="literal">E.Response = ["proceed" "stop" "callback"]</code> specifies
            different responses to triggered events for each of three outputs from
              <code class="literal">EventFcn</code>.</p></div></div></div></div></div></div>
      <div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true"><div class="accordion-item " itemscope="" itemprop="property" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/PropertyReference" itemid="mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd"><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" data-bs-target="#expand_accordion_body_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" aria-controls="expand_accordion_body_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" class="accordion-button add_cursor_pointer collapsed" aria-expanded="false"><span id="prop_CallbackFcn" class="anchor_target"></span><h3 id="mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd"><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/ReferenceEntity" itemprop="refentityobj"><meta itemprop="refentity" content="property:odeEvent.CallbackFcn"><code itemprop="name" id="propname_CallbackFcn">CallbackFcn</code></span> &#8212; <span itemprop="purpose">Callback function</span><br/> <span class="add_font_color_general remove_bold"><span class="example_desc" itemprop="inputvalues"><span itemprop="inputvalue">function handle</span></span></span></h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" aria-labelledby="expand_accordion_heading_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd" class="accordion-collapse collapse"><div class="accordion-body"><div class="cshsummary" id="csh_mw_55623d39-d09e-4c17-b5f5-d54357cb0cfd"><p>Callback function, specified as a function handle. The ODE solver invokes
              <code class="property">CallbackFcn</code> whenever an event triggers for which the value of
              <code class="property">Response</code> is <code class="literal">"callback"</code>.</p><p>The callback function can accept up to four inputs and return up to three outputs,
            but it does not need to accept all of the inputs or supply all of the outputs.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>[stop,ye,Parameters] = eventCallback(te,ye,ie,Parameters)</pre></div></div></div><p>When an event triggers for which the value of <code class="property">Response</code> is
              <code class="literal">"callback"</code>, the solver invokes the callback function and supplies
            information about the current state of the integration as inputs to the callback
            function:</p><div class="itemizedlist"><ul><li><p><code class="literal">te</code> is the scalar time when the event triggered.</p></li><li><p><code class="literal">ye</code> is the solution vector at the time of the event.</p></li><li><p><code class="literal">ie</code> is the index of the event that triggered, and can be a
                vector if multiple events trigger at the same time.</p></li><li><p>The <code class="literal">Parameters</code> input is the current value of
                  <code class="literal">Parameters</code> supplied to <code class="property">ODEFcn</code> (or any
                other function that accepts the parameters). Unless it is the first callback event,
                then the current value of <code class="literal">Parameters</code> might not be the same as the
                  <code class="property">Parameters</code> property of the <code class="object">ode</code> object. The
                difference arises because the callback function can change the value of
                  <code class="literal">Parameters</code> as events trigger during the integration
                process.</p></li></ul></div><p>The callback function can return up to three outputs:</p><div class="itemizedlist"><ul><li><p><code class="literal">stop</code> must be a logical value.</p>
<div class="itemizedlist"><ul><li><p>If <code class="literal">stop</code> is <code class="literal">true</code>, then the
                      integration stops at time <code class="literal">te</code>.</p></li><li><p>If <code class="literal">stop</code> is <code class="literal">false</code>, then the
                      integration restarts from time <code class="literal">te</code> and proceeds. Use
                        <code class="literal">F.SolverOptions.InitialStep</code> to control the size of the
                      initial step when the integration restarts.</p></li></ul></div><p>
</p></li><li><p><code class="literal">ye</code> is the new value of the solution vector at time
                  <code class="literal">te</code>. Use this output to modify the value of
                  <code class="literal">ye</code> supplied to the callback function as an input. This output
                is useful for modeling discontinuities at unknown points. This change is local to
                the currently running integration and does not affect the stored
                  <code class="property">InitialTime</code> and <code class="property">InitialValue</code> properties
                of the <code class="object">ode</code> object.</p></li><li><p><code class="literal">Parameters</code> is the new value of <code class="literal">Parameters</code>
                supplied to <code class="property">ODEFcn</code> (or any other function that accepts the
                parameters). Use this output to modify the value of <code class="literal">Parameters</code>
                supplied to the callback function as an input. If <code class="literal">stop</code> is
                  <code class="literal">false</code> and the integration restarts from time
                  <code class="literal">te</code>, then the new value of <code class="literal">Parameters</code> is
                supplied to all functions that accept it. This change is local to the currently
                running integration and does not affect the <code class="property">Parameters</code> property
                of the <code class="object">ode</code> object.</p></li></ul></div><p class="description_valueexample"><strong>Example: </strong>
            <code class="literal">E.CallbackFcn = @eventCallback</code> specifies a handle to a function named
              <code class="literal">eventCallback</code> as the callback function.</p></div><p class="datatypelist"><strong>Data Types: </strong><code>function_handle</code></p></div></div></div></div></div>
    </div></div></div></div></div><div class="examples"><h2 id="mw_e346de75-0faf-4ff3-808e-0f5745a4e1fb">Examples</h2><div class="expandableContent" id="expandableExamples"><p class="switch"><a href="javascript:void(0);" class="expandAllLink" data-allexpanded="true3">collapse all</a></p><div class="mw_ws_accordion_container"><div class="accordion" role="tablist" aria-multiselectable="true" id="expand_accordion_heading_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111"><div class="accordion-item "><div class="accordion-header"><button role="tab" data-bs-toggle="collapse" id="expand_accordion_heading_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" data-bs-target="#expand_accordion_body_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" aria-controls="expand_accordion_body_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" class="accordion-button add_cursor_pointer" aria-expanded="true"><h3 id="mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111">Use Callback Function to Restart Integration of Bouncing Ball</h3></button></div><div role="tabpanel" id="expand_accordion_body_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" aria-labelledby="expand_accordion_heading_mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111" class="accordion-collapse collapse show"><div class="accordion-body"><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/BouncingBallEventsExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Use Callback Function to Restart Integration of Bouncing Ball",
          "description": "Consider a ball thrown upward with an initial velocity dy/dt. The ball is subject to acceleration due to gravity aimed downward, so its acceleration is",
          "thumbnailURL": "../../examples/matlab/win64/BouncingBallEventsExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "odeevent.html"

        },
          "identifier": "matlab.BouncingBallEventsExample",
          "name": "BouncingBallEventsExample",
          "url": "odeevent.html#mw_1eb56610-63b5-4c6a-9b96-4f6bd7e78111"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/BouncingBallEventsExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "BouncingBallEventsExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><p class="shortdesc">Consider a ball thrown upward with an initial velocity <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><mi mathvariant="normal">dy</mi><mo>/</mo><mi mathvariant="normal">dt</mi></mrow></math></span>. The ball is subject to acceleration due to gravity aimed downward, so its acceleration is</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mfrac><mrow><msup><mrow><mi>d</mi></mrow><mrow><mn>2</mn></mrow></msup><mi>y</mi></mrow><mrow><mi>d</mi><msup><mrow><mi>t</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></mfrac><mo>=</mo><mo>-</mo><mi>g</mi><mo stretchy="false">.</mo></mrow></math></p></div><p></p><p>Rewriting the equation as a first-order system of equations with the substitutions <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>=</mo><mi mathvariant="italic">y</mi></mrow></math></span> and <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>2</mn></mrow></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">dy</mi></mrow><mrow><mi mathvariant="normal">dt</mi></mrow></mfrac></mrow></math></span> yields</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mtable columnalign="left"><mtr><mtd><mrow><msubsup><mrow><mi>y</mi></mrow><mrow><mn>1</mn></mrow><mrow><mo>′</mo></mrow></msubsup><mo>=</mo><msub><mrow><mi>y</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></mtd></mtr><mtr><mtd><mrow><msubsup><mrow><mi>y</mi></mrow><mrow><mn>2</mn></mrow><mrow><mo>′</mo></mrow></msubsup><mo>=</mo><mo>-</mo><mi>g</mi><mo stretchy="false">.</mo></mrow></mtd></mtr></mtable></mrow></math></p></div><p></p><p>Solve the equations for the position <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub></mrow></math></span> and velocity <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math></span> of the ball over time. </p><div class="procedure"><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950.BouncingBallEventsExample-1" class="anchor_target"></span><p class="title" id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_sep_BouncingBallEventsExample-1"><b>Define Equations and Initial Conditions</b></p><p>Create a function handle for the first-order system of equations that accepts two inputs for <code class="literal">(t,y)</code>. Use the value <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><mi mathvariant="italic">g</mi><mo>=</mo><mn>9</mn><mo>.</mo><mn>8</mn></mrow></math></span> for the acceleration due to gravity.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>dydt = @(t,y) [y(2); -9.8];</pre></div></div></div><p>Next, create a vector with the initial conditions. The ball starts at position <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>=</mo><mn>3</mn></mrow></math></span> at <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><mi mathvariant="italic">t</mi><mo>=</mo><mn>0</mn></mrow></math></span> as it is thrown upward with initial velocity <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>2</mn></mrow></msub><mo>=</mo><mn>20</mn></mrow></math></span>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>y0 = [3 20];</pre></div></div></div><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950.BouncingBallEventsExample-2" class="anchor_target"></span><p class="title" id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_sep_BouncingBallEventsExample-2"><b>Model Ball Bounces as Events</b></p><p>The ball initially travels upward until the force due to gravity causes it to change direction and head back down to the ground. If you solve the equations without more consideration, then the ball falls back downward forever without striking the ground. Instead, you can use an event function to detect when the position of the ball goes to zero where the ground is located. Because the solution component <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>=</mo><mi mathvariant="italic">y</mi></mrow></math></span> is the position of the ball, the event function tracks the value of <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub></mrow></math></span> so that an event triggers whenever <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>=</mo><mn>0</mn></mrow></math></span>.</p><p>Create a function handle for the event function that accepts two inputs for <code class="literal">(t,y)</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>bounceEvent = @(t,y) y(1);</pre></div></div></div><p>When the ball strikes the ground, its direction changes again as it heads back upwards with a new (smaller) initial velocity. To model this situation, use a callback function along with the event function. When an event triggers, the ODE solver invokes the callback function. The callback function resets the position and initial velocity of the ball so that the integration can restart with the correct initial conditions. When an event occurs, the callback function sets the position <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>=</mo><mn>0</mn></mrow></math></span> and attenuates the velocity by a factor of <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><mn>0</mn><mo>.</mo><mn>9</mn></mrow></math></span> while reversing its direction back upward. Define a callback function that performs these actions.</p><div class="code_responsive"><pre id="d126e1226491" class="programlisting"><span style="color:#0000FF">function</span> [stop,y] = bounceResponse(t,y)
stop = false;
y(1) = 0;
y(2) = -0.9*y(2);
<span style="color:#0000FF">end</span>
</pre></div><p>(The callback function is included as a local function at the end of the example.)</p><p>Create an <code class="literal">odeEvent</code> object to represent the bouncing ball events. Specify <code class="literal">Direction="descending"</code> so that only events where the position is decreasing are detected. Also, specify <code class="literal">Response="callback"</code> so that the solver invokes the callback function when an event occurs.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>E = odeEvent(EventFcn=bounceEvent, <span style="color:#0000FF">...</span>
             Direction=<span style="color:#A020F0">"descending"</span>, <span style="color:#0000FF">...</span>
             Response=<span style="color:#A020F0">"callback"</span>, <span style="color:#0000FF">...</span>
             CallbackFcn=@bounceResponse)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>E = 
  odeEvent with properties:

       EventFcn: @(t,y)y(1)
      Direction: descending
       Response: callback
    CallbackFcn: @bounceResponse

</pre></div></div></div><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950.BouncingBallEventsExample-3" class="anchor_target"></span><p class="title" id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_sep_BouncingBallEventsExample-3"><b>Solve Equations</b></p><p>Create an <code class="literal">ode</code> object for the problem, specifying the equations <code class="literal">dydt</code>, initial conditions <code class="literal">y0</code>, and events <code class="literal">E</code> as property values.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>F = ode(ODEFcn=dydt,InitialValue=y0,EventDefinition=E);</pre></div></div></div><p>Integrate the equations over the time interval <code class="literal">[0 30]</code> by using the <code class="literal">solve</code> method. Specify <code class="literal">Refine=8</code> to generate 8 points per step. The resulting object has properties for the time and solution, and because events are being tracked, the object also displays properties related to the events that triggered during the integration.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>S = solve(F,0,30,Refine=8)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>S = 
  ODEResults with properties:

             Time: [0 0.0038 0.0075 0.0113 0.0151 0.0188 0.0226 0.0264 0.0301 0.0490 0.0678 0.0867 0.1055 0.1243 0.1432 0.1620 0.1809 0.2751 0.3692 0.4634 0.5576 0.6518 0.7460 0.8402 0.9344 1.3094 1.6844 2.0594 2.4344 2.8094 3.1844 … ] (1×468 double)
         Solution: [2×468 double]
        EventTime: [4.2265 8.1607 11.7015 14.8882 17.7563 20.3375 22.6606 24.7514 26.6331 28.3267 29.8509]
    EventSolution: [2×11 double]
       EventIndex: [1 1 1 1 1 1 1 1 1 1 1]

</pre></div></div></div><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950.BouncingBallEventsExample-4" class="anchor_target"></span><p class="title" id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_sep_BouncingBallEventsExample-4"><b>Plot Results</b></p><p>Plot the position <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msub><mrow><mi mathvariant="italic">y</mi></mrow><mrow><mn>1</mn></mrow></msub></mrow></math></span> of the ball over time, marking the initial position with a green circle and events with red circles.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(S.Time,S.Solution(1,:),<span style="color:#A020F0">"--"</span>)
hold <span style="color:#A020F0">on</span>
plot(S.EventTime,S.EventSolution(1,:),<span style="color:#A020F0">"ro"</span>)
plot(0,y0(1),<span style="color:#A020F0">"go"</span>)
hold <span style="color:#A020F0">off</span>
ylim([0 25])
xlabel(<span style="color:#A020F0">"Time"</span>)
ylabel(<span style="color:#A020F0">"Position y_1"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e1226549" class="mediaobject"><p><img src="../../examples/matlab/win64/BouncingBallEventsExample_01.png" alt="Figure contains an axes object. The axes object with xlabel Time, ylabel Position y indexOf 1 baseline Position y_1 contains 3 objects of type line. One or more of the lines displays its values using only markers" width="560"></p></div></div><span id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950.BouncingBallEventsExample-5" class="anchor_target"></span><p class="title" id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_sep_BouncingBallEventsExample-5"><b>Local Functions</b></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> [stop,y] = bounceResponse(t,y)
stop = false;
y(1) = 0;
y(2) = -0.9*y(2);
<span style="color:#0000FF">end</span></pre></div></div></div></div></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-BouncingBallEventsExample"><meta itemprop="exampletitle" content="Use Callback Function to Restart Integration of Bouncing Ball"></div></div></div></div><div class="ref_sect"><h2 id="mw_cda0ef9f-c3f0-4d1a-9ba0-38d9febd0e1f">Version History</h2><strong>Introduced in R2023b</strong><div class="expandableContent"><p class="switch"><a href="javascript:void(0);" class="expandAllLink">expand all</a></p><div class="mw_ws_accordion_container"><div class="accordion -presentation_expander -presentation_condensed"><div class="accordion-item"><div class="accordion-header"><button data-bs-toggle="collapse" data-bs-target="#expand_body_mw_065eed73-4f4b-4df9-a8f3-eaa913509c92" aria-controls="expand_body_mw_065eed73-4f4b-4df9-a8f3-eaa913509c92" class="accordion-button collapsed" aria-expanded="false"><h3 id="mw_065eed73-4f4b-4df9-a8f3-eaa913509c92">R2025a: <span class="remove_bold">Specify event for delay differential equations (DDEs)</span></h3></button></div><div id="expand_body_mw_065eed73-4f4b-4df9-a8f3-eaa913509c92" class="accordion-collapse collapsed collapse"><div class="accordion-body"><p>The <code class="property">EventFcn</code> property can accept functions of the form <code class="literal">v =
          myEvents(t,y,Z)</code> and <code class="literal">v = myEvents(t,y,ydel,ypdel)</code> for DDEs.
        Specify the <code class="object">ode</code> object property <code class="property">EquationType</code> as
          <code class="literal">"delay"</code> to use these three- and four-argument forms for
          <code class="property">EventFcn</code>.</p></div></div></div></div></div><div class="mw_ws_accordion_container"><div class="accordion -presentation_expander -presentation_condensed"><div class="accordion-item"><div class="accordion-header"><button data-bs-toggle="collapse" data-bs-target="#expand_body_mw_42dc697a-22e8-462f-8423-f3823f1cb7d8" aria-controls="expand_body_mw_42dc697a-22e8-462f-8423-f3823f1cb7d8" class="accordion-button collapsed" aria-expanded="false"><h3 id="mw_42dc697a-22e8-462f-8423-f3823f1cb7d8">R2024b: <span class="remove_bold">Specify event for implicit ODEs</span></h3></button></div><div id="expand_body_mw_42dc697a-22e8-462f-8423-f3823f1cb7d8" class="accordion-collapse collapsed collapse"><div class="accordion-body"><p>The <code class="property">EventFcn</code> property can accept functions of the form <code class="literal">v =
          myEvents(t,y,yp)</code> for implicit ODEs. Specify the <code class="object">ode</code> object
        property <code class="property">EquationType</code> as <code class="literal">"fullyimplicit"</code> to use the
        three-argument form for <code class="property">EventFcn</code>.</p></div></div></div></div></div></div></div><div class="ref_sect"><h2 id="mw_b8ff528c-2c28-4b75-b696-03b5ae607950_seealso">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="ode.html"><span itemprop="name"><code class="object">ode</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="odemassmatrix.html"><span itemprop="name"><code class="object">odeMassMatrix</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="odejacobian.html"><span itemprop="name"><code class="object">odeJacobian</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="matlab.ode.oderesults.html"><span itemprop="name"><code class="object">ODEResults</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="odeset.html"><span itemprop="name"><code class="function">odeset</code></span></a></span></p></div>
    </div></div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
