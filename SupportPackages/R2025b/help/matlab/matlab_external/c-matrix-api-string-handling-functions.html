<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>C Matrix API String Handling Functions</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../external-language-interfaces.html",
          "name": "External Language Interfaces"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../c-language.html",
          "name": "C with MATLAB"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../call-mex-files-1.html",
          "name": "Write C Functions Callable from MATLAB (MEX Files)"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "call-mex-files-1"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="con">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="con">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="How MEX files based on mxArray handle C/C++ strings."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../external-language-interfaces.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">External Language Interfaces</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../c-language.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">C with MATLAB</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../call-mex-files-1.html?s_tid=CRUX_lftnav" itemprop="url" id="btv27nw"><span itemprop="title">Write C Functions Callable from MATLAB (MEX Files)</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">C Matrix API String Handling Functions</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#bumr2_j" class="nav-link intrnllnk">How MATLAB Represents Strings in MEX Files</a></li><li class="nav-item"><a href="#bumlons" class="nav-link intrnllnk">Character Encoding and Multibyte Encoding Schemes</a></li><li class="nav-item"><a href="#bumqcyz" class="nav-link intrnllnk">Converting MATLAB Character Vector to C-Style String</a></li><li class="nav-item"><a href="#bumqc0y-1" class="nav-link intrnllnk">Converting C-Style String to MATLAB Character Vector</a></li><li class="nav-item"><a href="#bumqcy3" class="nav-link intrnllnk">Returning Modified Input String</a></li><li class="nav-item"><a href="#bumqpme" class="nav-link intrnllnk">Memory Management</a></li><li class="nav-item"><a href="#seealsoref" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=call-mex-files-1&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=call-mex-files-1&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=call-mex-files-1&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=call-mex-files-1&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=call-mex-files-1&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=call-mex-files-1&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bumjwb8">C Matrix API String Handling Functions</h2><section><h3 class="title" id="bumr2_j">How <span class="trademark entity">MATLAB</span> Represents Strings in MEX Files</h3><p>In C/C++ MEX functions built with the C Matrix API, a MATLAB<sup>&#x00AE;</sup> character vector is an <code class="literal">mxArray</code>
                                    of type <a href="../apiref/mxchar.html"><code class="function">mxChar</code></a>, using a locale-neutral data
                                    representation (Unicode<sup>&#x00AE;</sup> encoding). MATLAB represents C-style strings as type
                                                <code class="literal">char</code>, and uses the character
                                    encoding scheme specified by the user locale setting.</p><p>The following C Matrix API functions provide string handling functions
                                    to help you work with both mxArrays and C-style strings.</p><p>
                                    </p>
<div class="itemizedlist"><ul><li><p><a href="../apiref/mxcreatestring.html"><code class="function">mxCreateString</code></a> &#8212; Creates a
                                                  <code class="function">mxChar</code> mxArray initialized to
                                                  the input string.</p></li><li><p><a href="../apiref/mxarraytostring.html"><code class="function">mxArrayToString</code></a> &#8212; Copies a
                                                  <code class="function">mxChar</code> mxArray into a C-style
                                                  string. Supports multibyte encoded
                                                  characters.</p></li><li><p><a href="../apiref/mxgetstring.html"><code class="function">mxGetString</code></a> &#8212; Copies a
                                                  <code class="function">mxChar</code> mxArray into a C-style
                                                  string. Best used with single-byte encoded
                                                  characters. Supports multibyte encoded characters
                                                  when you calculate string buffer size.</p></li><li><p><a href="../apiref/mxgetchars.html"><code class="function">mxGetChars</code></a> &#8212; Returns a pointer
                                                  to the first <code class="literal">mxChar</code> element in
                                                  the mxArray.</p></li></ul></div><p>

                        </p><p>Consider the following topics when choosing a string handling
                                    function.</p></section><section><h3 class="title" id="bumlons">Character Encoding and Multibyte Encoding Schemes</h3><p>MATLAB supports the character encoding scheme specified
                                    by the user locale setting. When an MX Library function converts
                                                <code class="literal">mxChar</code> data to a C
                                                <code class="literal">char</code> type, MATLAB also converts the character to the user default
                                    encoding.</p><p>If you use a multibyte encoding scheme, use the <a href="../apiref/mxarraytostring.html"><code class="function">mxArrayToString</code></a> function.</p><p>The <a href="../apiref/mxgetchars.html"><code class="function">mxGetChars</code></a> function provides a pointer
                                    to the <code class="literal">mxChar</code> array; it does not change the
                                    character encoding.</p><p>You can also use the <a href="../apiref/mxgetstring.html"><code class="function">mxGetString</code></a> function with multibyte
                                    encoding schemes. <a href="../apiref/mxgetstring.html"><code class="function">mxGetString</code></a> converts the
                                                <code class="literal">mxChar</code> data to your user default
                                    encoding, and copies the converted characters to the destination
                                    buffer. However, you must calculate the size of the destination
                                    buffer. For single-byte encoding, the size of the buffer is the
                                    number of characters, plus <code class="literal">1</code> for the null
                                    terminator. For multibyte encoding, the size of a character is
                                    one or more bytes. Some options for calculating the buffer size
                                    are to overestimate the amount (calculating the number of
                                    characters times the maximum number of bytes used by the
                                    encoding scheme), analyze the string to determine the precise
                                    size used by each character, or utilize 3rd-party string buffer
                                    libraries. After this calculation, add <code class="literal">1</code> for
                                    the null terminator.</p></section><section><h3 class="title" id="bumqcyz">Converting <span class="trademark entity">MATLAB</span> Character Vector to C-Style String</h3><p>When you pass a character array to a MEX function, it is an
                                                <code class="literal">mxArray</code> of type
                                                <code class="function">mxChar</code>. If you call a C
                                    function to manipulate the string, first convert the data to a C
                                    type <code class="literal">char</code> using the <a href="../apiref/mxarraytostring.html"><code class="function">mxArrayToString</code></a> or <a href="../apiref/mxgetstring.html"><code class="function">mxGetString</code></a> functions.</p></section><section><h3 class="title" id="bumqc0y-1">Converting C-Style String to <span class="trademark entity">MATLAB</span> Character Vector</h3><p>If your MEX file creates a C string and returns the data to
                                                MATLAB, use the <a href="../apiref/mxcreatestring.html"><code class="function">mxCreateString</code></a> function to copy the C
                                    string into an <code class="function">mxChar</code> array.</p></section><section><h3 class="title" id="bumqcy3">Returning Modified Input String</h3><p>Suppose that your MEX file takes character input, modifies it, and
                                    returns the result. Since MEX file input parameters (the
                                                <code class="literal">prhs</code> array) are read-only, you
                                    must define a separate output parameter to handle the modified
                                    string.</p></section><section><h3 class="title" id="bumqpme">Memory Management</h3><p>MathWorks<sup>&#x00AE;</sup> recommends that MEX file functions destroy their
                                    own temporary arrays and free their own dynamically allocated
                                    memory. The function you use to release memory depends on how
                                    you use the string buffer and what function you use to create
                                    the buffer.</p><div class="table-responsive"><table class="table table-condensed"><colgroup><col class="tcol1" width="50%"><col class="tcol2" width="51%"></colgroup><thead><tr><th><p>If You Call This
                                                  Function</p></th><th><p>Release Memory Using
                                                  This Function</p></th></tr></thead><tbody><tr><td><p>Any string function listed
                                                  here</p></td><td><p>Do not destroy an
                                                  <code class="literal">mxArray</code> in a source MEX file
                                                  when it is: </p>
<div class="itemizedlist"><ul><li><p>Passed to the MEX file in the right-hand
                                                  side list <code class="literal">prhs[]</code>.</p></li><li><p>Returned in the left side list
                                                  <code class="literal">plhs[]</code>.</p></li><li><p>Returned by the
                                                  <code class="function">mexGetVariablePtr</code>
                                                  function.</p></li><li><p>Used to create a structure.</p></li></ul></div><p>
</p></td></tr><tr><td><p><code class="function">mxArrayToString</code></p></td><td><p><code class="function">mxFree</code></p></td></tr><tr><td><p><code class="function">mxGetString</code></p></td><td><p>When using
                                                  <code class="function">mxCalloc</code> /
                                                  <code class="function">mxMalloc</code> /
                                                  <code class="function">mxRealloc</code> to create input
                                                  argument <code class="literal">buf</code>, call
                                                  <code class="literal">mxFree(buf)</code>.</p></td></tr><tr><td><p><code class="function">mxCreateString</code></p></td><td><p><code class="function">mxDestroyArray</code></p></td></tr><tr><td><p><code class="function">mxGetChars</code></p></td><td><p>None. Function creates a pointer to
                                                  an <code class="literal">mxArray</code> but does not
                                                  allocate additional memory.</p></td></tr></tbody></table></div></section>
                        <h2 id="seealsoref">See Also</h2><h3 id="d126e37779">Topics</h3><ul class="list-unstyled"><li><a href="../cc-mx-matrix-library.html" class="a">C Matrix API</a></li><li><a href="../matlab_env/how-the-matlab-process-uses-locale-settings.html" class="a">Set Locale and Display Language</a></li></ul>
            </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
