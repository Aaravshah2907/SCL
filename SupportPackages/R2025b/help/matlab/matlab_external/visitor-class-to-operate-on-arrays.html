<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Operate on C++ Arrays Using Visitor Pattern</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../external-language-interfaces.html",
          "name": "External Language Interfaces"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../cpp-language.html",
          "name": "C++ with MATLAB"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../matlab-data-array.html",
          "name": "MATLAB Data API for C++"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "matlab-data-array"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="The visitor design pattern is a useful technique for performing various operations on arrays."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../external-language-interfaces.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">External Language Interfaces</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../cpp-language.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">C++ with MATLAB</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../matlab-data-array.html?s_tid=CRUX_lftnav" itemprop="url" id="bvh37q6"><span itemprop="title">MATLAB Data API for C++</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Operate on C++ Arrays Using Visitor
            Pattern</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_2f13c382-378b-4574-baba-0388814ab6fb" class="nav-link intrnllnk">Dispatch on Array or Array Reference</a></li><li class="nav-item"><a href="#mw_55dbaa55-b187-4eb7-ae89-7989768e266c" class="nav-link intrnllnk">Overloading operator()</a></li><li class="nav-item"><a href="#mw_e1af44cf-9bb6-4a7f-b9bb-90f3ac033273" class="nav-link intrnllnk">Visitor Class to Display Contents of Cell Array</a></li><li class="nav-item"><a href="#mw_ee42acb5-9c07-46cb-a460-ac12315ce4af" class="nav-link intrnllnk">Visitor Class to Modify Contents of Cell Array</a></li><li class="nav-item"><a href="#d126e1999" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=matlab-data-array&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=matlab-data-array&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=matlab-data-array&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=matlab-data-array&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=matlab-data-array&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=matlab-data-array&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="mw_dc114f41-6d3c-487b-b17e-12f14f6cbbed">Operate on C++ Arrays Using Visitor
            Pattern</h2><p>The C++ MATLAB<sup>&#x00AE;</sup> Data API supports the use of visitor classes via the <a href="../apiref/matlab-data-apply_visitor.html"><code class="cpp">matlab::data::apply_visitor</code></a> and <a href="../apiref/matlab.data.apply_visitor_ref.html"><code class="cpp">matlab::data::apply_visitor_ref</code></a> functions. These functions accept an array or
            array reference and a visitor class as inputs. </p><p>The <code class="literal">apply_visitor</code> and <code class="literal">apply_visitor_ref</code>
            functions dispatch to the operations defined by the visitor class based on input array
            type. The visitor class defines operations to perform on specific types of array. </p><p>Use the visitor pattern in cases such as these:</p><div class="itemizedlist"><ul><li><p>There are many operations that you need to perform on an array and the way to
                    perform them depends on the type of the array.</p></li><li><p>The array returned by a function can be of different known types and you want
                    to handle all cases.</p></li><li><p>You are working with heterogeneous structures like cell arrays or structure
                    arrays.</p></li></ul></div><section><h3 class="title" id="mw_2f13c382-378b-4574-baba-0388814ab6fb">Dispatch on Array or Array Reference</h3><p>The <code class="literal">apply_visitor</code> function dispatches to the visitor class
                operation based on the type of the input array. The syntax for calling
                    <code class="literal">apply_visitor</code> accepts a
                    <code class="literal">matlab::data::Array</code> and your visitor class instance:</p><div class="code_responsive"><pre class="programlisting">auto apply_visitor(matlab::data::Array a, V visitor)</pre></div><p>The <code class="literal">apply_visitor_ref</code> function dispatches to the visitor class
                operation based on the type of the array reference passed as an input. The syntax
                for calling <code class="literal">apply_visitor_ref</code> accepts a
                    <code class="literal">matlab::data::ArrayRef</code> and your visitor class
                instance:</p><div class="code_responsive"><pre class="programlisting">auto apply_visitor_ref(const matlab::data::ArrayRef&amp; a, V visitor)</pre></div></section><section><h3 class="title" id="mw_55dbaa55-b187-4eb7-ae89-7989768e266c">Overloading <code class="literal">operator()</code></h3><p>Implement your visitor class to overload the operator
                    <code class="literal">operator()</code> for the array types you want to operate on. For
                example, suppose one operation that you want to implement is to return the text
                contained in a <code class="literal">matlab::data::CharArray</code> as a
                    <code class="literal">std::string</code>. Implement the operation like this:</p><div class="code_responsive"><pre class="programlisting">std::string operator()(matlab::data::CharArray arr){
   return arr.toAscii();
}</pre></div><p>As another example, suppose that you want to negate the logical values in a
                    <code class="literal">matlab::data::TypedArray</code>. In this case, use a reference to
                the array:</p><div class="code_responsive"><pre class="programlisting">void operator()(TypedArrayRef&lt;bool&gt; boolArrRef) {
    std::cout &lt;&lt; "Negate logical value: " &lt;&lt; std::endl;
    for (auto &amp;b : boolArrRef) {
        b = !b;
    }       
}</pre></div><p>You must use an element reference in the range-based <code class="literal">for</code> loop
                to change the value in the array. Only use
                    <code class="literal">matlab::data::TypedArrayRef</code> on elements of a container type
                such as a struct or cell.</p></section><section><h3 class="title" id="mw_e1af44cf-9bb6-4a7f-b9bb-90f3ac033273"><strong class="emphasis bold">Visitor Class to Display Contents of Cell Array</strong></h3><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/VisitorClassToDisplayContentsOfCellArrayExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Visitor Class to Display Contents of Cell Array",
          "description": "Use a visitor class to define operations to perform on specific types of matlab::data::Array.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "visitor-class-to-operate-on-arrays.html"

        },
          "identifier": "matlab.VisitorClassToDisplayContentsOfCellArrayExample",
          "name": "VisitorClassToDisplayContentsOfCellArrayExample",
          "url": "visitor-class-to-operate-on-arrays.html#mw_e1af44cf-9bb6-4a7f-b9bb-90f3ac033273"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/VisitorClassToDisplayContentsOfCellArrayExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "VisitorClassToDisplayContentsOfCellArrayExample.mlx",
        "DisplayVisitor.cpp",
        "callDisplayCell.cpp"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-VisitorClassToDisplayContentsOfCellArrayExample"><meta itemprop="exampletitle" content="Visitor Class to Display Contents of Cell Array"></div><span id="VisitorClassToDisplayContentsOfCellArrayExample" class="anchor_target"></span><p class="shortdesc">This example shows how to use a visitor class to define operations to perform on specific types of <code class="literal">matlab::data::Array</code>.</p><p>The <code class="literal">DisplayVisitor</code> class implements operations to display the contents of cell arrays for arrays of types <code class="literal">bool</code>, <code class="literal">double</code>, and <code class="literal">char</code>, and contained cell arrays. You can add new operations to support other cell array contents by adding more overloaded functions.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>type <span style="color:#A020F0">DisplayVisitor.cpp</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>#include "MatlabDataArray.hpp"
#include &lt;iostream&gt;

using namespace matlab::data;
void DisplayCell(const CellArray cellArray);

    class DisplayVisitor {
    public:
        template &lt;typename U&gt;
        void operator()(U arr) {}

        void operator()(const TypedArray&lt;bool&gt; boolArr) {
            std::cout &lt;&lt; "Cell contains logical array: " &lt;&lt; std::endl;
            for (auto b : boolArr) {
                printf_s("%d ", b);
            }
            std::cout &lt;&lt; "\n";
        }

        void operator()(const TypedArray&lt;double&gt; doubleArr) {
            std::cout &lt;&lt; "Cell contains double array: " &lt;&lt; std::endl;
            for (auto elem : doubleArr) {
                std::cout &lt;&lt; elem &lt;&lt; " ";
            }
            std::cout &lt;&lt; "\n";
        }

        void operator()(const CharArray charArr) {
            std::cout &lt;&lt; "Cell contains char array: " &lt;&lt; std::endl;
            for (auto elem : charArr) {
                std::cout &lt;&lt; char(elem);
            }
            std::cout &lt;&lt; "\n";
        }

        void operator()(const CellArray containedCellArray) {
            DisplayCell(containedCellArray);
        }
    };

    void DisplayCell(const CellArray cellArray) {
        DisplayVisitor v;
        for (auto elem : cellArray) {
            apply_visitor(elem, v);
        }
    }
</pre></div></div></div><p>To use the class, pass a cell array to the <code class="literal">DisplayCell</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>type <span style="color:#A020F0">callDisplayCell.cpp</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>int main() {
    ArrayFactory factory;

    // Create cell array
    matlab::data::CellArray cellArray = factory.createCellArray({ 1,4 },
        factory.createCharArray("A char array"),
        factory.createArray&lt;bool&gt;({ 1,2 }, { false, true }),
        factory.createArray&lt;double&gt;({ 2,2 }, { 1.2, 2.2, 3.2, 4.2 }),
        factory.createCellArray({ 1,1 }, false));

    // Call function 
    DisplayCell(cellArray);

    return 0;
}
</pre></div></div></div><div class="procedure"></div></section><section><h3 class="title" id="mw_ee42acb5-9c07-46cb-a460-ac12315ce4af"><strong class="emphasis bold">Visitor Class to Modify Contents of Cell Array</strong></h3><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/VisitorClassToModifyContentsOfCellArrayExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Visitor Class to Modify Contents of Cell Array",
          "description": "In this example, the CellModifyVisitor class implements the operations to modify the contents of cell arrays of types bool, double, and char, and contained cell arrays. You can add new operations to support other cell array contents by adding more overloaded functions.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "visitor-class-to-operate-on-arrays.html"

        },
          "identifier": "matlab.VisitorClassToModifyContentsOfCellArrayExample",
          "name": "VisitorClassToModifyContentsOfCellArrayExample",
          "url": "visitor-class-to-operate-on-arrays.html#mw_ee42acb5-9c07-46cb-a460-ac12315ce4af"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/VisitorClassToModifyContentsOfCellArrayExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "VisitorClassToModifyContentsOfCellArrayExample.mlx",
        "CellModifyVisitor.cpp",
        "callModifyCell.cpp"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-VisitorClassToModifyContentsOfCellArrayExample"><meta itemprop="exampletitle" content="Visitor Class to Modify Contents of Cell Array"></div><span id="VisitorClassToModifyContentsOfCellArrayExample" class="anchor_target"></span><p class="shortdesc">In this example, the <code class="literal">CellModifyVisitor</code> class implements the operations to modify the contents of cell arrays of types <code class="literal">bool</code>, <code class="literal">double</code>, and <code class="literal">char</code>, and contained cell arrays. You can add new operations to support other cell array contents by adding more overloaded functions.</p><p>The <code class="literal">ModifyCell</code> function calls <code class="literal">apply_visitor_ref</code> in a loop for each element in the cell array. Because the objective is to modify the contents of the cell array, this example uses references to the cell array contents.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>type <span style="color:#A020F0">CellModifyVisitor.cpp</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>#include "MatlabDataArray.hpp"
#include "MatlabEngine.hpp"
#include &lt;iostream&gt;

using namespace matlab::data;
void ModifyCell(CellArray &amp;cellArray);

class CellModifyVisitor {
public:
    template &lt;typename U&gt;
    void operator()(U arr) {}

    void operator()(TypedArrayRef&lt;bool&gt; boolArrRef) {
        std::cout &lt;&lt; "Negate logical value: " &lt;&lt; std::endl;
        for (auto &amp;b : boolArrRef) {
            b = !b;
        }       
    }

    void operator()(TypedArrayRef&lt;double&gt; doubleArrRef) {
        std::cout &lt;&lt; "Add 1 to each value: " &lt;&lt; std::endl;
        for (auto &amp;elem : doubleArrRef) {
            elem = elem + 1;
        }
        std::cout &lt;&lt; "\n";
    }

    void operator()(CharArrayRef charArrRef) {
        std::cout &lt;&lt; "Modify char array" &lt;&lt; std::endl;
        ArrayFactory factory;
        charArrRef = factory.createCharArray("Modified char array");
    }
 
    void operator()(CellArrayRef containedCellArray) {
        CellModifyVisitor v;
        for (auto elem : containedCellArray) {
            apply_visitor_ref(elem, v);
        }
    }
    
};

void ModifyCell(CellArray &amp;cellArray) {
    CellModifyVisitor v;
    for (auto elem : cellArray) {
        apply_visitor_ref(elem, v);
    }
}
</pre></div></div></div><p>To use the class, pass a cell array to the <code class="literal">ModifyCell</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>type <span style="color:#A020F0">callModifyCell.cpp</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>int main() {
    ArrayFactory factory;

    // Create cell array
    matlab::data::CellArray cellArray = factory.createCellArray({ 1,4 },
        factory.createCharArray("A char array"),
        factory.createArray&lt;bool&gt;({ 1,2 }, { false, true }),
        factory.createArray&lt;double&gt;({ 2,2 }, { 1.2, 2.2, 3.2, 4.2 }),
        factory.createCellArray({ 1,1 }, false));

    // Call function
    ModifyCell(cellArray);

    return 0;
}
</pre></div></div></div><div class="procedure"></div></section>
            <h2 id="d126e1999">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/matlab-data-apply_visitor.html"><span itemprop="name"><code class="cpp">matlab::data::apply_visitor</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/matlab.data.apply_visitor_ref.html"><span itemprop="name"><code class="cpp">matlab::data::apply_visitor_ref</code></span></a></span></p>
            <h3 id="d126e2008">Topics</h3><ul class="list-unstyled"><li><a href="cpp-api-cell-arrays.html" class="a">C++ Cell Arrays</a></li></ul>
            
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
