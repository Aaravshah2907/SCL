<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Create Fortran Source MEX File</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../external-language-interfaces.html",
          "name": "External Language Interfaces"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../fortran-language.html",
          "name": "Fortran with MATLAB"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../call-mex-fortran.html",
          "name": "Write Fortran Functions Callable from MATLAB (MEX Files)"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../write-fortran-mex-files.html",
          "name": "Fortran Source MEX Files"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "write-fortran-mex-files"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "UISupport",
          "value": "Desktop"

        }</script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to write a MEX file to call a Fortran subroutine, timestwo, in MATLAB using a MATLAB matrix."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../external-language-interfaces.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">External Language Interfaces</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../fortran-language.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Fortran with MATLAB</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../call-mex-fortran.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Write Fortran Functions Callable from MATLAB (MEX Files)</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../write-fortran-mex-files.html?s_tid=CRUX_lftnav" itemprop="url" id="bt35ugb"><span itemprop="title">Fortran Source MEX Files</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Create Fortran Source MEX File</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_7536cce6-b099-460a-8660-36b4f0406618" class="nav-link intrnllnk">Fortran subroutine timestwo</a></li><li class="nav-item"><a href="#d126e45914" class="nav-link intrnllnk">Create Source File</a></li><li class="nav-item"><a href="#d126e45943" class="nav-link intrnllnk">Create Gateway Routine</a></li><li class="nav-item"><a href="#d126e45961" class="nav-link intrnllnk">Declare mexfunction Arguments</a></li><li class="nav-item"><a href="#d126e45978" class="nav-link intrnllnk">Declare Functions and Local Variables</a></li><li class="nav-item"><a href="#d126e46004" class="nav-link intrnllnk">Verify MEX File Input and Output Arguments</a></li><li class="nav-item"><a href="#d126e46021" class="nav-link intrnllnk">Create Computational Routine</a></li><li class="nav-item"><a href="#d126e46036" class="nav-link intrnllnk">Declare Variables for Computational Routine</a></li><li class="nav-item"><a href="#d126e46043" class="nav-link intrnllnk">Read Input Array</a></li><li class="nav-item"><a href="#d126e46058" class="nav-link intrnllnk">Prepare Output Data</a></li><li class="nav-item"><a href="#d126e46077" class="nav-link intrnllnk">Perform Calculation</a></li><li class="nav-item"><a href="#d126e46084" class="nav-link intrnllnk">Copy Results to Output Argument</a></li><li class="nav-item"><a href="#mw_96bc7b33-4b5f-4919-aa9f-4e9b16abdc41" class="nav-link intrnllnk">View Complete Source File</a></li><li class="nav-item"><a href="#d126e46100" class="nav-link intrnllnk">Build Binary MEX File</a></li><li class="nav-item"><a href="#d126e46109" class="nav-link intrnllnk">Test the MEX File</a></li><li class="nav-item"><a href="#d126e46117" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=write-fortran-mex-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bt8xxah-1">Create Fortran Source MEX File</h2>
                  <p class="shortdesc">This example shows how to write a MEX file to call a
                        Fortran subroutine, <code class="literal">timestwo</code>, in MATLAB<sup>&#x00AE;</sup> using a MATLAB matrix. You can view the complete source file <a href="create-fortran-source-mex-file.html#mw_96bc7b33-4b5f-4919-aa9f-4e9b16abdc41" class="intrnllnk">here</a>. This example uses the MATLAB Editor to write the source code and the MATLAB
                        <a href="../ref/mex.html"><code class="function">mex</code></a> command to create the
                        MEX function.</p>
            <div class="procedure"><h3 class="title" id="mw_7536cce6-b099-460a-8660-36b4f0406618">Fortran subroutine <code class="literal">timestwo</code></h3><p>The following code defines the <code class="literal">timestwo</code> subroutine,
                              which multiplies an <code class="literal">n</code>-dimensional array,
                                    <code class="literal">x_input</code>, by <code class="literal">2</code>, and returns
                              the results in array, <code class="literal">y_output</code>.</p><div class="code_responsive"><pre class="programlisting">      subroutine timestwo(y_output, x_input)
      real*8 x_input, y_output

      y_output = 2.0 * x_input
      return
      end</pre></div><h3 class="title" id="d126e45914">Create Source File</h3><p>Open MATLAB Editor, create a file, and document the MEX file with
                              the following information.</p><div class="code_responsive"><pre class="programlisting">C======================================================================
C     timestwo.f
C     Computational function that takes a scalar and doubles it.
C     This is a MEX file for MATLAB.
C======================================================================
</pre></div><p>Add the Fortran header file, <code class="literal">fintrf.h</code>, containing
                              the MATLAB API function declarations.</p><div class="code_responsive"><pre class="programlisting">#include "fintrf.h"
</pre></div><p>Save the file on your MATLAB path, for example, in <code class="literal">c:\work</code>, and
                              name it <code class="literal">timestwo.F</code>. The name of your MEX file is
                                    <code class="literal">timestwo</code>.</p><h3 class="title" id="d126e45943">Create Gateway Routine</h3><p>MATLAB uses the gateway routine,
                                    <code class="function">mexfunction</code>, as the entry point to a
                              Fortran subroutine. Add the following <code class="function">mexFunction</code>
                              code.</p><div class="code_responsive"><pre class="programlisting">C     Gateway routine
      subroutine mexFunction(nlhs, plhs, nrhs, prhs)

C     Declarations

C     Statements

      return
      end
</pre></div><p>Add the following statement to your <code class="function">mexfunction</code>
                              subroutine to force you to declare all variables.</p><div class="code_responsive"><pre class="programlisting">implicit none</pre></div><p>Explicit type declaration is necessary for 64-bit arrays.</p><h3 class="title" id="d126e45961">Declare <code class="function">mexfunction</code> Arguments</h3><p>To declare <code class="literal">mxArray</code> variables, use the MATLAB type, <code class="function">mwPointer</code>. Add this code
                              after the <code class="literal">Declarations</code> statement.</p><div class="code_responsive"><pre class="programlisting">C     mexFunction arguments:
      mwPointer plhs(*), prhs(*)
      integer nlhs, nrhs
</pre></div><h3 class="title" id="d126e45978">Declare Functions and Local Variables</h3><div class="itemizedlist"><ul><li><p>Declare the symbolic names and types of MATLAB API functions used in this MEX file.</p><div class="code_responsive"><pre class="programlisting">C     Function declarations:
      mwPointer mxGetDoubles
      mwPointer mxCreateDoubleMatrix
      integer mxIsNumeric
      mwPointer mxGetM, mxGetN</pre></div><p>To determine the type of a function, refer to the
                                                MATLAB API function reference documentation. For
                                          example, see the documentation for
                                                <code class="function">mxGetDoubles</code>.</p></li><li><p>Declare local variables for the
                                                <code class="function">mexfunction</code> arguments.</p><div class="code_responsive"><pre class="programlisting">C     Pointers to input/output mxArrays:
      mwPointer x_ptr, y_ptr
</pre></div></li><li><p>Declare matrix variables.</p><div class="code_responsive"><pre class="programlisting">C     Array information:
      mwPointer mrows, ncols
      mwSize size
</pre></div></li></ul></div><h3 class="title" id="d126e46004">Verify MEX File Input and Output Arguments</h3><p>Verify the number of MEX file input and output arguments using the
                                    <code class="literal">nrhs</code> and <code class="literal">nlhs</code> arguments.
                              Add these statements to the <code class="function">mexfunction</code> code
                              block.</p><div class="code_responsive"><pre class="programlisting">C     Check for proper number of arguments. 
      if(nrhs .ne. 1) then
         call mexErrMsgIdAndTxt ('MATLAB:timestwo:nInput',
     +                           'One input required.')
      elseif(nlhs .gt. 1) then
         call mexErrMsgIdAndTxt ('MATLAB:timestwo:nOutput',
     +                           'Too many output arguments.')
      endif
</pre></div><p>Verify the input argument type using the <code class="literal">prhs</code>
                              argument.</p><div class="code_responsive"><pre class="programlisting">C     Check that the input is a number.
      if(mxIsNumeric(prhs(1)) .eq. 0) then
         call mexErrMsgIdAndTxt ('MATLAB:timestwo:NonNumeric',
     +                           'Input must be a number.')
      endif
</pre></div><h3 class="title" id="d126e46021">Create Computational Routine</h3><p>Add the <code class="literal">timestwo</code> code. This subroutine is your
                              computational routine, the source code that performs the functionality
                              you want to use in MATLAB.</p><div class="code_responsive"><pre class="programlisting">C     Computational routine

      subroutine timestwo(y_output, x_input)
      real*8 x_input, y_output

      y_output = 2.0 * x_input
      return
      end
</pre></div><p>A computational routine is optional. Alternatively, you can place the
                              code within the <code class="function">mexfunction</code> function
                              block.</p><h3 class="title" id="d126e46036">Declare Variables for Computational Routine</h3><p>Put the following variable declarations in
                                    <code class="function">mexFunction</code>.</p><div class="code_responsive"><pre class="programlisting">C     Arguments for computational routine:
      real*8  x_input, y_output</pre></div><h3 class="title" id="d126e46043">Read Input Array</h3><p>To point to the input matrix data, use the
                                    <code class="literal">mxGetDoubles</code> function.</p><div class="code_responsive"><pre class="programlisting">x_ptr = mxGetDoubles(prhs(1))</pre></div><p>To create a Fortran array, <code class="literal">x_input</code>, use the
                                    <code class="literal">mxCopyPtrToReal8</code> function.</p><div class="code_responsive"><pre class="programlisting">C     Get the size of the input array.
      mrows = mxGetM(prhs(1))
      ncols = mxGetN(prhs(1))
      size = mrows*ncols

C     Create Fortran array from the input argument.
      call mxCopyPtrToReal8(x_ptr,x_input,size)
</pre></div><h3 class="title" id="d126e46058">Prepare Output Data</h3><p>To create the output argument, <code class="literal">plhs(1)</code>, use the
                                    <code class="literal">mxCreateDoubleMatrix</code> function.</p><div class="code_responsive"><pre class="programlisting">C     Create matrix for the return argument.
      plhs(1) = mxCreateDoubleMatrix(mrows,ncols,0)
</pre></div><p>Use the <code class="literal">mxGetDoubles</code> function to assign the
                                    <code class="literal">y_ptr</code> argument to
                              <code class="literal">plhs(1)</code>.</p><div class="code_responsive"><pre class="programlisting">      y_ptr = mxGetDoubles(plhs(1))</pre></div><h3 class="title" id="d126e46077">Perform Calculation</h3><p>Pass the arguments to <code class="literal">timestwo</code>.</p><div class="code_responsive"><pre class="programlisting">C     Call the computational subroutine.
      call timestwo(y_output, x_input)
</pre></div><h3 class="title" id="d126e46084">Copy Results to Output Argument</h3><div class="code_responsive"><pre class="programlisting">C     Load the data into y_ptr, which is the output to MATLAB.
      call mxCopyReal8ToPtr(y_output,y_ptr,size)     
</pre></div><h3 class="title" id="mw_96bc7b33-4b5f-4919-aa9f-4e9b16abdc41">View Complete Source File</h3><p>Compare your source file with <code class="literal">timestwo.F</code>, located
                              in the
                                    <code class="literal"><em class="replaceable"><code>matlabroot</code></em>/extern/examples/refbook</code>
                              folder. <a href="matlab:edit([matlabroot '/extern/examples/refbook/timestwo.F']);" target="_blank">Open the file</a> in the editor.</p><h3 class="title" id="d126e46100">Build Binary MEX File</h3><p>At the MATLAB command prompt, build the binary MEX file.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>mex <span style="color:#A020F0">-R2018a</span> <span style="color:#A020F0">timestwo.F</span></pre></div></div></div><h3 class="title" id="d126e46109">Test the MEX File</h3><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>x = 99;
y = timestwo(x)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>y =
   198
</pre></div></div></div></div>
                  <h2 id="d126e46117">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mexfunction.html"><span itemprop="name"><code class="function">mexfunction</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mwpointer.html"><span itemprop="name"><code class="function">mwPointer</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mwsize.html"><span itemprop="name"><code class="function">mwSize</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mxisnumeric.html"><span itemprop="name"><code class="function">mxIsNumeric</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mxgetm.html"><span itemprop="name"><code class="function">mxGetM</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mxgetn.html"><span itemprop="name"><code class="function">mxGetN</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mxcreatedoublematrix_fortran.html"><span itemprop="name"><code class="function">mxCreateDoubleMatrix</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/mxgetdoubles_fortran.html"><span itemprop="name"><code class="function">mxGetDoubles</code></span></a></span></p>
                  <h3 id="d126e46145">Topics</h3><ul class="list-unstyled"><li><a href="matlab:edit([matlabroot '/extern/examples/refbook/timestwo.F']);" target="_blank"><code class="literal">timestwo.F</code></a></li></ul>
            </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
