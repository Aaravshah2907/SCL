<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>MATLAB Objects in MEX Functions</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../external-language-interfaces.html",
          "name": "External Language Interfaces"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../cpp-language.html",
          "name": "C++ with MATLAB"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../call-mex-file-functions.html",
          "name": "Call C/C++ MEX Functions from MATLAB"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../cpp-mex-file-applications.html",
          "name": "Write C++ Functions Callable from MATLAB (MEX Files)"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "cpp-mex-file-applications"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Pass MATLAB objects to MEX functions."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../external-language-interfaces.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">External Language Interfaces</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../cpp-language.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">C++ with MATLAB</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../call-mex-file-functions.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Call C/C++ MEX Functions from MATLAB</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../cpp-mex-file-applications.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_ed02b205-3d2c-48d0-ba64-c5b069ff713a"><span itemprop="title">Write C++ Functions Callable from MATLAB  (MEX Files)</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">MATLAB Objects in MEX Functions</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_c485a279-2f70-4394-882f-d38a6770ed86" class="nav-link intrnllnk">Get Property Value</a></li><li class="nav-item"><a href="#mw_4ba13573-6685-4dfc-8bbf-13b7ea30f705" class="nav-link intrnllnk">Get Property Value from Object Array</a></li><li class="nav-item"><a href="#mw_7185566f-fc39-4ebc-a5cc-6eeb77031c5f" class="nav-link intrnllnk">Set Property Value</a></li><li class="nav-item"><a href="#mw_16214974-6b58-4fd6-a010-53b7395fb9f7" class="nav-link intrnllnk">Set Property Value in Object Array</a></li><li class="nav-item"><a href="#mw_98a2f33a-48cc-487b-8731-cb49607eca2e" class="nav-link intrnllnk">Object Property Copy-On-Write Behavior</a></li><li class="nav-item"><a href="#mw_c88256bb-8f84-4cc1-8c09-13ea38ef7293" class="nav-link intrnllnk">Modify Property and Return Object</a></li><li class="nav-item"><a href="#mw_cf88500f-0cb5-4b4e-9af8-0f1d2170593c" class="nav-link intrnllnk">Only Modified Property Causes Copy</a></li><li class="nav-item"><a href="#mw_5979b291-0cda-438b-9355-8fd151ad2b1d" class="nav-link intrnllnk">Handle Objects</a></li><li class="nav-item"><a href="#d126e43699" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=cpp-mex-file-applications&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="mw_5ef8a180-9188-430f-985f-b5604a723cf9"><span class="trademark entity">MATLAB</span> Objects in MEX Functions</h2><p>MEX functions can access MATLAB<sup>&#x00AE;</sup> object properties using the <a href="../apiref/matlab.engine.matlabengine_cpp.html#mw_06f880cd-3aef-4921-98d6-9c02972eaec9" class="a">setProperty</a> and <a href="../apiref/matlab.engine.matlabengine_cpp.html#bvkfuut-18" class="a">getProperty</a> member functions. Objects passed to MEX
            functions behave like objects passed to any MATLAB function:</p><div class="itemizedlist"><ul><li><p>Handle objects - Changes made to handle objects in MEX functions affect the
                    object in the caller's workspace.</p></li><li><p>Value objects - Changes made to value objects in MEX functions affect only the
                    independent copy of the object in the workspace of the MEX function.</p></li></ul></div><p>Therefore, value objects modified in MEX functions must be returned to the caller,
            whereas handle objects do not need to be returned. For more information on object
            behavior, see <a href="../matlab_oop/matlab-vs-other-oo-languages.html#bslvcv1" class="a">Object Modification</a>.</p><section><h3 class="title" id="mw_c485a279-2f70-4394-882f-d38a6770ed86">Get Property Value</h3><p>To get a property value, make a shared copy of the object as a
                    <code class="literal">matlab::data::Array</code>. For example, assuming the object is the
                first input argument, assign it to a variable:</p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">matlab::data::Array object(inputs[0]);</code></pre></div><p>Create a MATLAB data array of the correct type for the property value. For example,
                assuming a property called <code class="literal">Name</code> contains a MATLAB character vector, define the new value as a <a href="../apiref/matlab.data.chararray.html"><code class="cpp">matlab::data::CharArray</code></a>. Use the <a href="../apiref/matlab.data.arrayfactory.html"><code class="cpp">matlab::data::ArrayFactory</code></a> to create
                the array. </p><div class="code_responsive"><pre class="programlisting">matlab::data::CharArray propName = matlabPtr-&gt;getProperty(object, u"Name");</pre></div></section><section><h3 class="title" id="mw_4ba13573-6685-4dfc-8bbf-13b7ea30f705">Get Property Value from Object Array</h3><p>If the input to the MEX function is an object array, call
                    <code class="literal">getProperty</code> with index of the object in the array whose
                property value you want to get. For example, this code snippet returns the value of
                the <code class="literal">Name</code> property for the fourth element in the object array,
                    <code class="literal">objectArray</code>. </p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">matlab::data::Array objectArray(inputs[0]);
matlab::data::CharArray propName = matlabPtr-&gt;getProperty(objectArray, 3, u"Name");</code></pre></div></section><section><h3 class="title" id="mw_7185566f-fc39-4ebc-a5cc-6eeb77031c5f">Set Property Value</h3><p>To set a property value, make a shared copy of the object as a
                    <code class="literal">matlab::data::Array</code>. For example, assuming the object is the
                first input argument, assign it to a variable.</p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">matlab::data::Array object(inputs[0]);</code></pre></div><p>Create a MATLAB data array of the correct type for the property value. For example,
                assuming a property called <code class="literal">Name</code> contains a MATLAB character vector, define the new value as a <a href="../apiref/matlab.data.chararray.html"><code class="cpp">matlab::data::CharArray</code></a>. Use the <a href="../apiref/matlab.data.arrayfactory.html"><code class="cpp">matlab::data::ArrayFactory</code></a> to create
                the array. </p><p>Call the MATLAB engine <code class="literal">setProperty</code> function with the
                    <code class="literal">matlabPtr</code> shared pointer.</p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">matlabPtr-&gt;setProperty(object, u"Name",
    factory.createCharArray("New value for Name"));</code></pre></div></section><section><h3 class="title" id="mw_16214974-6b58-4fd6-a010-53b7395fb9f7">Set Property Value in Object Array</h3><p>If the input to the MEX function is an object array, call
                    <code class="literal">setProperty</code> with index of the object in the array whose
                property value you want to set. For example, this code snippet sets the value of the
                    <code class="literal">Name</code> property for the fourth element in the object array,
                    <code class="literal">objectArray</code>. </p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">matlab::data::Array objectArray(inputs[0]);
matlabPtr-&gt;setProperty(objectArray, 3, u"Name",   
    factory.createCharArray("New value for Name"));</code></pre></div></section><section><h3 class="title" id="mw_98a2f33a-48cc-487b-8731-cb49607eca2e">Object Property Copy-On-Write Behavior</h3><p>When a MEX function modifies an object property by assigning a value to the
                property, the property value is no longer shared with the object in the caller's
                workspace. The data in properties that are not modified remain shared. That is,
                copy-on-write behavior affects the modified property, not the entire object.</p></section><section><h3 class="title" id="mw_c88256bb-8f84-4cc1-8c09-13ea38ef7293">Modify Property and Return Object</h3><p>This example uses the <code class="literal">EmployeeID</code> class to create an object.
                This class defines two properties. The <code class="literal">Name</code> property is defined
                as a 1-by-any number of elements array of type <code class="literal">char</code>. The
                    <code class="literal">Picture</code> property is defined as a 1000-by-800 element array of
                type <code class="literal">uint8</code> for the employee image.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> EmployeeID
   <span style="color:#0000FF">properties</span>
      Name <span style="color:#A0522D">(1,:) char</span>
      Picture <span style="color:#A0522D">(1000,800) uint8</span>
   <span style="color:#0000FF">end</span>
   <span style="color:#0000FF">methods</span>
      <span style="color:#0000FF">function</span> obj = EmployeeID(n,p)
         <span style="color:#0000FF">if</span> nargin &gt; 0
            obj.Name = n;
            obj.Picture = p;
         <span style="color:#0000FF">end</span>
      <span style="color:#0000FF">end</span>
   <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>The following MEX function modifies the image contained in an object of the
                    <code class="literal">EmployeeID</code> class to reduce the intensity of the brightest
                values in the image. The MEX function performs these steps:</p><div class="itemizedlist"><ul><li><p>Moves the input argument to a <a href="../apiref/matlab.data.array.html"><code class="cpp">matlab::data::Array</code></a> using
                            <code class="literal">std::move</code>.</p></li><li><p>Uses <a href="../apiref/matlab.engine.matlabengine_cpp.html#bvkfuut-18" class="a">getProperty</a> to get the value of the property
                        to modify.</p></li><li><p>Defines the variable as a type appropriate for the property value. Use
                            <a href="../apiref/matlab.data.typedarray.html"><code class="cpp">matlab::data::TypedArray&lt;uint8_t&gt;</code></a> because the MATLAB type is <code class="literal">uint8</code>.</p></li><li><p>Reassign the modified array to the object property using <a href="../apiref/matlab.engine.matlabengine_cpp.html#mw_06f880cd-3aef-4921-98d6-9c02972eaec9" class="a">setProperty</a>.</p></li><li><p>Returns the modified object as the MEX function output.</p></li></ul></div><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">#include "mex.hpp"
#include "mexAdapter.hpp"

using matlab::mex::ArgumentList;
using namespace matlab::data;

class MexFunction : public matlab::mex::Function {
    std::shared_ptr&lt;matlab::engine::MATLABEngine&gt; matlabPtr = getEngine();
public:
    void operator()(ArgumentList outputs, ArgumentList inputs) {

        // Move object to variable
        Array obj = std::move(inputs[0]);

        // Get property value and modify
        TypedArray&lt;uint8_t&gt; imageData = matlabPtr-&gt;getProperty(obj, u"Picture");
        for (auto&amp; elem : imageData) {
            if (elem &gt; 240) {
                elem = elem - elem/100;
            }
        }

        // Set property value and assign to output
        matlabPtr-&gt;setProperty(obj, u"Picture", imageData);
        outputs[0] = obj;
    }
};</code></pre></div><p>After saving this code in a file (called <code class="literal">reduceGlare.cpp</code> in
                this example), compile it with the <a href="../ref/mex.html"><code class="function">mex</code></a> function. Call this MEX
                function from MATLAB with an <code class="literal">EmployeeID</code> object as input. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>EmployeeObject = EmployeeID(<span style="color:#A020F0">'My Name'</span>,randi([1 255],1000,800,<span style="color:#A020F0">'uint8'</span>));
EmployeeObject = reduceGlare(EmployeeObject);</pre></div></div></div></section><section><h3 class="title" id="mw_cf88500f-0cb5-4b4e-9af8-0f1d2170593c">Only Modified Property Causes Copy</h3><p>This example creates a MEX function that accepts a <code class="literal">EmployeeID</code>
                object and a new value for its <code class="literal">Name</code> property as its inputs. After
                setting the property to the new value, the function returns the modified object.
                This MEX function performs some additional steps that can be useful in your
                program.</p><div class="itemizedlist"><ul><li><p>Argument checking confirms the correct number of inputs and calls the
                            MATLAB
                        <a href="../ref/isa.html"><code class="function">isa</code></a> to determine the
                        class of the input object.</p></li><li><p>Support for either <code class="literal">char</code> or <code class="literal">string</code>
                        input for value to set <code class="literal">Name</code> property. </p></li><li><p>Comparison of current property value to determine if the update needs to
                        be made.</p></li></ul></div><p>To see the source code, click <a href="matlab:edit([matlabroot '/extern/examples/cpp_mex/modifyObjectProperty.cpp']);" target="_blank"><code class="literal">modifyObjectProperty.cpp</code></a> and <a href="matlab:edit([matlabroot '/extern/examples/cpp_mex/EmployeeID.m']);" target="_blank"><code class="literal">EmployeeID.m</code></a> to open the files in the MATLAB Editor. Use the <a href="../ref/mex.html"><code class="function">mex</code></a> command to build the MEX
                function.</p><p>To run this example, add the <code class="literal">modifyObjectProperty.cpp</code> file and
                the <code class="literal">EmployeeID.m</code> class to a folder on your MATLAB path. After performing the <code class="literal">mex</code> setup, execute these
                statements:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>mex <span style="color:#A020F0">modifyObjectProperty.cpp</span>
EmployeeObject = EmployeeID(<span style="color:#A020F0">'My Name'</span>,randi([1 255],1000,800,<span style="color:#A020F0">'uint8'</span>));
EmployeeObject = modifyObjectProperty(EmployeeObject,<span style="color:#A020F0">'New Name'</span>);</pre></div></div></div><p>Here is the <code class="literal">MexFunction::operator()</code> implementation. </p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">include "mex.hpp"
#include "mexAdapter.hpp"

using matlab::mex::ArgumentList;
using namespace matlab::data;

class MexFunction : public matlab::mex::Function {
public:
    void operator()(ArgumentList outputs, ArgumentList inputs) {
        // Check for correct inputs
        checkArguments(outputs, inputs);

        // Assign the input object to a matlab::data::Array
        Array object(inputs[0]);

        // Member function to set properyt value
        assignProperty(object, inputs);

        // Return modified object
        outputs[0] = object;
    }</code></pre></div><p>The <code class="literal">MexFunction::checkArguments</code> function performs these
                checks:</p><div class="itemizedlist"><ul><li><p>The MEX function must be called with two arguments.</p></li><li><p>The first argument must be an object of the <code class="literal">EmployeeID</code>
                        class.</p></li></ul></div><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">    void checkArguments(ArgumentList out, ArgumentList in) {
        std::shared_ptr&lt;matlab::engine::MATLABEngine&gt; matlabPtr = getEngine();
        ArrayFactory factory;

        // Check number of inputs
        if (in.size() != 2) {
            matlabPtr-&gt;feval(u"error", 0,
                std::vector&lt;Array&gt;({ factory.createScalar("Two inputs required") }));
        }
        // Use isa function to test for correct class
        std::vector&lt;Array&gt; args{ in[0], factory.createCharArray("EmployeeID") };
        TypedArray&lt;bool&gt; result = matlabPtr-&gt;feval(u"isa", args);
        if (result[0] != true) {
            matlabPtr-&gt;feval(u"error", 0, 
               std::vector&lt;Array&gt;({ factory.createScalar("Input must be EmployeeID object") }));
        }     
    }</code></pre></div><p>The <code class="literal">MexFunction::assignProperty</code> function determines if the new
                value for the property is passed in as a MATLAB
                <a href="../ref/char.html"><code class="object">char</code></a> vector or as a <a href="../ref/string.html"><code class="object">string</code></a> and assigns the input defined as a
                    <code class="literal">matlab::data::CharArray</code> or a
                    <code class="literal">matlab::data::StringArray</code> respectively.</p><p>Before assigning the new value to the <code class="literal">Name</code> property, this
                function compares the current value to determine if it is different and avoids
                making an assignment if it is not.</p><div class="code_responsive"><pre class="programlisting"><code class="language-cpp">    void assignProperty(Array&amp; obj, ArgumentList in) {
        std::shared_ptr&lt;matlab::engine::MATLABEngine&gt; matlabPtr = getEngine();
        ArrayFactory factory;
        std::string newPropertyValue;

        // Determine if input is MATLAB char or MATLAB string
        if (in[1].getType() == ArrayType::CHAR) {
            CharArray newName(in[1]);
            newPropertyValue = newName.toAscii();
        }
        else if (in[1].getType() == ArrayType::MATLAB_STRING) {
            StringArray newName(in[1]);
            newPropertyValue = (std::string)newName[0];
        }
        else {
            matlabPtr-&gt;feval(u"error", 0,
                std::vector&lt;Array&gt;({ factory.createScalar("Name must be char or string") }));
        }

        // If new value is different from new value, set new value
        CharArray currentName = matlabPtr-&gt;getProperty(obj, u"Name");
        if (currentName.toAscii() != newPropertyValue) {
            matlabPtr-&gt;setProperty(obj, u"Name", factory.createCharArray(newPropertyValue));
        }
    }</code></pre></div></section><section><h3 class="title" id="mw_5979b291-0cda-438b-9355-8fd151ad2b1d">Handle Objects</h3><p>For an example that uses a handle object, download the following file and follow
                the instructions in the file to build and run the MEX function.</p><p>
                <a href="matlab:edit([matlabroot '/extern/examples/cpp_mex/mexgetproperty.cpp']);" target="_blank"><code class="literal">mexgetproperty.cpp</code></a>
            </p></section>
            <h2 id="d126e43699">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/matlab.engine.matlabengine_cpp.html#mw_06f880cd-3aef-4921-98d6-9c02972eaec9"><span itemprop="name">setProperty</span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../apiref/matlab.engine.matlabengine_cpp.html#bvkfuut-18"><span itemprop="name">getProperty</span></a></span></p>
            <h3 id="d126e43706">Topics</h3><ul class="list-unstyled"><li><a href="data-types-for-passing-mex-function-data-1.html" class="a">Data Types for Passing MEX Function Data</a></li><li><a href="cpp-mex-api.html" class="a">C++ MEX API</a></li><li><a href="../cpp-mex-file-applications.html" class="a">Write C++ Functions Callable from MATLAB (MEX Files)</a></li></ul>
            
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
