<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Transitioning Serialization and Deserialization Processes to matlab.mixin.CustomElementSerialization</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../programming-and-data-types.html",
          "name": "Programming"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../object-oriented-programming.html",
          "name": "Classes"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../matlab-class-customization.html",
          "name": "Class Customization"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../save-and-load.html",
          "name": "Object Save and Load"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "save-and-load"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Consider transitioning to matlab.mixin.CustomElementSerialization from older loadobj and saveobj implementations."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../programming-and-data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Programming</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../object-oriented-programming.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Classes</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../matlab-class-customization.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Class Customization</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../save-and-load.html?s_tid=CRUX_lftnav" itemprop="url" id="buwihbe-1"><span itemprop="title">Object Save and Load</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Transitioning Serialization and Deserialization Processes to
            matlab.mixin.CustomElementSerialization</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_fd19e942-2918-475c-93f5-17ba258ea6b0" class="nav-link intrnllnk">Preserve Version Compatibility Between loadobj and saveobj Implementations and matlab.mixin.CustomElementSerialization</a></li><li class="nav-item"><a href="#mw_215ebcc6-8499-4cd6-81af-e8029e1ffd21" class="nav-link intrnllnk">Private Properties with the Same Name in Class Hierarchies</a></li><li class="nav-item"><a href="#mw_ded2bef2-f8ea-4037-ad2d-f544f8c2353d" class="nav-link intrnllnk">Maintaining Existing loadobj and saveobj Implementations</a></li><li class="nav-item"><a href="#d126e26928" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=save-and-load&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=save-and-load&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=save-and-load&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=save-and-load&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=save-and-load&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=save-and-load&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="mw_cf3c381e-9b50-4fc1-8334-c75314daa4ce">Transitioning Serialization and Deserialization Processes to
            <code class="literal">matlab.mixin.CustomElementSerialization</code></h2><p><span>The recommended process for customizing serialization and
            deserialization of objects is to use the <a href="../ref/matlab.mixin.customelementserialization-class.html"><code class="class">matlab.mixin.CustomElementSerialization</code></a> mixin<em> (since R2024b)</em></span>. Transitioning to the
         mixin from an existing implementation of <code class="method">loadobj</code> and
            <code class="method">saveobj</code> can give you greater control of the serialization process in
         future revisions of the class. However, some existing implementations might make
            <code class="method">loadobj</code> and <code class="method">saveobj</code> the better option.</p><section><h3 class="title" id="mw_fd19e942-2918-475c-93f5-17ba258ea6b0">Preserve Version Compatibility Between <code class="method">loadobj</code> and                <code class="method">saveobj</code> Implementations and
               <code class="class">matlab.mixin.CustomElementSerialization</code></h3><p>The first version of the <code class="class">Rectangle</code> class represents a rectangle using
            the coordinates of the lower-left and upper-right vertices. The <code class="method">saveobj</code>
            and <code class="method">loadobj</code> methods only handle the property data using structures.
            This implementation enables flexibility for any future class versions that use different
            properties to define the
            rectangle.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Rectangle  <span style="color:#228B22">% Version 1</span>
    <span style="color:#0000FF">properties</span>
        x1
        y1
        x2
        y2
    <span style="color:#0000FF">end</span>  
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Rectangle(x1,y1,x2,y2)
            obj.x1 = x1;
            obj.y1 = y1;
            obj.x2 = x2;
            obj.y2 = y2;
        <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">function</span> s = saveobj(obj)
            s.x1 = obj.x1;
            s.y1 = obj.y1;
            s.x2 = obj.x2;
            s.y2 = obj.y2;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> obj = loadobj(s)
            obj = Rectangle(s.x1,s.y1,s.x2,s.y2);
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div></p><p>Version 2 of the class represents the rectangle using the coordinates of the
            lower-left vertex, the height, and the width. The revision maintains compatibility by
            implementing <code class="method">saveobj</code> and <code class="method">loadobj</code> methods to ensure
            that Version 2 of the class can load instances saved under Version 1, and Version 1 of
            the class can load instances saved under Version 2. The constructor accepts the same
            property values of Version 1, namely the coordinates of the lower-left and upper-right
            coordinates. The <code class="method">loadobj</code> method calls the <code class="class">Rectangle</code>
            constructor with those values. To preserve compatibility with Version 1, the
               <code class="method">saveobj</code> method converts the new properties back to the old
            properties and saves them as a structure.
            <div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Rectangle  <span style="color:#228B22">% Version 2</span>
    <span style="color:#0000FF">properties</span>
        x0
        y0
        width
        height
    <span style="color:#0000FF">end</span>  
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Rectangle(x1,y1,x2,y2)
            obj.x0 = x1;
            obj.y0 = y1;
            obj.width = x2 - x1;
            obj.height = y2 - y1;
        <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">function</span> s = saveobj(obj)
            s.x1 = obj.x0;
            s.y1 = obj.y0;
            s.x2 = obj.x0 + obj.width;
            s.y2 = obj.y0 + obj.height;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
     
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> obj = loadobj(s)
             obj = Rectangle(s.x1,s.y1,s.x2,s.y2);
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span> 
<span style="color:#0000FF">end</span></pre></div></div></div></p><p>Version 2a of the <code class="class">Rectangle</code> class is a subclass of
               <code class="class">matlab.mixin.CustomElementSerialization</code>, but its behavior is
            consistent with Version 2. The <code class="method">modifyOutgoingSerializationContent</code>
            method stores the data in properties consistent with Version 1 of the class. With this
            method in place:</p>
<div class="itemizedlist"><ul><li><p>Both Version 1 and Version 2 of the class can load instances saved under
                     Version 2a because the property values are stored in the original format of
                     Version 1.</p></li><li><p><code class="method">modifyOutgoingSerializationContent</code> saves the rectangle
                     information as <code class="property">x0</code>, <code class="property">y0</code>,
                        <code class="property">width</code>, and <code class="property">height</code> by default, but
                     it also saves the coordinates <code class="literal">x1</code>, <code class="literal">x2</code>,
                        <code class="literal">y1</code>, and <code class="literal">y2</code>. Because Version 2a
                     includes the properties and values in the same format as Versions 1 and 2,
                     Version 2a can load an instance of any version. </p></li></ul></div><p>
<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Rectangle &lt; matlab.mixin.CustomElementSerialization  <span style="color:#228B22">% Version 2a</span>
    <span style="color:#0000FF">properties</span>
        x0
        y0
        width
        height
    <span style="color:#0000FF">end</span>  
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Rectangle(x1,y1,x2,y2)
            obj.x0 = x1;
            obj.y0 = y1;
            obj.width = x2 - x1;
            obj.height = y2 - y1;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> modifyOutgoingSerializationContent(sObj,obj)
            sObj.addNameValue(<span style="color:#A020F0">"x1"</span>,obj.x0);
            sObj.addNameValue(<span style="color:#A020F0">"x2"</span>,obj.x0 + obj.width);
            sObj.addNameValue(<span style="color:#A020F0">"y1"</span>,obj.y0);
            sObj.addNameValue(<span style="color:#A020F0">"y2"</span>,obj.y0 + obj.height);
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div></p><p>With this new version, you can now take advantage of all of the capabilities of
               <code class="class">matlab.mixin.CustomElementSerialization</code>. To check the compatibility,
            create an instance of <code class="class">Rectangle</code> under Version
            2a.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>test = Rectangle(1,1,4,6)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>test = 

  Rectangle with properties:

        x0: 1
        y0: 1
     width: 3
    height: 5</pre></div></div></div></p><p>Save the instance. <code class="method">modifyOutgoingSerializationContent</code> uses the
               <code class="property">width</code> and <code class="property">height</code> properties to define the
            second
            vertex.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>save("<em class="replaceable">yourfilepath</em>/RectV2a.mat","test")</pre></div></div></div></p><p>Clear the instance, and then load it under Version
            1.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>clear test
load("<em class="replaceable">yourfilepath</em>/RectV2a.mat","test")
test</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>test = 

  Rectangle with properties:

    x1: 1
    y1: 1
    x2: 4
    y2: 6</pre></div></div></div></p></section><section><h3 class="title" id="mw_215ebcc6-8499-4cd6-81af-e8029e1ffd21">Private Properties with the Same Name in Class Hierarchies</h3><p>Classes in a hierarchy that define private properties with the same name require
            special handling when serializing and deserializing with <code class="method">loadobj</code> and
               <code class="method">saveobj</code>. The <code class="class">Animal</code> class and its subclass
               <code class="class">Pet</code> both define a private property named <code class="property">ID</code>. To
            handle both properties: </p>
<div class="itemizedlist"><ul><li><p>The <code class="method">saveobj</code> method of <code class="class">Animal</code> saves its
                        <code class="property">ID</code> property in the outgoing structure under the name of
                        <code class="literal">AnimalID</code> to avoid conflicting with the
                        <code class="property">ID</code> property of <code class="class">Pet</code>.</p></li><li><p>The <code class="method">loadobj</code> methods of both classes pass the value of
                        <code class="literal">AnimalID</code> to the constructor to recreate the
                        <code class="property">ID</code> property of <code class="class">Animal</code>.</p></li></ul></div><p>
<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Animal
    <span style="color:#0000FF">properties</span>
        Species
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">properties</span>(Access = private)
        ID
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Animal(Species,ID)
            obj.Species = Species;
            obj.ID = ID;
        <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">function</span> s = saveobj(obj)
            s.Species = obj.Species;
            s.AnimalID = obj.ID;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">methods</span> (Static)
        <span style="color:#0000FF">function</span> obj = loadobj(s)
            <span style="color:#0000FF">if</span> isstruct(s)
                obj = Animal(s.Species,s.AnimalID);
            <span style="color:#0000FF">else</span>
                obj = s;
            <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Pet &lt; Animal
    <span style="color:#0000FF">properties</span>
        OwnerName
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">properties</span>(Access = private)
        ID
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Pet(Species,AnimalID,OwnerName,ID)
            obj@Animal(Species,AnimalID);
            obj.OwnerName = OwnerName;
            obj.ID = ID;
        <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">function</span> s = saveobj(obj)
            s = saveobj@Animal(obj);
            s.OwnerName = obj.OwnerName;
            s.ID = obj.ID;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
     
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> obj = loadobj(s)
            <span style="color:#0000FF">if</span> isstruct(s)
                obj = Pet(s.Species,s.AnimalID,s.OwnerName,s.ID);
            <span style="color:#0000FF">else</span>
                obj = s;
            <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div></p><p>The <code class="class">matlab.mixin.CustomElementSerialization</code> mixin enables you to
            reference private properties with the same name by preceding the property name with the
            name of the defining class and a dot. You can use this convention to transition classes
            with private property overlap to use the mixin instead of <code class="method">saveobj</code> and
               <code class="method">loadobj</code>.</p><p>For example, the following revised <code class="class">Animal</code> class inherits from the
            mixin and implements a <code class="method">modifyIncomingSerializationContent</code> method. The
               <code class="method">saveobj</code> method of the original <code class="class">Animal</code> stores its
               <code class="property">ID</code> property as <code class="property">AnimalID</code>. The
               <code class="method">modifyIncomingSerializationContent</code> method checks for an
               <code class="property">AnimalID</code> field in the incoming content. If
               <code class="property">AnimalID</code> is part of the serialized content, the
               <code class="method">modifyIncomingSerializationContent</code> method renames the property to
               <code class="literal">Animal.ID</code>. The <code class="method">rename</code> method uses the
               <em class="replaceable"><code>className.propertyName</code></em> syntax that is required for private
            properties. (For more information, see the description for <code class="method">rename</code> in
               <a href="../ref/matlab.serialization.elementserializationcontent-class.html"><code class="class">matlab.serialization.ElementSerializationContent</code></a>.)<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Animal &lt; matlab.mixin.CustomElementSerialization
    <span style="color:#0000FF">properties</span>
        Species
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">properties</span> (Access = private)
        ID
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Animal(Species,ID)
            obj.Species = Species;
            obj.ID = ID;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
 
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> modifyIncomingSerializationContent(sObj)
            <span style="color:#0000FF">if</span> sObj.hasNameValue(<span style="color:#A020F0">"AnimalID"</span>)
                sObj.rename(<span style="color:#A020F0">"AnimalID"</span>,<span style="color:#A020F0">"Animal.ID"</span>);
            <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div>The revised <code class="class">Pet</code> class implements a
               <code class="method">modifyIncomingSerializationContent</code> method that calls the superclass
            method to process the superclass <code class="property">ID</code> property. To enable the older
            version of the class to deserialize objects saved under the new definition,
               <code class="class">Pet</code> implements <code class="method">modifyOutgoingSerializationContent</code> to
            save the superclass <code class="property">ID</code> property as <code class="property">AnimalID</code>.
            <div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> Pet &lt; Animal
    <span style="color:#0000FF">properties</span>
        OwnerName
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">properties</span>(Access = private)
        ID
    <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> obj = Pet(Species,AnimalID,OwnerName,ID)
            obj@Animal(Species,AnimalID);
            obj.OwnerName = OwnerName;
            obj.ID = ID;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
     
    <span style="color:#0000FF">methods</span>(Static)
        <span style="color:#0000FF">function</span> modifyOutgoingSerializationContent(sObj,~)
            sObj.addNameValue(<span style="color:#A020F0">"AnimalID"</span>,sObj.getValue(<span style="color:#A020F0">"Animal.ID"</span>));
            sObj.remove(<span style="color:#A020F0">"Animal.ID"</span>);
        <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">function</span> modifyIncomingSerializationContent(sObj)
            modifyIncomingSerializationContent@Animal(sObj)
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div>
         </p></section><section><h3 class="title" id="mw_ded2bef2-f8ea-4037-ad2d-f544f8c2353d">Maintaining Existing <code class="method">loadobj</code> and <code class="method">saveobj</code>             Implementations</h3><p>In some cases, existing designs using <code class="method">loadobj</code> and
               <code class="method">saveobj</code> cannot be easily transitioned to a
               <code class="class">matlab.mixin.CustomElementSerialization</code> design without significant
            revision of existing classes.  For example: </p>
<div class="itemizedlist"><ul><li><p>The <code class="method">loadobj</code> method of an existing class only accepts a
                     structure as input. Deserializing an object under the old definition might
                     cause warnings. To force <code class="method">loadobj</code> to deserialize the content as
                     a structure, you can use <code class="method">modifyOutgoingSerializationContent</code> to
                     add a property that is not part of the original class definition. The
                     disadvantage to this method is that the added property is now stored, even
                     though it has no meaning in either version of the class.</p></li><li><p>The <code class="method">loadobj</code> method can only deserialize data from a format
                     other than an object or a structure. For example, a class could use
                        <code class="method">saveobj</code> to save property values in a table, and the
                     corresponding <code class="method">loadobj</code> can only accept a table as input. The
                     methods of <code class="class">matlab.mixin.CustomElementSerialization</code> only support
                     object data, so data from the older version of the class would be inaccessible.
                     In this case, the only workaround is to revise how the existing class
                     definition serializes data.</p></li></ul></div><p>
</p><p>In cases like these, maintaining your existing <code class="method">loadobj</code> and
               <code class="method">saveoobj</code> implementations might be preferable to what would be
            required to transition to <code class="class">matlab.mixin.CustomElementSerialization</code>.</p></section>
         <h2 id="d126e26928">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.mixin.customelementserialization-class.html"><span itemprop="name"><code class="class">matlab.mixin.CustomElementSerialization</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.serialization.elementserializationcontent-class.html"><span itemprop="name"><code class="class">matlab.serialization.ElementSerializationContent</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.serialization.serializationcontext-class.html"><span itemprop="name"><code class="class">matlab.serialization.SerializationContext</code></span></a></span></p>
         <h3 id="d126e26940">Topics</h3><ul class="list-unstyled"><li><a href="../save-and-load.html" class="a">Object Save and Load</a></li><li><a href="../ref/matlab.mixin.customelementserialization-class.html#mw_4bb52685-c13a-454f-82d9-c35d878f461f" class="a">Maintain Backward and Forward Compatibility During Serialization</a></li></ul>
      </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
