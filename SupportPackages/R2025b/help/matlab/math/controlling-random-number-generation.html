<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Controlling Random Number Generation</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../mathematics.html",
          "name": "Mathematics"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../random-number-generation.html",
          "name": "Random Number Generation"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "random-number-generation"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Controlling Random Number Generation",
          "description": "Use the rng function, which provides control over random number generation.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.rngdemo",
          "name": "rngdemo",
          "url": "controlling-random-number-generation.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/rngdemo')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "rngdemo.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to use the rng function, which provides control over random number generation."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../includes/product/images/doc_center/DefaultImage.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../mathematics.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Mathematics</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../random-number-generation.html?s_tid=CRUX_lftnav" itemprop="url" id="btfmc36"><span itemprop="title">Random Number Generation</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Controlling Random Number Generation</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#rngdemo-1" class="nav-link intrnllnk">"Starting Over"</a></li><li class="nav-item"><a href="#rngdemo-2" class="nav-link intrnllnk">Non-Repeatability</a></li><li class="nav-item"><a href="#rngdemo-3" class="nav-link intrnllnk">More Control over Repeatability and Non-Repeatability</a></li><li class="nav-item"><a href="#rngdemo-4" class="nav-link intrnllnk">Choosing a Generator Type</a></li><li class="nav-item"><a href="#rngdemo-5" class="nav-link intrnllnk">Saving and Restoring Random Number Generator Settings</a></li><li class="nav-item"><a href="#rngdemo-6" class="nav-link intrnllnk">Writing Simpler, More Flexible, Code</a></li><li class="nav-item"><a href="#rngdemo-7" class="nav-link intrnllnk">rng and RandStream</a></li><li class="nav-item"><a href="#d126e10573" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=random-number-generation&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=random-number-generation&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=random-number-generation&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=random-number-generation&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=random-number-generation&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=random-number-generation&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="example-ex89220654">Controlling Random Number Generation</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/rngdemo')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-rngdemo"><meta itemprop="exampletitle" content="Controlling Random Number Generation"></div><span id="rngdemo" class="anchor_target"></span><p class="shortdesc">This example shows how to use the <a href="../ref/rng.html" data-docid="matlab_ref#bsuymc2-1" class="a"><code class="olink">rng</code></a> function, which provides control over random number generation.</p><p>(Pseudo)Random numbers in MATLAB&#174; come from the <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code> functions. Many other functions call those three, but those are the fundamental building blocks. All three depend on a single shared random number generator that you can control using <code class="literal">rng</code>. </p><p>It's important to realize that "random" numbers in MATLAB are not unpredictable at all, but are generated by a deterministic algorithm. The algorithm is designed to be sufficiently complicated so that its output <span class="emphasis"><em>appears</em></span> to be an independent random sequence to someone who does not know the algorithm, and can pass various statistical tests of randomness. The function that is introduced here provides ways to take advantage of the determinism to</p><div class="itemizedlist"><ul><li><p>repeat calculations that involve random numbers, and get the same results, or</p></li><li><p>guarantee that different random numbers are used in repeated calculations</p></li></ul></div><p>and to take advantage of the apparent randomness to justify combining results from separate calculations.</p><div class="procedure"><h3 class="title" id="rngdemo-1">"Starting Over"</h3><p>If you look at the output from <code class="literal">rand</code>, <code class="literal">randi</code>, or <code class="literal">randn</code> in a new MATLAB session, you'll notice that they return the same sequences of numbers each time you restart MATLAB. It's often useful to be able to reset the random number generator to that startup state, without actually restarting MATLAB. For example, you might want to repeat a calculation that involves random numbers, and get the same result.</p><p>When you first start a MATLAB session or call <code class="literal">rng("default")</code>, MATLAB initializes the random number generator using the default algorithm and seed. Starting in R2023b, you can set the default algorithm and seed in MATLAB settings. If you do not change these settings, then <code class="literal">rng</code> uses the factory value of <code class="literal">"twister"</code> for the Mersenne Twister generator with seed 0, as in previous releases. For more information, see <a href="../ref/rng.html#mw_0ab68dfe-5530-445a-b2ed-3144bd682908" data-docid="matlab_ref#mw_0ab68dfe-5530-445a-b2ed-3144bd682908" class="a">Default Settings for Random Number Generator</a> and <a href="../ref/rng.html#mw_0bc59651-2b4b-45a5-9179-07243a027c75" data-docid="matlab_ref#mw_0bc59651-2b4b-45a5-9179-07243a027c75" class="a">Reproducibility for Random Number Generator</a>.</p><p><code class="literal">rng("default")</code> provides a very simple way to put the random number generator back to its default settings.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(<span style="color:#A020F0">"default"</span>)
rand <span style="color:#228B22">% returns the same value as at startup</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 
0.8147
</pre></div></div></div><p>What are the "default" random number settings that MATLAB starts up with, or that <code class="literal">rng("default")</code> gives you? Before R2023b, if you call <code class="literal">rng</code> with no inputs, you can see that it is the Mersenne Twister generator algorithm, seeded with 0.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = <span class="emphasis"><em>struct with fields:</em></span>
     Type: 'twister'
     Seed: 0
    State: [625×1 uint32]

</pre></div></div></div><p>You'll see in more detail below how to use the above output, including the <code class="literal">State</code> field, to control and change how MATLAB generates random numbers. For now, it serves as a way to see what generator <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code> are currently using.</p><h3 class="title" id="rngdemo-2">Non-Repeatability</h3><p>Each time you call <code class="literal">rand</code>, <code class="literal">randi</code>, or <code class="literal">randn</code>, they draw a new value from their shared random number generator, and successive values can be treated as statistically independent. But as mentioned above, each time you restart MATLAB those functions are reset and return the same sequences of numbers. Obviously, calculations that use the <span class="emphasis"><em>same</em></span> "random" numbers cannot be thought of as statistically independent. So when it's necessary to combine calculations done in two or more MATLAB sessions as if they <span class="emphasis"><em>were</em></span> statistically independent, you cannot use the default generator settings.</p><p>One simple way to avoid repeating the same random numbers in a new MATLAB session is to choose a different seed for the random number generator. <code class="literal">rng</code> gives you an easy way to do that, by creating a seed based on the current time.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(<span style="color:#A020F0">"shuffle"</span>)
rand</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 
0.9283
</pre></div></div></div><p>Each time you use <code class="literal">"shuffle"</code>, it reseeds the generator with a different seed. You can call <code class="literal">rng</code> with no inputs to see what seed it actually used.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = <span class="emphasis"><em>struct with fields:</em></span>
     Type: 'twister'
     Seed: 1293278402
    State: [625×1 uint32]

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(<span style="color:#A020F0">"shuffle"</span>) <span style="color:#228B22">% creates a different seed each time</span>
rng</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = <span class="emphasis"><em>struct with fields:</em></span>
     Type: 'twister'
     Seed: 1293278407
    State: [625×1 uint32]

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rand</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 
0.2604
</pre></div></div></div><p><code class="literal">"shuffle"</code> is a very easy way to reseed the random number generator. You might think that it's a good idea, or even necessary, to use it to get "true" randomness in MATLAB. For most purposes, though, <span class="emphasis"><em>it is not necessary to use</em></span> <span class="emphasis"><em><code class="literal">"shuffle"</code></em></span> <span class="emphasis"><em>at all</em></span>. Choosing a seed based on the current time does not improve the statistical properties of the values you'll get from <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code>, and does not make them "more random" in any real sense. While it is perfectly fine to reseed the generator each time you start up MATLAB, or before you run some kind of large calculation involving random numbers, it is actually not a good idea to reseed the generator too frequently within a session, because this can affect the statistical properties of your random numbers.</p><p>What <code class="literal">"shuffle"</code> does provide is a way to avoid repeating the same sequences of values. Sometimes that is critical, sometimes it's just "nice", but often it is not important at all. Bear in mind that if you use <code class="literal">"shuffle"</code>, you may want to save the seed that <code class="literal">rng</code> created so that you can repeat your calculations later on. You'll see how to do that below.</p><h3 class="title" id="rngdemo-3">More Control over Repeatability and Non-Repeatability</h3><p>So far, you've seen how to reset the random number generator to its default settings, and reseed it using a seed that is created using the current time. <code class="literal">rng</code> also provides a way to reseed it using a specific seed.</p><p>You can use the same seed several times, to repeat the same calculations. For example, if you run this code twice ...</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(1) <span style="color:#228B22">% the seed is any non-negative integer &lt; 2^32</span>
x = randn(1,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>x = <span class="emphasis"><em>1×5</em></span>

   -0.6490    1.1812   -0.7585   -1.1096   -0.8456

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(1)
x = randn(1,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>x = <span class="emphasis"><em>1×5</em></span>

   -0.6490    1.1812   -0.7585   -1.1096   -0.8456

</pre></div></div></div><p>... you get exactly the same results. You might do this to recreate <code class="literal">x</code> after having cleared it, so that you can repeat what happens in subsequent calculations that depend on <code class="literal">x</code>, using those specific values.</p><p>On the other hand, you might want to choose <span class="emphasis"><em>different</em></span> seeds to ensure that you don't repeat the same calculations. For example, if you run this code in one MATLAB session ...</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(2)
x2 = sum(randn(50,1000),1); <span style="color:#228B22">% 1000 trials of a random walk</span></pre></div></div></div><p>and this code in another ...</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(3)
x3 = sum(randn(50,1000),1);</pre></div></div></div><p>... you could combine the two results and be confident that they are not simply the same results repeated twice.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>x = [x2 x3];</pre></div></div></div><p>As with "<code class="literal">shuffle"</code> there is a caveat when reseeding MATLAB's random number generator, because it affects all subsequent output from <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code>. Unless you need repeatability or uniqueness, it is usually advisable to simply generate random values without reseeding the generator. If you do need to reseed the generator, that is usually best done at the command line, or in a spot in your code that is not easily overlooked.</p><h3 class="title" id="rngdemo-4">Choosing a Generator Type</h3><p>Not only can you reseed the random number generator as shown above, you can also choose the type of random number generator that you want to use. Different generator types produce different sequences of random numbers, and you might, for example, choose a specific type because of its statistical properties. Or you might need to recreate results from an older version of MATLAB that used a different default generator type.</p><p>One other common reason for choosing the generator type is that you are writing a validation test that generates "random" input data, and you need to guarantee that your test can always expect exactly the same predictable result. If you call <code class="literal">rng</code> with a seed before creating the input data, it reseeds the random number generator. But if the generator type has been changed for some reason, then the output from <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code> will not be what you expect from that seed. Therefore, to be 100% certain of repeatability, you can also specify a generator type.</p><p>For example,</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(0,<span style="color:#A020F0">"twister"</span>)</pre></div></div></div><p>causes <code class="literal">rand</code>, <code class="literal">randi</code>, and <code class="literal">randn</code> to use the Mersenne Twister generator algorithm, after seeding it with 0.</p><p>Using <code class="literal">"combRecursive"</code></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(0,<span style="color:#A020F0">"combRecursive"</span>)</pre></div></div></div><p>selects the Combined Multiple Recursive generator algorithm, which supports some parallel features that the Mersenne Twister does not.</p><p>This command</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(0,<span style="color:#A020F0">"v4"</span>)</pre></div></div></div><p>selects the generator algorithm that was the default in MATLAB 4.0.</p><p>And of course, this command returns the random number generator to its default settings.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(<span style="color:#A020F0">"default"</span>)</pre></div></div></div><p>However, because the default random number generator settings may change between MATLAB releases, using <code class="literal">"default"</code> does not guarantee predictable results over the long-term. <code class="literal">"default"</code> is a convenient way to reset the random number generator, but for even more predictability, specify a generator type and a seed.</p><p>On the other hand, when you are working interactively and need repeatability, it is simpler, and usually sufficient, to call <code class="literal">rng</code> with just a seed.</p><h3 class="title" id="rngdemo-5">Saving and Restoring Random Number Generator Settings</h3><p>Calling <code class="literal">rng</code> with no inputs returns a scalar structure with fields that contain two pieces of information described already: the generator type, and the integer with which the generator was last reseeded.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>s = rng</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>s = <span class="emphasis"><em>struct with fields:</em></span>
     Type: 'twister'
     Seed: 0
    State: [625×1 uint32]

</pre></div></div></div><p>The third field, <code class="literal">State</code>, contains a copy of the generator's current state vector. This state vector is the information that the generator maintains internally in order to generate the next value in its sequence of random numbers. Each time you call <code class="literal">rand</code>, <code class="literal">randi</code>, or <code class="literal">randn</code>, the generator that they share updates its internal state. Thus, the state vector in the settings structure returned by <code class="literal">rng</code> contains the information necessary to repeat the sequence, beginning from the point at which the state was captured.</p><p>While just being able to see this output is informative, <code class="literal">rng</code> also accepts a settings structure as an <span class="emphasis"><em>input</em></span>, so that you can save the settings, including the state vector, and restore them later to repeat calculations. Because the settings contain the generator type, you'll know exactly what you're getting, and so "later" might mean anything from moments later in the same MATLAB session, to years (and multiple MATLAB releases) later. You can repeat results from any point in the random number sequence at which you saved the generator settings. For example</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>x1 = randn(10,10); <span style="color:#228B22">% move ahead in the random number sequence</span>
s = rng;           <span style="color:#228B22">% save the settings at this point</span>
x2 = randn(1,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>x2 = <span class="emphasis"><em>1×5</em></span>

    0.8404   -0.8880    0.1001   -0.5445    0.3035

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>x3 = randn(5,5);   <span style="color:#228B22">% move ahead in the random number sequence</span>
rng(s);            <span style="color:#228B22">% return the generator back to the saved state</span>
x2 = randn(1,5)    <span style="color:#228B22">% repeat the same numbers</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>x2 = <span class="emphasis"><em>1×5</em></span>

    0.8404   -0.8880    0.1001   -0.5445    0.3035

</pre></div></div></div><p>Notice that while reseeding provides only a coarse reinitialization, saving and restoring the generator state using the settings structure allows you to repeat <span class="emphasis"><em>any</em></span> part of the random number sequence.</p><p>The most common way to use a settings structure is to restore the generator state. However, because the structure contains not only the state, but also the generator type and seed, it's also a convenient way to temporarily switch generator types. For example, if you need to create values using one of the legacy generators from MATLAB 5.0, you can save the current settings at the same time that you switch to use the old generator.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>previousSettings = rng(0,<span style="color:#A020F0">"v5uniform"</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>previousSettings = <span class="emphasis"><em>struct with fields:</em></span>
     Type: 'twister'
     Seed: 0
    State: [625×1 uint32]

</pre></div></div></div><p>You can then restore the original settings later.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rng(previousSettings)</pre></div></div></div><p>You should not modify the contents of any of the fields in a settings structure. In particular, you should not construct your own state vector, or even depend on the format of the generator state.</p><h3 class="title" id="rngdemo-6">Writing Simpler, More Flexible, Code</h3><p><code class="literal">rng</code> allows you to either</p><div class="itemizedlist"><ul><li><p>reseed the random number generator, or</p></li><li><p>save and restore random number generator settings</p></li></ul></div><p>without having to know what type it is. You can also return the random number generator to its default settings without having to know what those settings are. While there are situations when you might <span class="emphasis"><em>want</em></span> to specify a generator type, <code class="literal">rng</code> affords you the simplicity of not <span class="emphasis"><em>having</em></span> to specify it.</p><p>If you are able to avoid specifying a generator type, your code will automatically adapt to cases where a different generator needs to be used, and will automatically benefit from improved properties in a new default random number generator type.</p><h3 class="title" id="rngdemo-7"><code class="literal">rng</code> and <code class="literal">RandStream</code></h3><p><code class="literal">rng</code> provides a convenient way to control random number generation in MATLAB for the most common needs. However, more complicated situations involving multiple random number streams and parallel random number generation require a more complicated tool. The <code class="literal">RandStream</code> class is that tool, and it provides the most powerful way to control random number generation. The two tools are complementary, with <code class="literal">rng</code> providing a much simpler and concise syntax that is built on top of the flexibility of <code class="literal">RandStream</code>.</p></div>
            <h2 id="d126e10573">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/rng.html"><span itemprop="name"><code class="function">rng</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/double.rand.html"><span itemprop="name"><code class="function">rand</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/double.randi.html"><span itemprop="name"><code class="function">randi</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/double.randn.html"><span itemprop="name"><code class="function">randn</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/randstream.html"><span itemprop="name"><code class="class">RandStream</code></span></a></span></p>
            <h3 id="d126e10591">Topics</h3><ul class="list-unstyled"><li><a href="generate-random-numbers-that-are-repeatable.html" class="a">Generate Random Numbers That Are Repeatable</a></li><li><a href="generate-random-numbers-that-are-different.html" class="a">Generate Random Numbers That Are Different</a></li><li><a href="creating-and-controlling-a-random-number-stream.html" class="a">Creating and Controlling a Random Number Stream</a></li></ul>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
