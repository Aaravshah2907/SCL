<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Save and Load Parts of Variables in MAT-Files</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../large-files-and-big-data.html",
          "name": "Large Files and Big Data"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../large-mat-files.html",
          "name": "Large MAT-Files"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../large-files-and-big-data.html",
          "name": "Large Files and Big Data"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "large-mat-files",
        "large-files-and-big-data"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Save and load parts of variables directly in MAT-files without loading them into memory using the matfile function."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../large-files-and-big-data.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Large Files and Big Data</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../large-mat-files.html?s_tid=CRUX_lftnav" itemprop="url" id="bugetbn-1"><span itemprop="title">Large MAT-Files</span></a></li></ul><ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav">Data Import and Analysis</a></li><li><a href="../large-files-and-big-data.html?s_tid=CRUX_lftnav" id="bugetan">Large Files and Big Data</a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Save and Load Parts of Variables in MAT-Files</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#btij5sv" class="nav-link intrnllnk">Save and Load Using the matfile Function</a></li><li class="nav-item"><a href="#bt053be" class="nav-link intrnllnk">Load Parts of Variables Dynamically</a></li><li class="nav-item"><a href="#bs2bltd" class="nav-link intrnllnk">Avoid Inadvertently Loading Entire Variables</a></li><li class="nav-item"><a href="#bs2blnh-1" class="nav-link intrnllnk">Partial Loading and Saving Requires Version 7.3 MAT-Files</a></li><li class="nav-item"><a href="#d126e2622" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=large-mat-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=large-mat-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=large-mat-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=large-mat-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=large-mat-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=large-mat-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bs15tos">Save and Load Parts of Variables in MAT-Files</h2><span id="save_appending_variables" class="anchor_target"></span><p>You can save and load parts of variables directly in MAT-files
without loading them into memory using the <code class="literal">matfile</code> function.
The primary advantage of using the <code class="literal">matfile</code> function
over the <code class="literal">load</code> or <code class="literal">save</code> functions
is that you can process parts of very large data sets that are otherwise
too large to fit in memory. When working with these large variables,
read and write as much data into memory as possible at a time. Otherwise,
repeated file access can negatively impact the performance of your
code.</p><section><h3 class="title" id="btij5sv">Save and Load Using the <code class="literal">matfile</code> Function</h3><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/LoadUsingthematfileFunctionExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Save and Load Using the matfile Function",
          "description": "Load, modify, and save part of a variable in an existing MAT-file using the matfile function.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "load-parts-of-variables-from-mat-files.html"

        },
          "identifier": "matlab.LoadUsingthematfileFunctionExample",
          "name": "LoadUsingthematfileFunctionExample",
          "url": "load-parts-of-variables-from-mat-files.html#btij5sv"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/LoadUsingthematfileFunctionExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "LoadUsingthematfileFunctionExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-LoadUsingthematfileFunctionExample"><meta itemprop="exampletitle" content="Save and Load Using the matfile Function"></div><span id="LoadUsingthematfileFunctionExample" class="anchor_target"></span><p class="shortdesc">This example shows how to load, modify, and save part of a variable in an existing MAT-file using the <code class="literal">matfile</code> function. </p><p>Create a Version 7.3 MAT-file with two variables, <code class="literal">A</code> and <code class="literal">B</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>A = rand(5);
B = magic(10);
save <span style="color:#A020F0">example.mat</span> <span style="color:#A020F0">A</span> <span style="color:#A020F0">B</span> <span style="color:#A020F0">-v7.3</span>;
clear <span style="color:#A020F0">A</span> <span style="color:#A020F0">B</span></pre></div></div></div><p>Construct a <code class="literal">MatFile</code> object from the MAT-file, <code class="literal">example.mat</code>. The <code class="literal">matfile</code> function creates a <code class="literal">MatFile</code> object that corresponds to the MAT-file and contains the properties of the <code class="literal">MatFile</code> object. By default, <code class="literal">matfile</code> only permits loading from existing MAT-files.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject = matfile(<span style="color:#A020F0">'example.mat'</span>);</pre></div></div></div><p>To enable saving, call <code class="literal">matfile</code> with the <code class="literal">Writable</code> parameter. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject = matfile(<span style="color:#A020F0">'example.mat'</span>,<span style="color:#A020F0">'Writable'</span>,true);</pre></div></div></div><p>Alternatively, construct the object and set <code class="literal">Properties.Writable</code> in separate steps. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject = matfile(<span style="color:#A020F0">'example.mat'</span>);
exampleObject.Properties.Writable = true;</pre></div></div></div><p>Load the first row of <code class="literal">B</code> from <code class="literal">example.mat</code> into variable <code class="literal">firstRowB</code> and modify the data. When you index into objects associated with Version 7.3 MAT-files, MATLAB&#174; loads only the part of the variable that you specify. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>firstRowB = exampleObject.B(1,:); 
firstRowB = 2 * firstRowB;</pre></div></div></div><p>Update the values in the first row of variable <code class="literal">B</code> in <code class="literal">example.mat</code> using the values stored in <code class="literal">firstRowB</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject.B(1,:) = firstRowB;</pre></div></div></div><p>For very large files, the best practice is to read and write as much data into memory as possible at a time. Otherwise, repeated file access negatively impacts the performance of your code. For example, suppose that your file contains many rows and columns, and that loading a single row requires most of the available memory. Rather than updating one element at a time, update each row.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>[nrowsB,ncolsB] = size(exampleObject,<span style="color:#A020F0">'B'</span>);
<span style="color:#0000FF">for</span> row = 1:nrowsB
  exampleObject.B(row,:) = row * exampleObject.B(row,:);
<span style="color:#0000FF">end</span></pre></div></div></div><p>If memory is not a concern, you can update the entire contents of a variable at a time.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject.B = 10 * exampleObject.B;</pre></div></div></div><p>Alternatively, update a variable by calling the <code class="literal">save</code> function with the  <code class="literal remove_text_wrapping">-append</code> option. The <code class="literal remove_text_wrapping">-append</code> option requests that the <code class="literal">save</code> function replace only the specified variable, <code class="literal">B</code>, and leave other variables in the file intact. This method always requires that you load and save the entire variable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>load(<span style="color:#A020F0">'example.mat'</span>,<span style="color:#A020F0">'B'</span>);
B(1,:) = 2 * B(1,:);
save(<span style="color:#A020F0">'example.mat'</span>,<span style="color:#A020F0">'-append'</span>,<span style="color:#A020F0">'B'</span>);</pre></div></div></div><p>Add a variable to the file using the <code class="literal">matlab.io.MatFile</code> object.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject.C = magic(8);</pre></div></div></div><p>You also can add the variable by calling the <code class="literal">save</code> function with the  <code class="literal remove_text_wrapping">-append</code> option.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>C = magic(8);
save(<span style="color:#A020F0">'example.mat'</span>,<span style="color:#A020F0">'-append'</span>,<span style="color:#A020F0">'C'</span>);
clear <span style="color:#A020F0">C</span></pre></div></div></div><div class="procedure"></div></section><section><h3 class="title" id="bt053be">Load Parts of Variables Dynamically</h3><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/LoadfromVariableswithUnknownNamesExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Load Parts of Variables Dynamically",
          "description": "Access parts of variables from a MAT-file dynamically. This technique is useful when working with MAT-files whose variables names are not all known.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "load-parts-of-variables-from-mat-files.html"

        },
          "identifier": "matlab.LoadfromVariableswithUnknownNamesExample",
          "name": "LoadfromVariableswithUnknownNamesExample",
          "url": "load-parts-of-variables-from-mat-files.html#bt053be"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/LoadfromVariableswithUnknownNamesExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "LoadfromVariableswithUnknownNamesExample.mlx",
        "topography.mat"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-LoadfromVariableswithUnknownNamesExample"><meta itemprop="exampletitle" content="Load Parts of Variables Dynamically"></div><span id="LoadfromVariableswithUnknownNamesExample" class="anchor_target"></span><p class="shortdesc">This example shows how to access parts of variables from a MAT-file dynamically. This technique is useful when working with MAT-files whose variables names are not all known.</p><p>Construct a <code class="literal">MatFile</code> object that corresponds to the sample file <code class="literal">topography.mat</code>. Use the <code class="literal">who</code> function to store the variable names from the file in the cell array <code class="literal">varlist</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>exampleObject = matfile(<span style="color:#A020F0">"topography.mat"</span>);
varlist = who(exampleObject)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>varlist = <span class="emphasis"><em>3×1 cell</em></span>
    {'topo'    }
    {'topomap1'}
    {'topomap2'}

</pre></div></div></div><p>The second and third variables, <code class="literal">topomap1</code> and <code class="literal">topomap2</code>, are both three-column matrices containing colormap data. Load the colormap data from the third column of each of these two variables into a field of a structure <code class="literal">S</code>. For each field, specify a field name that is the original variable name prepended by <code class="literal">"colormap_"</code>. Then access the data in each variable as properties of <code class="literal">exampleObject</code>. Because <code class="literal">varName</code> is a variable, enclose it in parentheses.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">for</span> index = 2:3
    varName = varlist{index};
    S.(<span style="color:#A020F0">"colormap_"</span>+varName) = exampleObject.(varName)(:,3);
<span style="color:#0000FF">end</span></pre></div></div></div><p>View the contents of the structure. The structure has two fields, <code class="literal">colormap_topomap1</code> and <code class="literal">colormap_topomap2</code>, and each contains a column vector.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>S</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>S = <span class="emphasis"><em>struct with fields:</em></span>
    colormap_topomap1: [64×1 double]
    colormap_topomap2: [128×1 double]

</pre></div></div></div><div class="procedure"></div></section><section><h3 class="title" id="bs2bltd">Avoid Inadvertently Loading Entire Variables</h3><p>When you do not know the size of a large variable in a MAT-file and want to load only parts of
                that variable at a time, avoid using the <code class="literal">end</code> keyword. Using the
                    <code class="literal">end</code> keyword temporarily loads the entire contents of the
                variable in question into memory. For very large variables, loading takes a long
                time or generates <code class="literal">Out</code>
                <code class="literal">of</code>
                <code class="literal">Memory</code> errors. Instead, call the <code class="literal">size</code> method
                for <code class="literal">MatFile</code> objects. </p><p>For example, this code temporarily loads the entire contents
of <code class="literal">B</code> in memory:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lastColB = exampleObject.B(:,end);</pre></div></div></div><p>Use this code instead to improve performance:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>[nrows,ncols] = size(exampleObject,<span style="color:#A020F0">'B'</span>);
lastColB = exampleObject.B(:,ncols);</pre></div></div></div><p>Similarly, any time you refer to a variable with syntax of the form
          <code class="literal">matObj.varName</code>, such as <code class="literal">exampleObject.B</code>, MATLAB<sup>&#x00AE;</sup> temporarily loads the entire variable into memory. Therefore, make sure to
        call the <code class="literal">size</code> method for <code class="literal">MatFile</code> objects with syntax
        such as:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>[nrows,ncols] = size(exampleObject,<span style="color:#A020F0">'B'</span>);</pre></div></div></div><p>rather than passing the entire contents of <code class="literal">exampleObject.B</code> to the
          <code class="literal">size</code> function,</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>[nrows,ncols] = size(exampleObject.B);</pre></div></div></div><p>The difference in syntax is subtle, but significant.</p></section><section><h3 class="title" id="bs2blnh-1">Partial Loading and Saving Requires Version 7.3 MAT-Files</h3><p>Any load or save operation that uses a <code class="literal">MatFile</code> object associated with a
        Version 7 or earlier MAT-file temporarily loads the entire variable into memory.</p><p>Use the <code class="literal">matfile</code> function to create files in Version 7.3 format. For
        example, this code creates a MAT-file that supports partial loading and saving.</p><div class="code_responsive"><pre class="programlisting">newfile = matfile('newfile.mat');
</pre></div><p>However, by default, the <code class="literal">save</code> function creates
Version 7 MAT-files. Convert existing MAT-files to Version 7.3 by
calling the <a href="../ref/save.html"><code class="function">save</code></a> function with
the <code class="literal remove_text_wrapping">-v7.3</code> option, such as:</p><div class="code_responsive"><pre class="programlisting">load('durer.mat');
save('mycopy_durer.mat','-v7.3');</pre></div><p>To change your settings to save new files in Version 7.3 format, go to the
            <strong class="guilabel">Home</strong> tab, and in the <strong class="guilabel">Environment</strong> section,
        click <span class="guiicon"><span class="inlinemediaobject inlinemediaobject_16_px"><object data="settings.svg" type="image/svg+xml" style="aspect-ratio: 16 / 16" alt="" width="16"></object></span></span>
        <strong class="guibutton">Settings</strong>. Select <strong class="guimenuitem">MATLAB</strong> &gt; <strong class="guimenuitem">General</strong> &gt; <strong class="guimenuitem">MAT and FIG Files</strong> and then select from the available options.</p></section>
<h2 id="d126e2622">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.io.matfile.html"><span itemprop="name"><code class="function">matfile</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/save.html"><span itemprop="name"><code class="function">save</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/load.html"><span itemprop="name"><code class="function">load</code></span></a></span></p>
<h3 id="d126e2631">Topics</h3><ul class="list-unstyled"><li><a href="../matlab_env/save-load-and-delete-workspace-variables.html" class="a">Save and Load Workspace Variables</a></li><li><a href="troubleshooting-file-size-increases-unexpectedly-when-growing-an-array.html" class="a">Growing Arrays Using matfile Function</a></li><li><a href="mat-file-versions.html" class="a">MAT-File Versions</a></li></ul>
</section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
