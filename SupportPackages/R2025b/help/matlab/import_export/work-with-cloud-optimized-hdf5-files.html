<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Work with Cloud-Optimized HDF5 Files</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../standard-file-formats.html",
          "name": "Standard File Formats"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../scientific-data.html",
          "name": "Scientific Data"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../hdf5-files.html",
          "name": "HDF5 Files"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "hdf5-files"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Optimize the performance of HDF5 files in the cloud using MATLAB."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../standard-file-formats.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Standard File Formats</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../scientific-data.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Scientific Data</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hdf5-files.html?s_tid=CRUX_lftnav" itemprop="url" id="btpwvi2"><span itemprop="title">HDF5 Files</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Work with Cloud-Optimized HDF5 Files</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_e2be72b6-c4ea-4adb-9215-9390e8ced829" class="nav-link intrnllnk">Strategies for Creating Cloud-Optimized HDF5 Files</a><ul class="nav"><li class="nav-item"><a href="#mw_98e6186e-d262-4ff3-b9b6-1a56cf9e8993" class="nav-link intrnllnk">Avoid Variable-Length Datatypes</a></li><li class="nav-item"><a href="#mw_bb74993b-9073-4fff-a5b9-2c78b3336376" class="nav-link intrnllnk">Consolidate Internal File Metadata</a></li></ul></li><li class="nav-item"><a href="#mw_35774afd-0059-4053-b454-7e8b14617509" class="nav-link intrnllnk">Create Cloud-Optimized HDF5 File</a></li><li class="nav-item"><a href="#d126e16045" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=hdf5-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=hdf5-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=hdf5-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=hdf5-files&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=hdf5-files&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=hdf5-files&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="mw_397f39d4-5822-4b77-85e6-5626a3072d34">Work with Cloud-Optimized HDF5 Files</h2><div class="doc_topic_desc"><div class="purpose_container"><em>Since R2025a</em></div></div><p>In MATLAB<sup>&#x00AE;</sup>, you can optimize the performance of HDF5 files in the cloud. A
                <em class="firstterm">cloud-optimized HDF5 file</em> (CO HDF5 file) is an HDF5 file
            whose internal structures have been arranged for more efficient data access when the
            file is in cloud object stores. The goal of these arrangements is to reduce the number
            of server requests, which is often the limiting factor in the performance of HDF5 files
            in the cloud. The high-level (<a href="../ref/h5read.html"><code class="function">h5read</code></a> and <a href="../ref/h5readatt.html"><code class="function">h5readatt</code></a>) and low-level (<a href="../ref/dataseth5d.html#mw_306832ba-4d04-4185-beb5-784ac345ce06"><code class="function">H5D.read</code></a>
            and <a href="../ref/attributeh5a.html#mw_7774daa6-3764-46b0-9ae9-edd54e9cfc76"><code class="function">H5A.read</code></a>)
            reading functions in the MATLAB HDF5 interface, by default, attempt to take advantage of these optimized
            internal structures.</p><p>This topic describes two strategies for creating CO HDF5 files using the MATLAB low-level HDF5 interface: avoiding variable-length datatypes and
            consolidating internal file metadata. These strategies can be used together or
            separately.</p><div class="alert alert-info d-inline-block"><span class="alert_icon icon-alert-info-reverse"></span><p class="alert_heading"><strong>Note</strong></p><p>Consolidating the metadata in an HDF5 file can improve the file's performance even
                when you access the file locally. The performance improvement is most noticeable for
                metadata-intensive operations, such as calls to the <a href="../ref/h5info.html"><code class="function">h5info</code></a> function.</p></div><section><h3 class="title" id="mw_e2be72b6-c4ea-4adb-9215-9390e8ced829">Strategies for Creating Cloud-Optimized HDF5 Files</h3><section><h4 class="title" id="mw_98e6186e-d262-4ff3-b9b6-1a56cf9e8993">Avoid Variable-Length Datatypes</h4><p>One strategy for creating a CO HDF5 file is to avoid using variable-length
                    datatypes in the file. Although variable-length datatypes can offer modest space
                    savings, they often fit irregularly on file pages. This irregularity can
                    increase the number of server requests necessary to access the data in the file,
                    adversely affecting performance.</p><p>If you do use variable-length datatypes in the file, consider using as few as
                    possible.</p></section><section><h4 class="title" id="mw_bb74993b-9073-4fff-a5b9-2c78b3336376">Consolidate Internal File Metadata</h4><p>Another strategy for creating a CO HDF5 file is to consolidate the internal
                    file metadata. Use these consolidation techniques:</p><div class="itemizedlist"><ul><li><p>Choose a paged aggregation strategy for handling file space in the
                            file. To do so, specify the <code class="argument">strategy</code> argument of
                            the <a href="../ref/propertyh5p.html#mw_be135209-4bde-4846-bcc8-96bd971f3c34"><code class="function">H5P.set_file_space_strategy</code></a> function as
                                <code class="literal">"H5F_FSPACE_STRATEGY_PAGE"</code>.</p></li><li><p>Choose a page size that allows all the internal metadata of the file
                            to fit on a single page. A size of 8 MiB works well for many files. You
                            can set the page size using the <code class="argument">fsp_size</code> argument
                            of the <a href="../ref/propertyh5p.html#mw_5d320d7b-2e4d-484f-a290-2e55f60e418f"><code class="function">H5P.set_file_space_page_size</code></a> function.</p></li><li><p>Choose a chunk cache size between 1/8 and 1/4 of the page size. For
                            example, if you set the page size to 8 MiB, then set the size of the
                            chunk cache to be between 1 MiB and 2 MiB. You can set the size of the
                            chunk cache using the <code class="argument">nbytes</code> argument of the
                                <a href="../ref/propertyh5p.html#mw_a9d94c71-cc4b-4775-9d55-6931c201508e"><code class="function">H5P.set_chunk_cache</code></a> function. When calling this
                            function, consider specifying the <code class="argument">nslots</code> argument
                            as a prime number close to 100. For example, you can specify
                                <code class="argument">nslots</code> as <code class="literal">101</code>.</p></li><li><p>If you have user-specific information to store in the file, then
                            consider setting the size of the user block. Choose a user block size
                            large enough to store all the user-specific information that the file
                            contains. You can set the size of the user block using the
                                <code class="argument">size</code> argument of the <a href="../ref/propertyh5p.html#mw_7b0aac1a-61f5-4baf-866e-6f303c750a99"><code class="function">H5P.set_userblock</code></a> function.</p></li><li><p>If the file will be written in more than one session, then consider
                            enabling persistent free space in the file. To enable persistent free
                            space, specify the <code class="argument">is_persist</code> argument of the
                                <a href="../ref/propertyh5p.html#mw_be135209-4bde-4846-bcc8-96bd971f3c34"><code class="function">H5P.set_file_space_strategy</code></a> function as
                                <code class="literal">true</code>.</p></li></ul></div><p>If you do not or cannot use a paged aggregation strategy, then, instead of
                    setting the page size and the chunk cache size, consider creating the file with
                    a large metadata block. Choose a metadata block size that allows all the
                    internal metadata of the file to fit in a single block. A size of 8 MiB works
                    well for many files. You can set the size of the metadata block using the
                        <code class="argument">size</code> argument of the <a href="../ref/propertyh5p.html#mw_452885f5-d9be-443b-8509-0b0ce2362499"><code class="function">H5P.set_meta_block_size</code></a> function. For
                    example:<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>size = 8*2^20;
H5P.set_meta_block_size(faplID,size)
</pre></div></div></div></p></section></section><section><h3 class="title" id="mw_35774afd-0059-4053-b454-7e8b14617509">Create Cloud-Optimized HDF5 File</h3><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Create Cloud-Optimized HDF5 File",
          "description": "Create a cloud-optimized HDF5 file by using metadata consolidation techniques. You first create and configure an HDF5 file and then consolidate internal file metadata by setting a paged aggregation strategy, page size, chunk cache size, and user block size.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "work-with-cloud-optimized-hdf5-files.html"

        },
          "identifier": "matlab.ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample",
          "name": "ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample",
          "url": "work-with-cloud-optimized-hdf5-files.html#mw_35774afd-0059-4053-b454-7e8b14617509"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample"><meta itemprop="exampletitle" content="Create CloudOptimized HDF5 File"></div><span id="ConsolidateInternalFileMetadataForCloudOptimizedHDF5FileExample" class="anchor_target"></span><p class="shortdesc">This example shows how to create a cloud-optimized HDF5 file by using metadata consolidation techniques. You first create and configure an HDF5 file and then consolidate internal file metadata by setting a paged aggregation strategy, page size, chunk cache size, and user block size.</p><p>First, prepare an HDF5 file by defining property lists, creating the file, creating a simple dataspace with the size of each dimension unlimited, and setting the chunk size.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>fcplID = H5P.create(<span style="color:#A020F0">"H5P_FILE_CREATE"</span>);
faplID = H5P.create(<span style="color:#A020F0">"H5P_FILE_ACCESS"</span>);

H5P.set_libver_bounds(faplID,<span style="color:#A020F0">"H5F_LIBVER_LATEST"</span>,<span style="color:#A020F0">"H5F_LIBVER_LATEST"</span>)
fileID = H5F.create(<span style="color:#A020F0">"myfile.h5"</span>,<span style="color:#A020F0">"H5F_ACC_TRUNC"</span>,fcplID,faplID);
typeID = H5T.copy(<span style="color:#A020F0">"H5T_NATIVE_DOUBLE"</span>);

unlimited = H5ML.get_constant_value(<span style="color:#A020F0">"H5S_UNLIMITED"</span>);
dims = [512 1024];
h5_dims = fliplr(dims);
h5_maxdims = [unlimited unlimited];
spaceID = H5S.create_simple(2,h5_dims,h5_maxdims);
dcplID = H5P.create(<span style="color:#A020F0">"H5P_DATASET_CREATE"</span>);
daplID = H5P.create(<span style="color:#A020F0">"H5P_DATASET_ACCESS"</span>);

chunkDims = [512 1024];
h5_chunkDims = fliplr(chunkDims);
H5P.set_chunk(dcplID,h5_chunkDims)</pre></div></div></div><p>Choose a paged aggregation strategy for handling file space in the file, and enable persistent free space in the file.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>strategy = <span style="color:#A020F0">"H5F_FSPACE_STRATEGY_PAGE"</span>;
is_persist = true;
threshold = 1; <span style="color:#228B22">% Allow free-space manager to track all free space</span>
H5P.set_file_space_strategy(fcplID,strategy,is_persist,threshold)</pre></div></div></div><p>Set the page size in the file to 8 MiB.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>fsp_size = 8*2^20;
H5P.set_file_space_page_size(fcplID,fsp_size)</pre></div></div></div><p>Set the size of the chunk cache for the dataset to 2 MiB, and use 101 slots in the chunk cache for the dataset.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>nbytes = 2*2^20;
nslots = 101;
w0 = 0.75; <span style="color:#228B22">% Library default value</span>
H5P.set_chunk_cache(daplID,nslots,nbytes,w0)</pre></div></div></div><p>Set the size of the user block in the file to 2 KiB.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>size = 2*2^10;
H5P.set_userblock(fcplID,size)</pre></div></div></div><p>Create the dataset.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>dsID = H5D.create(fileID,<span style="color:#A020F0">"DS1"</span>,typeID,spaceID,dcplID);</pre></div></div></div><p>Close all identifiers.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>H5D.close(dsID)
H5P.close(daplID)
H5P.close(dcplID)
H5S.close(spaceID)
H5T.close(typeID)
H5F.close(fileID)
H5P.close(faplID)
H5P.close(fcplID)</pre></div></div></div><div class="procedure"></div></section>
            <h2 id="d126e16045">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/h5info.html"><span itemprop="name"><code class="function">h5info</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/h5read.html"><span itemprop="name"><code class="function">h5read</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/h5readatt.html"><span itemprop="name"><code class="function">h5readatt</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/attributeh5a.html#mw_7774daa6-3764-46b0-9ae9-edd54e9cfc76"><span itemprop="name"><code class="function">H5A.read</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/dataseth5d.html#mw_c0342c11-6dec-4ca9-8d00-e3ee4d6af386"><span itemprop="name"><code class="function">H5D.create</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/dataseth5d.html#mw_306832ba-4d04-4185-beb5-784ac345ce06"><span itemprop="name"><code class="function">H5D.read</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_28caf2a8-ebcb-4644-ac7d-17f9e7681151"><span itemprop="name"><code class="function">H5P.create</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_a9d94c71-cc4b-4775-9d55-6931c201508e"><span itemprop="name"><code class="function">H5P.set_chunk_cache</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_5d320d7b-2e4d-484f-a290-2e55f60e418f"><span itemprop="name"><code class="function">H5P.set_file_space_page_size</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_be135209-4bde-4846-bcc8-96bd971f3c34"><span itemprop="name"><code class="function">H5P.set_file_space_strategy</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_452885f5-d9be-443b-8509-0b0ce2362499"><span itemprop="name"><code class="function">H5P.set_meta_block_size</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/propertyh5p.html#mw_7b0aac1a-61f5-4baf-866e-6f303c750a99"><span itemprop="name"><code class="function">H5P.set_userblock</code></span></a></span></p>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
