<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Analyze Big Data in MATLAB Using Tall Arrays</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../large-files-and-big-data.html",
          "name": "Large Files and Big Data"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../tall-arrays.html",
          "name": "Tall Arrays"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "tall-arrays"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Analyze Big Data in MATLAB Using Tall Arrays",
          "description": "Use tall arrays to work with big data in MATLAB&#174;. You can use tall arrays to perform a variety of calculations on different types of data that does not fit in memory. These include basic calculations, as well as machine learning algorithms within Statistics and Machine Learning Toolbox&#8482;.",
          "thumbnailURL": "../../examples/matlab/win64/AnalyzeBigDataInMATLABUsingTallArraysExample_03.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.AnalyzeBigDataInMATLABUsingTallArraysExample",
          "name": "AnalyzeBigDataInMATLABUsingTallArraysExample",
          "url": "analyze-big-data-in-matlab-using-tall-arrays.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/AnalyzeBigDataInMATLABUsingTallArraysExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "AnalyzeBigDataInMATLABUsingTallArraysExample.mlx",
        "airlinesmall.csv"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to use tall arrays to work with big data in MATLAB&#174;."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/AnalyzeBigDataInMATLABUsingTallArraysExample_03.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../large-files-and-big-data.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Large Files and Big Data</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../tall-arrays.html?s_tid=CRUX_lftnav" itemprop="url" id="bvaolz6"><span itemprop="title">Tall Arrays</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Analyze Big Data in MATLAB Using Tall Arrays</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-1" class="nav-link intrnllnk">Introduction to Tall Arrays</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-2" class="nav-link intrnllnk">Create datastore for Collection of Files</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-3" class="nav-link intrnllnk">Create Tall Array</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-4" class="nav-link intrnllnk">Perform Calculations on Tall Arrays</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-5" class="nav-link intrnllnk">Gather Results into Workspace</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-6" class="nav-link intrnllnk">Select Subset of Tall Array</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-7" class="nav-link intrnllnk">Select Data by Condition</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-8" class="nav-link intrnllnk">Determine Largest Delays</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-9" class="nav-link intrnllnk">Visualize Data in Tall Arrays</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-10" class="nav-link intrnllnk">Scale to Entire Data Set</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-11" class="nav-link intrnllnk">Data Analytics and Machine Learning with Tall Arrays</a></li><li class="nav-item"><a href="#AnalyzeBigDataInMATLABUsingTallArraysExample-12" class="nav-link intrnllnk">Scale to Big Data Systems</a></li><li class="nav-item"><a href="#d126e36314" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section><div class="example_icon"></div><h1 class="r2025b" itemprop="title content" id="example-ex20622266">Analyze Big Data in MATLAB Using Tall Arrays</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/AnalyzeBigDataInMATLABUsingTallArraysExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-AnalyzeBigDataInMATLABUsingTallArraysExample"><meta itemprop="exampletitle" content="Analyze Big Data in MATLAB Using Tall Arrays"></div><span id="AnalyzeBigDataInMATLABUsingTallArraysExample" class="anchor_target"></span><p class="shortdesc">This example shows how to use tall arrays to work with big data in MATLAB&#174;. You can use tall arrays to perform a variety of calculations on different types of data that does not fit in memory. These include basic calculations, as well as machine learning algorithms within Statistics and Machine Learning Toolbox&#8482;.</p><p>This example operates on a small subset of data on a single computer, and then it then scales up to analyze all of the data set. However, this analysis technique can scale up even further to work on data sets that are so large they cannot be read into memory, or to work on systems like Apache Spark&#8482;.</p><div class="procedure"><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-1">Introduction to Tall Arrays</h3><p>Tall arrays and tall tables are used to work with out-of-memory data that has any number of rows. Instead of writing specialized code that takes into account the huge size of the data, tall arrays and tables let you work with large data sets in a manner similar to in-memory MATLAB&#174; arrays. The difference is that <code class="literal">tall</code> arrays typically remain unevaluated until you request that the calculations be performed.</p><p>This deferred evaluation enables MATLAB to combine the queued calculations where possible and take the minimum number of passes through the data. Since the number of passes through the data greatly affects execution time, it is recommended that you request output only when necessary.</p><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-2">Create datastore for Collection of Files</h3><p>Creating a datastore enables you to access a collection of data. A datastore can process arbitrarily large amounts of data, and the data can even be spread across multiple files in multiple folders. You can create a datastore for most types of files, including a collection of tabular text files (demonstrated here), spreadsheets, images, a SQL database (Database Toolbox&#8482; required), Hadoop&#174; sequence files, and more.</p><p>Create a datastore for a <code class="literal">.csv</code> file containing airline data. Treat <code class="literal">'NA'</code> values as missing so that <code class="literal">tabularTextDatastore</code> replaces them with <code class="literal">NaN</code> values. Select the variables of interest, and specify a categorical data type for the <code class="literal">Origin</code> and <code class="literal">Dest</code> variables. Preview the contents.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>ds = tabularTextDatastore(<span style="color:#A020F0">'airlinesmall.csv'</span>);
ds.TreatAsMissing = <span style="color:#A020F0">'NA'</span>;
ds.SelectedVariableNames = {<span style="color:#A020F0">'Year'</span>,<span style="color:#A020F0">'Month'</span>,<span style="color:#A020F0">'ArrDelay'</span>,<span style="color:#A020F0">'DepDelay'</span>,<span style="color:#A020F0">'Origin'</span>,<span style="color:#A020F0">'Dest'</span>};
ds.SelectedFormats(5:6) = {<span style="color:#A020F0">'%C'</span>,<span style="color:#A020F0">'%C'</span>};
pre = preview(ds)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>pre=<span class="emphasis"><em>8×6 table</em></span>
    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    1987     10          8          12        LAX      SJC 
    1987     10          8           1        SJC      BUR 
    1987     10         21          20        SAN      SMF 
    1987     10         13          12        BUR      SJC 
    1987     10          4          -1        SMF      LAX 
    1987     10         59          63        LAX      SJC 
    1987     10          3          -2        SAN      SFO 
    1987     10         11          -1        SEA      LAX 

</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-3">Create Tall Array</h3><p>Tall arrays are similar to in-memory MATLAB arrays, except that they can have any number of rows. Tall arrays can contain data that is numeric, logical, datetime, duration, calendarDuration, categorical, or strings. Also, you can convert any in-memory array to a tall array. (The in-memory array <code class="literal">A</code> must be one of the supported data types.)</p><p>The underlying class of a tall array is based on the type of datastore that backs it. For example, if the datastore <code class="literal">ds</code> contains tabular data, then <code class="literal">tall(ds)</code> returns a tall table containing the data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>tt = tall(ds)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>tt =

  M×6 tall table

    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

     ?        ?         ?           ?          ?        ?  
     ?        ?         ?           ?          ?        ?  
     ?        ?         ?           ?          ?        ?  
     :        :         :           :          :        :
     :        :         :           :          :        :

Preview deferred. Learn more.
</pre></div></div></div><p>The display indicates the underlying data type and includes the first several rows of data. The size of the table displays as "Mx6" to indicate that MATLAB does not yet know how many rows of data there are. </p><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-4">Perform Calculations on Tall Arrays</h3><p>You can work with tall arrays and tall tables in a similar manner in which you work with in-memory MATLAB arrays and tables.</p><p>One important aspect of tall arrays is that as you work with them, MATLAB does not perform most operations immediately. These operations appear to execute quickly, because the actual computation is deferred until you specifically request output. This deferred evaluation is important because even a simple command like <code class="literal">size(X)</code> executed on a tall array with a billion rows is not a quick calculation.</p><p>As you work with tall arrays, MATLAB keeps track of all of the operations to be carried out and optimizes the number of passes through the data. Thus, it is normal to work with unevaluated tall arrays and request output only when you require it. MATLAB does not know the contents or size of unevaluated tall arrays until you request that the array be evaluated and displayed.</p><p>Calculate the mean departure delay.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>mDep = mean(tt.DepDelay,<span style="color:#A020F0">'omitnan'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>mDep =

  tall double

    ?

Preview deferred. Learn more.
</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-5">Gather Results into Workspace</h3><p>The benefit of deferred evaluation is that when the time comes for MATLAB to perform the calculations, it is often possible to combine the operations in such a way that the number of passes through the data is minimized. So, even if you perform many operations, MATLAB only makes extra passes through the data when absolutely necessary.</p><p>The <code class="literal">gather</code> function forces evaluation of all queued operations and brings the resulting output back into memory. Since <code class="literal">gather</code> returns the <span class="emphasis"><em>entire</em></span> result in MATLAB, you should make sure that the result will fit in memory. For example, use <code class="literal">gather</code> on tall arrays that are the result of a function that reduces the size of the tall array, such as <code class="literal">sum</code>, <code class="literal">min</code>, <code class="literal">mean</code>, and so on.</p><p>Use <code class="literal">gather</code> to calculate the mean departure delay and bring the answer into memory. This calculation requires a single pass through the data, but other calculations might require several passes through the data. MATLAB determines the optimal number of passes for the calculation and displays this information at the command line.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>mDep = gather(mDep)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.84 sec
- Pass 2 of 2: Completed in 0.79 sec
Evaluation completed in 2.2 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>mDep = 
8.1860
</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-6">Select Subset of Tall Array</h3><p>You can extract values from a tall array by subscripting or indexing. You can index the array starting from the top or bottom, or by using a logical index. The functions <code class="literal">head</code> and <code class="literal">tail</code> are useful alternatives to indexing, enabling you to explore the first and last portions of a tall array. Gather both variables at the same time to avoid extra passes through the data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>h = head(tt);
tl = tail(tt);
[h,tl] = gather(h,tl)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 1: Completed in 0.69 sec
Evaluation completed in 0.87 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>h=<span class="emphasis"><em>8×6 table</em></span>
    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    1987     10          8          12        LAX      SJC 
    1987     10          8           1        SJC      BUR 
    1987     10         21          20        SAN      SMF 
    1987     10         13          12        BUR      SJC 
    1987     10          4          -1        SMF      LAX 
    1987     10         59          63        LAX      SJC 
    1987     10          3          -2        SAN      SFO 
    1987     10         11          -1        SEA      LAX 

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>tl=<span class="emphasis"><em>8×6 table</em></span>
    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    2008     12         14           1        DAB      ATL 
    2008     12         -8          -1        ATL      TPA 
    2008     12          1           9        ATL      CLT 
    2008     12         -8          -4        ATL      CLT 
    2008     12         15          -2        BOS      LGA 
    2008     12        -15          -1        SFO      ATL 
    2008     12        -12           1        DAB      ATL 
    2008     12         -1          11        ATL      IAD 

</pre></div></div></div><p>Use <code class="literal">head</code> to select a subset of 10,000 rows from the data for prototyping code before scaling to the full data set.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>ttSubset = head(tt,10000);</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-7">Select Data by Condition</h3><p>You can use typical logical operations on tall arrays, which are useful for selecting relevant data or removing outliers with logical indexing. The logical expression creates a tall logical vector, which then is used to subscript, identifying the rows where the condition is true.</p><p>Select only the flights out of Boston by comparing the elements of the categorical variable <code class="literal">Origin</code> to the value <code class="literal">'BOS'</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>idx = (ttSubset.Origin == <span style="color:#A020F0">'BOS'</span>);
bosflights = ttSubset(idx,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>bosflights =

  207×6 tall table

    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    1987     10         -8           0        BOS      LGA 
    1987     10        -13          -1        BOS      LGA 
    1987     10         12          11        BOS      BWI 
    1987     10         -3           0        BOS      EWR 
    1987     10         -5           0        BOS      ORD 
    1987     10         31          19        BOS      PHL 
    1987     10         -3           0        BOS      CLE 
    1987     11          5           5        BOS      STL 
     :        :         :           :          :        :
     :        :         :           :          :        :
</pre></div></div></div><p>You can use the same indexing technique to remove rows with missing data or NaN values from the tall array.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>idx = any(ismissing(ttSubset),2); 
ttSubset(idx,:) = [];</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-8">Determine Largest Delays</h3><p>Due to the nature of big data, sorting all of the data using traditional methods like <code class="literal">sort</code> or <code class="literal">sortrows</code> is inefficient. However, the <code class="literal">topkrows</code> function for tall arrays returns the top <code class="literal">k</code> rows in sorted order.</p><p>Calculate the top 10 greatest departure delays. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>biggestDelays = topkrows(ttSubset,10,<span style="color:#A020F0">'DepDelay'</span>);
biggestDelays = gather(biggestDelays)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
Evaluation completed in 0.074 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>biggestDelays=<span class="emphasis"><em>10×6 table</em></span>
    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    1988      3        772         785        ORD      LEX 
    1989      3        453         447        MDT      ORD 
    1988     12        397         425        SJU      BWI 
    1987     12        339         360        DEN      STL 
    1988      3        261         273        PHL      ROC 
    1988      7        261         268        BWI      PBI 
    1988      2        257         253        ORD      BTV 
    1988      3        236         240        EWR      FLL 
    1989      2        263         227        BNA      MOB 
    1989      6        224         225        DFW      JAX 

</pre></div></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-9">Visualize Data in Tall Arrays</h3><p>Plotting every point in a big data set is not feasible. For that reason, visualization of tall arrays involves reducing the number of data points using sampling or binning.</p><p>Visualize the number of flights per year with a histogram. The visualization functions pass through the data and immediately evaluate the solution when you call them, so <code class="literal">gather</code> is not required.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>histogram(ttSubset.Year,<span style="color:#A020F0">'BinMethod'</span>,<span style="color:#A020F0">'integers'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
Evaluation completed in 0.39 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>xlabel(<span style="color:#A020F0">'Year'</span>)
ylabel(<span style="color:#A020F0">'Number of Flights'</span>)
title(<span style="color:#A020F0">'Number of Flights by Year, 1987 - 1989'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e36232" class="mediaobject"><p><img src="../../examples/matlab/win64/AnalyzeBigDataInMATLABUsingTallArraysExample_01.png" alt="Figure contains an axes object. The axes object with title Number of Flights by Year, 1987 - 1989, xlabel Year, ylabel Number of Flights contains an object of type histogram." width="560"></p></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-10">Scale to Entire Data Set</h3><p>Instead of using the smaller data returned from <code class="literal">head</code>, you can scale up to perform the calculations on the entire data set by using the results from <code class="literal">tall(ds)</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>tt = tall(ds);
idx = any(ismissing(tt),2); 
tt(idx,:) = [];
mnDelay = mean(tt.DepDelay,<span style="color:#A020F0">'omitnan'</span>);
biggestDelays = topkrows(tt,10,<span style="color:#A020F0">'DepDelay'</span>); 
[mnDelay,biggestDelays] = gather(mnDelay,biggestDelays)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.54 sec
- Pass 2 of 2: Completed in 0.69 sec
Evaluation completed in 1.4 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>mnDelay = 
8.1310
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>biggestDelays=<span class="emphasis"><em>10×6 table</em></span>
    Year    Month    ArrDelay    DepDelay    Origin    Dest
    ____    _____    ________    ________    ______    ____

    1991      3          -8        1438       MCO      BWI 
    1998     12         -12        1433       CVG      ORF 
    1995     11        1014        1014       HNL      LAX 
    2007      4         914         924       JFK      DTW 
    2001      4         887         884       MCO      DTW 
    2008      7         845         855       CMH      ORD 
    1988      3         772         785       ORD      LEX 
    2008      4         710         713       EWR      RDU 
    1998     10         679         673       MCI      DFW 
    2006      6         603         626       ABQ      PHX 

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>histogram(tt.Year,<span style="color:#A020F0">'BinMethod'</span>,<span style="color:#A020F0">'integers'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.97 sec
- Pass 2 of 2: Completed in 0.47 sec
Evaluation completed in 1.6 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>xlabel(<span style="color:#A020F0">'Year'</span>)
ylabel(<span style="color:#A020F0">'Number of Flights'</span>)
title(<span style="color:#A020F0">'Number of Flights by Year, 1987 - 2008'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e36261" class="mediaobject"><p><img src="../../examples/matlab/win64/AnalyzeBigDataInMATLABUsingTallArraysExample_02.png" alt="Figure contains an axes object. The axes object with title Number of Flights by Year, 1987 - 2008, xlabel Year, ylabel Number of Flights contains an object of type histogram." width="560"></p></div></div><p>Use <code class="literal">histogram2</code> to further break down the number of flights by month for the whole data set. Since the bins for <code class="literal">Month</code> and <code class="literal">Year</code> are known ahead of time, specify the bin edges to avoid an extra pass through the data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>year_edges = 1986.5:2008.5;
month_edges = 0.5:12.5;
histogram2(tt.Year,tt.Month,year_edges,month_edges,<span style="color:#A020F0">'DisplayStyle'</span>,<span style="color:#A020F0">'tile'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 1: Completed in 0.75 sec
Evaluation completed in 0.87 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>colorbar
xlabel(<span style="color:#A020F0">'Year'</span>)
ylabel(<span style="color:#A020F0">'Month'</span>)
title(<span style="color:#A020F0">'Airline Flights by Month and Year, 1987 - 2008'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e36281" class="mediaobject"><p><img src="../../examples/matlab/win64/AnalyzeBigDataInMATLABUsingTallArraysExample_03.png" alt="Figure contains an axes object. The axes object with title Airline Flights by Month and Year, 1987 - 2008, xlabel Year, ylabel Month contains an object of type histogram2." width="560"></p></div></div><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-11">Data Analytics and Machine Learning with Tall Arrays</h3><p>You can perform more sophisticated statistical analysis on tall arrays, including calculating predictive analytics and performing machine learning, using the functions in Statistics and Machine Learning Toolbox&#8482;.</p><p>For more information, see <a href="../../stats/statistics-and-machine-learning-with-big-data-using-tall-arrays.html" data-docid="stats_ug#bvejsqt-1" class="a">Statistics and Machine Learning with Big Data Using Tall Arrays</a><span role="cross_prod"> (Statistics and Machine Learning Toolbox)</span>.</p><h3 class="title" id="AnalyzeBigDataInMATLABUsingTallArraysExample-12">Scale to Big Data Systems</h3><p>A key capability of tall arrays in MATLAB is the connectivity to big data platforms, such as computing clusters and Apache Spark&#8482;.</p><p>This example only scratches the surface of what is possible with tall arrays for big data. See <a href="extend-tall-arrays-with-other-products.html" data-docid="import_export#bvciqp3-1" class="a">Extend Tall Arrays with Other Products</a> for more information about using:</p><div class="itemizedlist"><ul><li><p>Statistics and Machine Learning Toolbox&#8482;</p></li><li><p>Database Toolbox&#8482;</p></li><li><p>Parallel Computing Toolbox&#8482;</p></li><li><p>MATLAB&#174; Parallel Server&#8482;</p></li><li><p>MATLAB Compiler&#8482;</p></li></ul></div></div>
      <h2 id="d126e36314">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/tall.tall.html"><span itemprop="name"><code class="function">tall</code></span></a></span></p>
      
      <h3 id="d126e36322">Topics</h3><ul class="list-unstyled"><li><a href="tall-arrays.html" class="a">Tall Arrays for Out-of-Memory Data</a></li></ul>
      
    </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
