<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Lazy Evaluation of Tall Arrays</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../large-files-and-big-data.html",
          "name": "Large Files and Big Data"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../tall-arrays.html",
          "name": "Tall Arrays"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "tall-arrays"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="How to leverage lazy execution of tall arrays to optimize performance of calculations."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../large-files-and-big-data.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Large Files and Big Data</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../tall-arrays.html?s_tid=CRUX_lftnav" itemprop="url" id="bvaolz6"><span itemprop="title">Tall Arrays</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Lazy Evaluation of Tall Arrays</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#bvcnsl7" class="nav-link intrnllnk">Display of Unevaluated Tall Arrays</a></li><li class="nav-item"><a href="#bvcnn15-1" class="nav-link intrnllnk">Evaluation with gather</a></li><li class="nav-item"><a href="#bvdz69x" class="nav-link intrnllnk">Resolve Errors with gather</a></li><li class="nav-item"><a href="#bvcl7nt" class="nav-link intrnllnk">Example: Calculate Size of Tall Array</a></li><li class="nav-item"><a href="#bvcnp9m" class="nav-link intrnllnk">Example: Multi-pass Calculations with Tall Arrays</a></li><li class="nav-item"><a href="#bvcnq3x-1" class="nav-link intrnllnk">Summary of Behavior and Recommendations</a></li><li class="nav-item"><a href="#d126e34750" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bvciqpo">Lazy Evaluation of Tall Arrays</h2><span id="tall_no_preview" class="anchor_target"></span>
      <p class="shortdesc">One of the differences between tall arrays and in-memory MATLAB<sup>&#x00AE;</sup> arrays is that tall arrays typically remain <span class="emphasis"><em>unevaluated</em></span>
        until you request that calculations be performed. (The exceptions to this rule include
        plotting functions like <code class="function">plot</code> and <code class="function">histogram</code> and
        some statistical fitting functions like <code class="function">fitlm</code>, which automatically
        evaluate tall array inputs.) While a tall array is in an unevaluated state, MATLAB might not know its size, its data type, or the specific values it contains.
        However, you can still use unevaluated arrays in your calculations as if the values were
        known. This allows you to work quickly with large data sets instead of waiting for each
        command to execute. For this reason, it is recommended that you use
          <code class="function">gather</code> only when you require output.</p>
      <p>MATLAB keeps track of all the operations you perform on unevaluated tall arrays as
        you enter them. When you eventually call <code class="function">gather</code> to evaluate the queued
        operations, MATLAB uses the history of unevaluated commands to optimize the calculation by
        minimizing the number of passes through the data. Used properly, this <em class="firstterm">lazy
          evaluation</em> can save huge amounts of execution time by eliminating unnecessary
        passes through large data sets.</p>
    <section><h3 class="title" id="bvcnsl7">Display of Unevaluated Tall Arrays</h3><p>The display of unevaluated tall arrays varies depending on how much MATLAB knows about the array and its values. There are three pieces of information
        reflected in the display:</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">Array size</strong> &#8212; Unknown dimension sizes are
            represented by the variables <code class="literal">M</code> or <code class="literal">N</code> in the
            display. If no dimension sizes are known, then the size appears as
              <code class="literal">MxNx....</code>.</p></li><li><p><strong class="emphasis bold">Array data type</strong> &#8212; If the array has an
            unknown underlying data type, then its type appears as <code class="literal">tall array</code>. If
            the type is known, it is listed as, for example, <code class="literal">tall double
            array</code>.</p></li><li><p><strong class="emphasis bold">Array values</strong> &#8212; If the array values are
            unknown, then they appear as <code class="literal">?</code>. Known values are displayed.</p></li></ul></div><p>MATLAB might know all, some, or none of these pieces of information about a given
        tall array, depending on the nature of the calculation.</p><p>For example, if the array has a known data type but unknown size and values, then the
        unevaluated tall array might look like this:</p><div class="code_responsive"><pre class="programlisting">M×N×... tall double array

    ?    ?    ?    ...
    ?    ?    ?    ...
    ?    ?    ?    ...
    :    :    :
    :    :    :</pre></div><p>If the type and relative size are known, then the display could be:</p><div class="code_responsive"><pre class="programlisting">&nbsp;1×N tall char array

&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;&nbsp; ...
</pre></div><p>If some of the data is known, then MATLAB displays the known values:</p><div class="code_responsive"><pre class="programlisting">  100×3 tall double matrix

    0.8147    0.1622    0.6443
    0.9058    0.7943    0.3786
    0.1270    0.3112    0.8116
    0.9134    0.5285    0.5328
    0.6324    0.1656    0.3507
    0.0975    0.6020    0.9390
    0.2785    0.2630    0.8759
    0.5469    0.6541    0.5502
      :         :         :
      :         :         :</pre></div></section><section><h3 class="title" id="bvcnn15-1">Evaluation with <code class="function">gather</code></h3><p>The <a href="../ref/tall.gather.html"><code class="function">gather</code></a> function is used to evaluate tall
        arrays. <code class="function">gather</code> accepts tall arrays as inputs and returns in-memory
        arrays as outputs. For this reason, you can think of this function as a bridge between tall
        arrays and in-memory arrays. For example, you cannot control <code class="literal">if</code> or
          <code class="literal">while</code> loop statements using a tall logical array, but once the array is
        evaluated with <code class="function">gather</code> it becomes an in-memory logical value that you
        can use in these contexts.</p><p><code class="function">gather</code> performs all queued operations on a tall array and returns
        the <span class="emphasis"><em>entire</em></span> result in memory. Since <code class="function">gather</code> returns
        results as in-memory MATLAB arrays, standard memory considerations apply. MATLAB might run out of memory if the result returned by <code class="function">gather</code>
        is too large.</p><p>Most of the time you can use <code class="function">gather</code> to see the entire result of a
        calculation, particularly if the calculation includes a reduction operation such as
          <code class="function">sum</code> or <code class="function">mean</code>. However, if the result is too large
        to fit in memory, then you can use <code class="literal">gather(head(X))</code> or
          <code class="literal">gather(tail(X))</code> to perform the calculation and look at only the first
        or last few rows of the result.</p></section><section><h3 class="title" id="bvdz69x">Resolve Errors with <code class="function">gather</code></h3><span id="tall_gather_error" class="anchor_target"></span><p>If you enter an erroneous command and <code class="function">gather</code> fails to evaluate a
        tall array variable, then you must delete the variable from your workspace and recreate the
        tall array using <span class="emphasis"><em>only</em></span> valid commands. This is because MATLAB keeps track of all the operations you perform on unevaluated tall arrays as
        you enter them. The only way to make MATLAB “forget” about an erroneous statement is to reconstruct the tall
        array from scratch.</p></section><section><h3 class="title" id="bvcl7nt">Example: Calculate Size of Tall Array</h3><p>This example shows what an unevaluated tall array looks like, and how to evaluate the
        array.</p><p>Create a datastore for the data set <code class="literal">airlinesmall.csv</code>. Convert the
        datastore into a tall table and then calculate the size.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>varnames = {<span style="color:#A020F0">'ArrDelay'</span>, <span style="color:#A020F0">'DepDelay'</span>, <span style="color:#A020F0">'Origin'</span>, <span style="color:#A020F0">'Dest'</span>};
ds = tabularTextDatastore(<span style="color:#A020F0">'airlinesmall.csv'</span>, <span style="color:#A020F0">'TreatAsMissing'</span>, <span style="color:#A020F0">'NA'</span>, <span style="color:#0000FF">...</span>
<span style="color:#A020F0">'SelectedVariableNames'</span>, varnames);
tt = tall(ds)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>tt =

  M×4 tall table

    ArrDelay    DepDelay    Origin    Dest 
    ________    ________    ______    _____

        8          12       'LAX'     'SJC'
        8           1       'SJC'     'BUR'
       21          20       'SAN'     'SMF'
       13          12       'BUR'     'SJC'
        4          -1       'SMF'     'LAX'
       59          63       'LAX'     'SJC'
        3          -2       'SAN'     'SFO'
       11          -1       'SEA'     'LAX'
       :           :          :         :
       :           :          :         :</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>s = size(tt)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>s =

  1×2 tall double row vector

    ?    ?

Preview deferred. Learn more.</pre></div></div></div><p>Calculating the size of a tall array returns a small answer (a 1-by-2 vector), but the
        display indicates that an entire pass through the data is still required to calculate the
        size of <code class="literal">tt</code>.</p><p>Use the <code class="function">gather</code> function to fully evaluate the tall array and bring
        the results into memory. As the command executes, there is a dynamic progress display in the
        command window that is particularly helpful with long calculations.</p><div class="alert alert-info d-inline-block"><span class="alert_icon icon-alert-info-reverse"></span><p class="alert_heading"><strong>Note</strong></p><p>Always ensure that the result returned by <code class="function">gather</code> will be able to
          fit in memory. If you use <code class="function">gather</code> directly on a tall array without
          reducing its size using a function such as <code class="literal">mean</code>, then MATLAB might run out of memory.</p></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>tableSize = gather(s)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 1: Completed in 0.42 sec
Evaluation completed in 0.48 sec

tableSize =

      123523           4</pre></div></div></div></section><section><h3 class="title" id="bvcnp9m">Example: Multi-pass Calculations with Tall Arrays</h3><p>This example shows how several calculations can be combined to minimize the total number
        of passes through the data.</p><p>Create a datastore for the data set <code class="literal">airlinesmall.csv</code>. Convert the
        datastore into a tall table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>varnames = {<span style="color:#A020F0">'ArrDelay'</span>, <span style="color:#A020F0">'DepDelay'</span>, <span style="color:#A020F0">'Origin'</span>, <span style="color:#A020F0">'Dest'</span>};
ds = tabularTextDatastore(<span style="color:#A020F0">'airlinesmall.csv'</span>, <span style="color:#A020F0">'TreatAsMissing'</span>, <span style="color:#A020F0">'NA'</span>, <span style="color:#0000FF">...</span>
<span style="color:#A020F0">'SelectedVariableNames'</span>, varnames);
tt = tall(ds)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>tt =

  M×4 tall table

    ArrDelay    DepDelay    Origin    Dest 
    ________    ________    ______    _____

        8          12       'LAX'     'SJC'
        8           1       'SJC'     'BUR'
       21          20       'SAN'     'SMF'
       13          12       'BUR'     'SJC'
        4          -1       'SMF'     'LAX'
       59          63       'LAX'     'SJC'
        3          -2       'SAN'     'SFO'
       11          -1       'SEA'     'LAX'
       :           :          :         :
       :           :          :         :</pre></div></div></div><p>Subtract the mean value of <code class="literal">DepDelay</code> from <code class="literal">ArrDelay</code>
        to create a new variable <code class="literal">AdjArrDelay</code>. Then calculate the mean value of
          <code class="literal">AdjArrDelay</code> and subtract this mean value from
          <code class="literal">AdjArrDelay</code>. If these calculations were all evaluated separately, then
          MATLAB would require four passes through the data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>AdjArrDelay = tt.ArrDelay - mean(tt.DepDelay,<span style="color:#A020F0">'omitnan'</span>);
AdjArrDelay = AdjArrDelay - mean(AdjArrDelay,<span style="color:#A020F0">'omitnan'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>AdjArrDelay =

  M×1 tall double column vector

    ?
    ?
    ?
    :
    :

Preview deferred. Learn more.</pre></div></div></div><p>Evaluate <code class="literal">AdjArrDelay</code> and view the first few rows. Because some
        calculations can be combined, only three passes through the data are required.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>gather(head(AdjArrDelay))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 3: Completed in 0.4 sec
- Pass 2 of 3: Completed in 0.39 sec
- Pass 3 of 3: Completed in 0.23 sec
Evaluation completed in 1.2 sec

ans =

    0.8799
    0.8799
   13.8799
    5.8799
   -3.1201
   51.8799
   -4.1201
    3.8799</pre></div></div></div></section><section><h3 class="title" id="bvcnq3x-1">Summary of Behavior and Recommendations</h3><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Tall arrays remain unevaluated until you request output using
              <code class="function">gather</code>, an optimization called <span class="emphasis"><em>lazy
              evaluation</em></span>.</p></li><li><p>Use <code class="function">gather</code> in most cases to evaluate tall array calculations.
            If you believe the result of the calculations might not fit in memory, then use
              <code class="literal">gather(head(X))</code> or <code class="literal">gather(tail(X))</code>
            instead.</p></li><li><p> Work primarily with unevaluated tall arrays and request output only when necessary.
            The more queued calculations there are that are unevaluated, the more optimization
              MATLAB can do to minimize the number of passes through the data.</p></li><li><p>If you enter an erroneous tall array command and <code class="function">gather</code> fails
            to evaluate a tall array variable, then you must delete the variable from your workspace
            and recreate the tall array using <span class="emphasis"><em>only</em></span> valid commands.</p></li></ol></div></section>
      <h2 id="d126e34750">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/tall.gather.html"><span itemprop="name"><code class="function">gather</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/tall.write.html"><span itemprop="name"><code class="function">write</code></span></a></span></p>
      
      <h3 id="d126e34761">Topics</h3><ul class="list-unstyled"><li><a href="tall-arrays.html" class="a">Tall Arrays for Out-of-Memory Data</a></li></ul>
      
    </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
