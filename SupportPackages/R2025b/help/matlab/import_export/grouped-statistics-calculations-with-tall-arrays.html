<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Grouped Statistics Calculations with Tall Arrays</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../large-files-and-big-data.html",
          "name": "Large Files and Big Data"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../tall-arrays.html",
          "name": "Tall Arrays"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "tall-arrays"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Grouped Statistics Calculations with Tall Arrays",
          "description": "Calculate grouped statistics of a tall timetable containing power outage data. The example uses the grouptransform, groupsummary, and groupcounts functions to calculate various quantities of interest, such as the most common power outage cause in each region. Even though the raw data in this example only has about 1500 rows, you can use the techniques presented here on much larger data sets because no assumptions are made about the size of the data.",
          "thumbnailURL": "../../examples/matlab/win64/GroupedStatisticsCalculationsWithTallArraysExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.GroupedStatisticsCalculationsWithTallArraysExample",
          "name": "GroupedStatisticsCalculationsWithTallArraysExample",
          "url": "grouped-statistics-calculations-with-tall-arrays.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/GroupedStatisticsCalculationsWithTallArraysExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "GroupedStatisticsCalculationsWithTallArraysExample.mlx",
        "outages.csv"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to calculate grouped statistics of a tall timetable containing power outage data."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/GroupedStatisticsCalculationsWithTallArraysExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../large-files-and-big-data.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Large Files and Big Data</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../tall-arrays.html?s_tid=CRUX_lftnav" itemprop="url" id="bvaolz6"><span itemprop="title">Tall Arrays</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Grouped Statistics Calculations with Tall Arrays</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-1" class="nav-link intrnllnk">Create Datastore and Tall Timetable</a></li><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-2" class="nav-link intrnllnk">Replace Missing Data</a></li><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-3" class="nav-link intrnllnk">Preview Data</a></li><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-4" class="nav-link intrnllnk">Mean Power Outage Duration by Region</a></li><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-5" class="nav-link intrnllnk">Most Common Power Outage Causes by Region</a></li><li class="nav-item"><a href="#GroupedStatisticsCalculationsWithTallArraysExample-6" class="nav-link intrnllnk">Worst Power Outages in Each Region</a></li><li class="nav-item"><a href="#d126e35800" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=tall-arrays&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=tall-arrays&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="bvf4u2i">Grouped Statistics Calculations with Tall Arrays</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/GroupedStatisticsCalculationsWithTallArraysExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-GroupedStatisticsCalculationsWithTallArraysExample"><meta itemprop="exampletitle" content="Grouped Statistics Calculations with Tall Arrays"></div><span id="GroupedStatisticsCalculationsWithTallArraysExample" class="anchor_target"></span><p class="shortdesc">This example shows how to calculate grouped statistics of a tall timetable containing power outage data. The example uses the <code class="literal">grouptransform</code>, <code class="literal">groupsummary</code>, and <code class="literal">groupcounts</code> functions to calculate various quantities of interest, such as the most common power outage cause in each region. Even though the raw data in this example only has about 1500 rows, you can use the techniques presented here on much larger data sets because no assumptions are made about the size of the data.</p><div class="procedure"><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-1">Create Datastore and Tall Timetable</h3><p>The sample file, <code class="literal">outages.csv</code>, contains data representing electric utility outages in the United States. The file contains six columns: <code class="literal">Region</code>, <code class="literal">OutageTime</code>, <code class="literal">Loss</code>, <code class="literal">Customers</code>, <code class="literal">RestorationTime</code>, and <code class="literal">Cause</code>. </p><p>Create a datastore for the <code class="literal">outages.csv</code> file. Use the <code class="literal">"TextScanFormats"</code> option to specify the kind of data each column contains: categorical (<code class="literal">"%C"</code>), floating-point numeric (<code class="literal">"%f"</code>), or datetime (<code class="literal">"%D"</code>).</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>data_formats = [<span style="color:#A020F0">"%C"</span>,<span style="color:#A020F0">"%D"</span>,<span style="color:#A020F0">"%f"</span>,<span style="color:#A020F0">"%f"</span>,<span style="color:#A020F0">"%D"</span>,<span style="color:#A020F0">"%C"</span>];
ds = tabularTextDatastore(<span style="color:#A020F0">"outages.csv"</span>,<span style="color:#A020F0">"TextscanFormats"</span>,data_formats);</pre></div></div></div><p>Create a tall table on top of the datastore, and convert the tall table into a tall timetable. The <code class="literal">OutageTime</code> variable is used for the row times since it is the first datetime or duration variable in the table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>T = tall(ds);
T = table2timetable(T)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>T =

  M×5 tall timetable

    OutageTime    Region    Loss    Customers    RestorationTime    Cause
    __________    ______    ____    _________    _______________    _____

        ?           ?        ?          ?               ?             ?  
        ?           ?        ?          ?               ?             ?  
        ?           ?        ?          ?               ?             ?  
        :           :        :          :               :             :
        :           :        :          :               :             :

Preview deferred. Learn more.
</pre></div></div></div><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-2">Replace Missing Data</h3><p>Some of the rows in the <code class="literal">RestorationTime</code> variable have missing times, represented by <code class="literal">NaT</code> values. Remove these rows from the table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>T = rmmissing(T,<span style="color:#A020F0">"DataVariables"</span>,<span style="color:#A020F0">"RestorationTime"</span>);</pre></div></div></div><p>For the numeric variables in the timetable, instead of removing rows with missing values, replace the missing values with the mean value for each region.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>T = grouptransform(T,<span style="color:#A020F0">"Region"</span>,<span style="color:#A020F0">"meanfill"</span>,[<span style="color:#A020F0">"Loss"</span>,<span style="color:#A020F0">"Customers"</span>]);</pre></div></div></div><p>Use <code class="literal">ismissing</code> to confirm that no pieces of missing data remain in the table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>tf = any(ismissing(T),<span style="color:#A020F0">"all"</span>);
gather(tf)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 4: Completed in 0.21 sec
- Pass 2 of 4: Completed in 0.41 sec
- Pass 3 of 4: Completed in 0.36 sec
- Pass 4 of 4: Completed in 0.34 sec
Evaluation completed in 2.1 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = <span class="emphasis"><em>logical</em></span>
   0

</pre></div></div></div><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-3">Preview Data</h3><p>Now that the data does not contain missing values, bring a small number of rows into memory to get an idea of what the data contains.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>gather(head(T))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 1: Completed in 0.2 sec
Evaluation completed in 0.29 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>8×5 timetable</em></span>
       OutageTime        Region       Loss     Customers     RestorationTime          Cause     
    ________________    _________    ______    __________    ________________    _______________

    2002-02-01 12:18    SouthWest    458.98    1.8202e+06    2002-02-07 16:50    winter storm   
    2003-02-07 21:15    SouthEast     289.4    1.4294e+05    2003-02-17 08:14    winter storm   
    2004-04-06 05:44    West         434.81    3.4037e+05    2004-04-06 06:10    equipment fault
    2002-03-16 06:18    MidWest      186.44    2.1275e+05    2002-03-18 23:23    severe storm   
    2003-06-18 02:49    West              0             0    2003-06-18 10:54    attack         
    2004-06-20 14:39    West         231.29    1.5354e+05    2004-06-20 19:16    equipment fault
    2002-06-06 19:28    West         311.86    1.5354e+05    2002-06-07 00:51    equipment fault
    2003-07-16 16:23    NorthEast    239.93         49434    2003-07-17 01:12    fire           

</pre></div></div></div><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-4">Mean Power Outage Duration by Region</h3><p>Determine the mean power outage duration in each region using <code class="literal">groupsummary</code>. First, create a new variable <code class="literal">OutageDuration</code> in the table that contains the duration of each outage, found by subtracting the outage time from the restoration time. In the call to <code class="literal">groupsummary</code>, specify:</p><div class="itemizedlist"><ul><li><p><code class="literal">"Region"</code> as the grouping variable</p></li><li><p><code class="literal">"mean"</code> as the computation method</p></li><li><p><code class="literal">"OutageDuration"</code> as the variable to operate on.</p></li></ul></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>T.OutageDuration = T.RestorationTime - T.OutageTime;
times = groupsummary(T,<span style="color:#A020F0">"Region"</span>,<span style="color:#A020F0">"mean"</span>,<span style="color:#A020F0">"OutageDuration"</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>times =

  M×3 tall table

    Region    GroupCount    mean_OutageDuration
    ______    __________    ___________________

      ?           ?                  ?         
      ?           ?                  ?         
      ?           ?                  ?         
      :           :                  :
      :           :                  :

Preview deferred. Learn more.
</pre></div></div></div><p>Change the display format of the duration results to be in days, and gather the results into memory. The results show the mean outage duration in each region, as well as the number of reported outages in each region.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>times.mean_OutageDuration.Format = <span style="color:#A020F0">"d"</span>;
times = gather(times)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.7 sec
- Pass 2 of 2: Completed in 0.4 sec
Evaluation completed in 1.5 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>times=<span class="emphasis"><em>5×3 table</em></span>
     Region      GroupCount    mean_OutageDuration
    _________    __________    ___________________

    MidWest         138            34.135 days    
    NorthEast       548             24.21 days    
    SouthEast       379            1.7013 days    
    SouthWest        25            2.4799 days    
    West            349            28.061 days    

</pre></div></div></div><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-5">Most Common Power Outage Causes by Region</h3><p>Determine how often each power outage cause occurs in each region. Use <code class="literal">groupcounts</code> with the <code class="literal">Cause</code> and <code class="literal">Region</code> variables as grouping variables. Gather the results into memory.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>causes = groupcounts(T,[<span style="color:#A020F0">"Cause"</span>,<span style="color:#A020F0">"Region"</span>]);
causes = gather(causes)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.21 sec
- Pass 2 of 2: Completed in 0.17 sec
Evaluation completed in 0.6 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>causes=<span class="emphasis"><em>43×4 table</em></span>
         Cause           Region      GroupCount    Percent 
    ________________    _________    __________    ________

    attack              MidWest          12         0.83391
    attack              NorthEast       135          9.3815
    attack              SouthEast        19          1.3204
    attack              West            126          8.7561
    earthquake          NorthEast         1        0.069493
    earthquake          West              1        0.069493
    energy emergency    MidWest          19          1.3204
    energy emergency    NorthEast        29          2.0153
    energy emergency    SouthEast        79          5.4899
    energy emergency    SouthWest         7         0.48645
    energy emergency    West             46          3.1967
    equipment fault     MidWest           9         0.62543
    equipment fault     NorthEast        17          1.1814
    equipment fault     SouthEast        40          2.7797
    equipment fault     SouthWest         2         0.13899
    equipment fault     West             85          5.9069
      &#x22EE;

</pre></div></div></div><p>Each cause occurs several times in the table, so even though the table contains the correct data it is not in the proper format to see how often each cause occurs in each region. To improve the presentation of the data, unstack the <code class="literal">GroupCount</code> variable so that each column corresponds to a region and each row corresponds to an outage cause.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>RegionCauses = gather(unstack(causes,<span style="color:#A020F0">"GroupCount"</span>,<span style="color:#A020F0">"Region"</span>,<span style="color:#A020F0">"GroupingVariables"</span>,<span style="color:#A020F0">"Cause"</span>))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>RegionCauses=<span class="emphasis"><em>10×6 table</em></span>
         Cause          MidWest    NorthEast    SouthEast    SouthWest    West
    ________________    _______    _________    _________    _________    ____

    attack                 12         135           19          NaN       126 
    earthquake            NaN           1          NaN          NaN         1 
    energy emergency       19          29           79            7        46 
    equipment fault         9          17           40            2        85 
    fire                  NaN           5            3          NaN        17 
    severe storm           30         139          132            6        22 
    thunder storm          31         102           54            6         7 
    unknown                 4          10            3          NaN         4 
    wind                   16          40           13            3        22 
    winter storm           17          70           36            1        19 

</pre></div></div></div><p>Not all combinations of outage causes and regions are represented in the data, so the resulting table contains some <code class="literal">NaN</code>s. Fill in the <code class="literal">NaN</code> values with zeros.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>RegionCauses = fillmissing(RegionCauses,<span style="color:#A020F0">"constant"</span>,{<span style="color:#A020F0">""</span>,0,0,0,0,0})</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>RegionCauses=<span class="emphasis"><em>10×6 table</em></span>
         Cause          MidWest    NorthEast    SouthEast    SouthWest    West
    ________________    _______    _________    _________    _________    ____

    attack                12          135           19           0        126 
    earthquake             0            1            0           0          1 
    energy emergency      19           29           79           7         46 
    equipment fault        9           17           40           2         85 
    fire                   0            5            3           0         17 
    severe storm          30          139          132           6         22 
    thunder storm         31          102           54           6          7 
    unknown                4           10            3           0          4 
    wind                  16           40           13           3         22 
    winter storm          17           70           36           1         19 

</pre></div></div></div><h3 class="title" id="GroupedStatisticsCalculationsWithTallArraysExample-6">Worst Power Outages in Each Region</h3><p>Calculate the broadest customer impact for each power outage in each region.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>WorstOutages = groupsummary(T,[<span style="color:#A020F0">"Region"</span>,<span style="color:#A020F0">"Cause"</span>],<span style="color:#A020F0">"max"</span>,<span style="color:#A020F0">"Customers"</span>);
WorstOutages = gather(WorstOutages)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Evaluating tall expression using the Local MATLAB Session:
- Pass 1 of 2: Completed in 0.13 sec
- Pass 2 of 2: Completed in 0.13 sec
Evaluation completed in 0.39 sec
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>WorstOutages=<span class="emphasis"><em>43×4 table</em></span>
     Region           Cause          GroupCount    max_Customers
    _________    ________________    __________    _____________

    MidWest      attack                  12         2.4403e+05  
    MidWest      energy emergency        19         5.0376e+05  
    MidWest      equipment fault          9         2.4403e+05  
    MidWest      severe storm            30          3.972e+06  
    MidWest      thunder storm           31         3.8233e+05  
    MidWest      unknown                  4         3.0879e+06  
    MidWest      wind                    16         2.8666e+05  
    MidWest      winter storm            17         7.7697e+05  
    NorthEast    attack                 135         1.5005e+05  
    NorthEast    earthquake               1                  0  
    NorthEast    energy emergency        29         1.5005e+05  
    NorthEast    equipment fault         17          1.667e+05  
    NorthEast    fire                     5         4.5139e+05  
    NorthEast    severe storm           139         1.0735e+06  
    NorthEast    thunder storm          102         5.9689e+06  
    NorthEast    unknown                 10         2.4983e+06  
      &#x22EE;

</pre></div></div></div><p>Combine the data in the <code class="literal">Region</code> and <code class="literal">Cause</code> variables into a single categorical variable by briefly converting them into strings. Then, create a categorical histogram of the maximum number of affected customers for each cause in each region.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>WorstOutages.RegionCause = categorical(string(WorstOutages.Region)+<span style="color:#A020F0">" ("</span>+string(WorstOutages.Cause)+<span style="color:#A020F0">")"</span>);
histogram(<span style="color:#A020F0">"Categories"</span>,WorstOutages.RegionCause,<span style="color:#A020F0">"BinCounts"</span>,WorstOutages.max_Customers,<span style="color:#0000FF">...</span>
    <span style="color:#A020F0">"DisplayOrder"</span>,<span style="color:#A020F0">"descend"</span>)
ylabel(<span style="color:#A020F0">"Max # Affected Customers"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e35793" class="mediaobject"><p><img src="../../examples/matlab/win64/GroupedStatisticsCalculationsWithTallArraysExample_01.png" alt="Figure contains an axes object. The axes object with ylabel Max # Affected Customers contains an object of type categoricalhistogram." width="560"></p></div></div></div>
<h2 id="d126e35800">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/findgroups.html"><span itemprop="name"><code class="function">findgroups</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/splitapply.html"><span itemprop="name"><code class="function">splitapply</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/tall.tall.html"><span itemprop="name"><code class="function">tall</code></span></a></span></p>

<h3 id="d126e35811">Topics</h3><ul class="list-unstyled"><li><a href="../matlab_prog/perform-calculations-by-group-in-table.html" class="a">Perform Calculations by Group in Table</a></li></ul>

</section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
