<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Create App to Display and Log Data from Serial Port GPS Device</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../serial-port-devices.html",
          "name": "Serial and USB Communication"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "serial-port-devices"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Create App to Display and Log Data from Serial Port GPS Device",
          "description": "Connect to a GPS device using serial port and log data to an app.",
          "thumbnailURL": "../../examples/matlab/win64/SerialPortGPSAppExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.SerialPortGPSAppExample",
          "name": "SerialPortGPSAppExample",
          "url": "create-an-app-to-connect-to-a-serial-port-gps-device-to-display-and-log-output.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/SerialPortGPSAppExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "SerialPortGPSAppExample.mlx",
        "SerialPortGPSApp.mlapp",
        "open.svg",
        "refresh.svg",
        "GPS_data.txt",
        "GPS_data_raw.txt",
        "replayGPSLogData.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Connect to a GPS device using serial port and log data to an app."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/SerialPortGPSAppExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../serial-port-devices.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_9e1b742e-0ade-4714-9ad1-5175c9fe16fd"><span itemprop="title">Serial and USB Communication</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Create App to Display and Log Data from Serial Port GPS Device</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#SerialPortGPSAppExample-1" class="nav-link intrnllnk">Design App Layout</a></li><li class="nav-item"><a href="#SerialPortGPSAppExample-2" class="nav-link intrnllnk">Write App Code</a></li><li class="nav-item"><a href="#SerialPortGPSAppExample-12" class="nav-link intrnllnk">Run App</a></li><li class="nav-item"><a href="#d126e23920" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=serial-port-devices&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=serial-port-devices&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=serial-port-devices&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=serial-port-devices&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=serial-port-devices&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=serial-port-devices&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="mw_a7ae3992-61f9-4bff-9f97-be4cd2f0b328"><strong class="emphasis bold">Create App to Display and Log Data from Serial Port GPS Device</strong></h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/SerialPortGPSAppExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-SerialPortGPSAppExample"><meta itemprop="exampletitle" content="Create App to Display and Log Data from Serial Port GPS Device"></div><span id="SerialPortGPSAppExample" class="anchor_target"></span><p class="shortdesc">This example shows how to create an app that connects to a serial port GPS device, reads and visualizes the data, and logs the data from the device to a file. </p><p>To run the app in this example, you need a GPS device that connects to a computer via serial port or USB virtual serial port and returns NMEA 0183 data. However, you can apply the same approach to other devices that use serial port communication. </p><div class="procedure"><h3 class="title" id="SerialPortGPSAppExample-1">Design App Layout</h3><p>Lay out the app in App Designer to provide controls for users based on the app goals. This app contains different layout sections for the different goals:</p><div class="itemizedlist"><ul><li><p>Connect to device &#8212; Create a panel with components for users to configure their device connection.  </p></li><li><p>Log data over time &#8212; Create a panel with components for users to start and stop data collection over a period of time and indicate the name of a file to store the logged data. </p></li><li><p>View live data in app &#8212; Create fields on the left of the app to display live information about the device connection, such as the GPS status and location.   </p></li><li><p>Visualize data &#8212; Create a tab group with data visualization options, such as a view of the location data on a map or of the data over time.   </p></li></ul></div><div class="informalfigure"><div id="d126e23593" class="mediaobject"><p><img src="../../examples/matlab/win64/SerialPortGPSAppExample_01.png" alt="Running app connected to a GPS device. The app contains an option to disconnect from the device, fields with live GPS data, and option to start logging data to a file, and a plot of the GPS." height="515" width="683"></p></div></div><h3 class="title" id="SerialPortGPSAppExample-2"><strong class="emphasis bold">Write App Code</strong></h3><p>Write your app code to perform these key tasks based on user interactions:  </p><div class="itemizedlist"><ul><li><p>Connect to serial port GPS device &#8212; Use the device configuration options to connect to a device using <code class="literal">serialport</code>.</p></li><li><p>Get live data from device &#8212; Use a callback set with <code class="literal">configureCallback</code> to control the asynchronous behavior in the app.</p></li><li><p>Log data to file &#8212; Write raw and processed data to two different files within the callback.</p></li><li><p>Plot data in various charts &#8212; Update the live views in the app within the callback.</p></li></ul></div><p>In addition, manage your app code to:  </p><div class="itemizedlist"><ul><li><p>Enable and disable app components to guide the user in the app workflow</p></li><li><p>Display errors in the app to alert the user to issues</p></li></ul></div><h4 class="title" id="SerialPortGPSAppExample-3"><strong class="emphasis bold">Connect to Serial Port GPS Device</strong></h4><p>When a user clicks the <strong class="emphasis bold">Connect</strong> button, use the <strong class="emphasis bold">Serial port</strong> and <strong class="emphasis bold">Baud rate</strong> values to connect to the device. </p><div class="informalfigure"><div id="d126e23639" class="mediaobject"><p><img src="../../examples/matlab/win64/SerialPortGPSAppExample_02.png" alt="Configuration panel in the app. The panel contains drop-down lists to select the serial port and baud rate, a refresh button, a connect button, and a disabled disconnect button." height="163" width="398"></p></div></div><p>First, create a private property named <code class="literal">SerialPort</code> to store the <code class="literal">serialport</code> object. You can use this property to access the object from anywhere in your code. Select <strong class="emphasis bold">Property &gt; Private Property</strong> from the <strong class="emphasis bold">Editor</strong> tab of the App Designer toolstrip to add the property. </p><p>To connect to a device when a user clicks the <strong class="emphasis bold">Connect</strong> button, use the <code class="literal">ConnectButtonPushed</code> callback. In the callback, connect to the specified serial port GPS device using the <code class="literal">serialport</code> function and the <code class="literal">SerialportDropDown</code> and <code class="literal">BaudrateDropDown</code> values. Save the <code class="literal">serialport</code> object in the <code class="literal">app.SerialPort</code> property.</p><div class="code_responsive"><pre id="d126e23673" class="programlisting">app.SerialPort = serialport(app.SerialportDropDown.Value,str2double(app.BaudrateDropDown.Value));
</pre></div><p>To disconnect the app from the serial port device when a user clicks <strong class="emphasis bold">Disconnect</strong>, use the <code class="literal">DisconnectButtonPushed</code> callback. In the callback, use the <code class="literal">delete</code> function to delete the <code class="literal">serialport</code> object and close the connection to the device. You cannot use the <code class="literal">clear</code> function to delete the object because it is stored in a property. </p><div class="code_responsive"><pre id="d126e23688" class="programlisting"><span style="color:#0000FF">function</span> DisconnectButtonPushed(app, event)
    delete(app.SerialPort)
    StopButtonPushed(app);
    setAppState(app,<span style="color:#A020F0">"DeviceSelection"</span>);
<span style="color:#0000FF">end</span>
</pre></div><h4 class="title" id="SerialPortGPSAppExample-4">Get Live Data from Device</h4><p>After the device is connected, you can get the live data by creating a callback that executes when the device receives a new line of data. </p><p>Create a function named <code class="literal">serialportCallback</code> in App Designer that handles new data from the device. This function must contain the app object as the first input argument to provide access to app properties and components. Define the callback to also accept the <code class="literal">serialport</code> object (<code class="literal">obj</code>) and serial port callback event data (<code class="literal">evt</code>).  </p><div class="code_responsive"><pre id="d126e23703" class="programlisting"><span style="color:#0000FF">function</span> serialportCallback(app,obj,evt)
    inputline = readline(obj);
    eventtime = datetime(evt.AbsTime,Format=<span style="color:#A020F0">'yyyy-MM-dd''T''HH:mm:ss.SSS'</span>);

    latestdata = processData(app,inputline,eventtime);

    <span style="color:#0000FF">if</span> app.Logging
        logData(app,inputline,latestdata);
    <span style="color:#0000FF">end</span>

    updateLiveView(app)
<span style="color:#0000FF">end</span>
</pre></div><p>You can set the <code class="literal">serialportCallback</code> callback function to trigger whenever a terminator is available to read using the <code class="literal">serialport</code> <code class="literal">configureCallback</code> function. The <code class="literal">configureCallback</code> function automatically passes the source object and event data to its callback, so you can specify the callback as an anonymous function. </p><div class="code_responsive"><pre id="d126e23715" class="programlisting">configureCallback(app.SerialPort,<span style="color:#A020F0">"terminator"</span>,@(obj,event) serialportCallback(app,obj,event))
</pre></div><h4 class="title" id="SerialPortGPSAppExample-5"><strong class="emphasis bold">Log Data to File</strong></h4><p>Users can write the data to a log file by starting and stopping the logged data collection and specifying the name of a file to store the data.  </p><div class="informalfigure"><div id="d126e23723" class="mediaobject"><p><img src="../../examples/matlab/win64/SerialPortGPSAppExample_03.png" alt="File Logging panel in the app. The panel contains a field to specify a file name, a start button, and a disabled stop button." height="162" width="402"></p></div></div><p>Write the raw and processed data in two different files: </p><div class="itemizedlist"><ul><li><p>Raw NMEA data &#8212; Log raw GPS sentence data line-by-line as the app receives it by using <code class="literal">writelines</code>.</p></li><li><p>Processed data &#8212; Log processed data as a comma-separated values (CSV) row after receiving all of the GPS sentence data for a single timestamp by using <code class="literal">writecell</code>.</p></li></ul></div><p>Create a function named <code class="literal">logToFile</code> to log data in these two formats.</p><div class="code_responsive"><pre id="d126e23743" class="programlisting"><span style="color:#0000FF">function</span> logToFile(app,inputline,row)
    dt = row{1};
    writelines(string(dt)+<span style="color:#A020F0">" "</span>+inputline,app.RawFilename,WriteMode=<span style="color:#A020F0">"append"</span>)
    <span style="color:#0000FF">if</span> app.CycleEnd
        writecell(row,app.FilenameEditField.Value,WriteMode=<span style="color:#A020F0">"append"</span>)
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span>
</pre></div><p>If your device requires an increased logging rate, consider using low-level file I/O operations instead. For more information, see <a href="../low-level-file-i-o.html" data-docid="matlab_doccenter#lowlevel-file-io" class="a">Low-Level File I/O</a>.</p><h4 class="title" id="SerialPortGPSAppExample-6"><strong class="emphasis bold">Plot Data in Various Charts</strong></h4><p>Visualize the data with various charts on different tabs:</p><div class="itemizedlist"><ul><li><p>Plot location data on a live map</p></li><li><p>Plot data over time on a line chart</p></li></ul></div><h4 class="title" id="SerialPortGPSAppExample-7">Plot Location Data on Map</h4><p>Plot the data on a map using geographic axes. Unlike other components, you must create geographic axes programmatically by calling the <code class="literal">geoaxes</code> function in your app <code class="literal">startupFcn</code>. To create a <code class="literal">startupFcn</code> callback, navigate to the <strong class="emphasis bold">Callbacks</strong> tab of the main app component in the <strong class="emphasis bold">Component Browser</strong> and select <strong class="emphasis bold">&lt;add StartupFcn callback&gt;</strong>. In your <code class="literal">startupFcn</code> code, store the geographic axes and plot objects in app properties.</p><div class="code_responsive"><pre id="d126e23781" class="programlisting">app.MapViewAxes = geoaxes(app.MapGrid);
app.MapViewAxes.Layout.Row = 1;
app.MapViewAxes.Layout.Column = [1 5];
app.MapViewPlot = geoplot(app.MapViewAxes,NaN,NaN,<span style="color:#A020F0">"r.-"</span>);
</pre></div><p>To update the plot with new data, update the <code class="literal">LatitudeData</code> and <code class="literal">LongitudeData</code> properties of the geographic plot in the <code class="literal">updateLiveView</code> function. </p><div class="code_responsive"><pre id="d126e23791" class="programlisting">set(app.MapViewPlot,<span style="color:#A020F0">"LatitudeData"</span>,latdata,<span style="color:#A020F0">"LongitudeData"</span>,longdata);
</pre></div><h4 class="title" id="SerialPortGPSAppExample-8">Plot Data over Time</h4><p>To display data over a time span, store the data in an app property and update this property as the app receives new data. For example, to plot the most recent 10 minutes of GPS location data, create an app property named <code class="literal">DataTable</code>. In a <code class="literal">processData</code> function, create and store a new row of data whenever the app receives new data from the device.</p><div class="code_responsive"><pre id="d126e23801" class="programlisting">newrow = {dt}
<span style="color:#0000FF">...</span>
newrow = {newrow{1}, app.FixType, app.Latitude, app.Longitude, app.Satellites, app.Altitude, app.HDOP, app.Course, app.Speed, app.UTCDate, app.UTCTime};
app.DataTable = [app.DataTable; newrow];
</pre></div><p>Read the <code class="literal">DataTable</code> property in the <code class="literal">updatePlotView</code> function to display the data.</p><div class="code_responsive"><pre id="d126e23809" class="programlisting"><span style="color:#0000FF">function</span> updatePlotView(app)
    filter = seconds(datetime(<span style="color:#A020F0">"now"</span>)-app.DataTable.ComputerTime) &lt; app.XDataDropDown.Value;
    x = app.DataTable.ComputerTime(filter);
    y = app.DataTable{filter,app.YDataDropDown.Value};
    set(app.Plot,<span style="color:#A020F0">"XData"</span>,x,<span style="color:#A020F0">"YData"</span>,y);
<span style="color:#0000FF">end</span>
</pre></div><h4 class="title" id="SerialPortGPSAppExample-9">Optimize Graphics Performance</h4><p>To optimize performance and reduce the time spent updating app graphics objects, update only the currently displayed graphics objects based on the open tab in the tab group. Use <code class="literal">switch/case</code> statements in the <code class="literal">updateLiveView</code> function to decide which graphics objects to update.</p><div class="code_responsive"><pre id="d126e23819" class="programlisting"><span style="color:#0000FF">switch</span> app.TabGroup.SelectedTab
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">"MapViewTab"</span>
        updateMapView(app,app.Logging);
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">"PlotViewTab"</span>
        updatePlotView(app);
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">"NMEALogTab"</span>
        updateNMEALog(app);
<span style="color:#0000FF">end</span>
</pre></div><h4 class="title" id="SerialPortGPSAppExample-10"><strong class="emphasis bold">Enable and Disable Components</strong></h4><p>You can enable and disable certain components of the app depending on where the user is in the workflow. For example, when the user is selecting the device, you can enable the <strong class="emphasis bold">Serial port </strong>drop-down component, <strong class="emphasis bold">Baud rate</strong> drop-down component, and <strong class="emphasis bold">Connect </strong>button. However, once the device is connected, you can disable those components and enable the <strong class="emphasis bold">Disconnect</strong> button.  </p><p>When a user interacts with this app, there are a few states that the app can appear in.</p><div class="itemizedlist"><ul><li><p>Device selection &#8212; The app is not connected to a device. Users can configure and connect to a device. Other options are disabled.   </p></li><li><p>Device connected &#8212; The app is connected to a device. Users can view the live data, interact with the visualizations, or disconnect from the device.  </p></li><li><p>Waiting for data &#8212; The app is waiting for new data from the connected device, and users can view the existing data.</p></li><li><p>Data Acquisition &#8212; The app is processing and logging new data from the connected device, and users can view the new data.</p></li></ul></div><p>To control which components are enabled, create a helper function named <code class="literal">setAppState</code> that sets the <code class="literal">Enable</code> property of the components.</p><div class="code_responsive"><pre id="d126e23855" class="programlisting"><span style="color:#0000FF">function</span> setAppState(app,state) 
    <span style="color:#0000FF">switch</span> state 
        <span style="color:#0000FF">case</span> <span style="color:#A020F0">"DeviceSelection"</span> 
            app.SerialportDropDown.Enable = <span style="color:#A020F0">"on"</span>; 
            app.ConnectButton.Enable = <span style="color:#A020F0">"on"</span>;
            app.DisconnectButton.Enable = <span style="color:#A020F0">"off"</span>;
            <span style="color:#0000FF">...</span><span style="color:#228B22"> </span>
        <span style="color:#0000FF">case</span> <span style="color:#A020F0">"Connected"</span> 
            <span style="color:#0000FF">...</span><span style="color:#228B22"> </span>
        <span style="color:#0000FF">case</span> <span style="color:#A020F0">"WaitForData"</span> 
            <span style="color:#0000FF">...</span><span style="color:#228B22"> </span>
        <span style="color:#0000FF">case</span> <span style="color:#A020F0">"Logging"</span> 
            <span style="color:#0000FF">...</span><span style="color:#228B22"> </span>
    <span style="color:#0000FF">end</span> 
<span style="color:#0000FF">end</span>
</pre></div><p>Call this helper function when you want to change the enabled buttons, such as after successfully connecting to a GPS device. To avoid a delay between setting the <code class="literal">Enable</code> property of a component and when the component appears as enabled or disabled in the app, use <code class="literal">drawnow</code>.</p><div class="code_responsive"><pre id="d126e23863" class="programlisting"><span style="color:#0000FF">function</span> ConnectButtonPushed(app, event)
    setAppState(app, <span style="color:#A020F0">"Connected"</span>);
    drawnow
    <span style="color:#0000FF">...</span>
<span style="color:#0000FF">end</span>
</pre></div><h4 class="title" id="SerialPortGPSAppExample-11"><strong class="emphasis bold">Display Errors in App</strong></h4><p>Set up in-app alerts to notify users of errors that occur while they use the app, rather than showing these errors in the Command Window. Wrap operations susceptible to user input errors within <code class="literal">try/catch</code> statements. For example, if an error occurs during device connection, use an alert dialog box to inform the app user of the error. </p><div class="code_responsive"><pre id="d126e23873" class="programlisting"><span style="color:#0000FF">try</span>
    app.SerialPort = serialport(app.SerialportDropDown.Value,str2double(app.BaudrateDropDown.Value));
<span style="color:#0000FF">catch</span> ME
    uialert(app.UIFigure,ME.message,<span style="color:#A020F0">"Serialport Connection Error"</span>,Interpreter=<span style="color:#A020F0">"html"</span>)
    setAppState(app,<span style="color:#A020F0">"DeviceSelection"</span>);
    <span style="color:#0000FF">return</span>
<span style="color:#0000FF">end</span>
</pre></div><p>Additionally, you can use the <code class="literal">uialert</code> function to enforce app expectations. For instance, to ensure app users log only to <code class="literal">.txt</code> files, use <code class="literal">uialert</code> to simulate an error and flag the restriction.</p><div class="code_responsive"><pre id="d126e23883" class="programlisting">[filepath, name, ext] = fileparts(filename);
<span style="color:#0000FF">if</span> ~strcmpi(ext,<span style="color:#A020F0">".txt"</span>)
    uialert(app.UIFigure,<span style="color:#A020F0">"File must be in .TXT format"</span>,<span style="color:#A020F0">"File Log Error"</span>)
    ext = <span style="color:#A020F0">".txt"</span>;
<span style="color:#0000FF">end</span>
</pre></div><h3 class="title" id="SerialPortGPSAppExample-12">Run App</h3><p>To run the app, click the <strong class="emphasis bold">Run</strong> button in App Designer. In the app, select a GPS device connected to your computer via serial port or USB virtual serial port. Then click <strong class="emphasis bold">Connect</strong>. To start logging to a file, specify a file name and use the <strong class="emphasis bold">Start </strong>and <strong class="emphasis bold">Stop</strong> buttons to collect the data.  </p><p>Load the logged data into MATLAB using <code class="literal">readtimetable</code>. </p><div class="code_responsive"><pre id="d126e23906" class="programlisting">data = readtimetable(<span style="color:#A020F0">"GPS_data.txt"</span>)
</pre></div><h4 class="title" id="SerialPortGPSAppExample-13">Run App Without GPS Device</h4><p>If you do not have a physical GPS device, an alternative method for running the app requires two serial ports or virtual serial ports connected to each other via a null modem cable. Use one port to simulate a GPS device by transmitting a raw log data file and the other port in a separate MATLAB session to receive data using the app.</p><p>From a separate MATLAB session, open the attached <code class="literal">replayGPSLogData</code> script for editing. In the script, specify the serial port to use and the raw log data file name. Then, run the script.</p><div class="code_responsive"><pre id="d126e23915" class="programlisting">edit <span style="color:#A020F0">replayGPSLogData</span>
</pre></div></div>
            <h2 id="d126e23920">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/serialport.html"><span itemprop="name"><code class="function">serialport</code></span></a></span></p>
            <h3 id="d126e23926">Topics</h3><ul class="list-unstyled"><li><a href="../creating_plots/improve-graphics-update-performance.html" class="a">Improve Graphics Performance</a></li><li><a href="../creating_guis/write-callbacks-for-gui-in-app-designer.html" class="a">Callbacks in App Designer</a></li><li><a href="../creating_guis/code-and-call-app-functions-in-app-designer.html" class="a">Reuse Code in Apps Using Helper Functions</a></li></ul>
            
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
