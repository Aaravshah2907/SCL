<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Dynamic Regular Expressions</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../language-fundamentals.html",
          "name": "Language Fundamentals"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-types.html",
          "name": "Data Types"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../characters-and-strings.html",
          "name": "Characters and Strings"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "characters-and-strings"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Use dynamic expressions to make the regexp pattern dependent on the content of the input text or in replacement terms for the regexprep function."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../language-fundamentals.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Language Fundamentals</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Types</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../characters-and-strings.html?s_tid=CRUX_lftnav" itemprop="url" id="characters-and-strings"><span itemprop="title">Characters and Strings</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Dynamic Regular Expressions</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#btrvvzy" class="nav-link intrnllnk">Introduction</a></li><li class="nav-item"><a href="#bqvj2w7-1" class="nav-link intrnllnk">Dynamic Match Expressions &#8212; (??expr)</a></li><li class="nav-item"><a href="#bqv20wc-1" class="nav-link intrnllnk">Commands That Modify the Match Expression &#8212; (??@cmd)</a></li><li class="nav-item"><a href="#bqv5tdl-1" class="nav-link intrnllnk">Commands That Serve a Functional Purpose &#8212; (?@cmd)</a></li><li class="nav-item"><a href="#bqvj29s" class="nav-link intrnllnk">Commands in Replacement Expressions &#8212; &#36;{cmd}</a></li><li class="nav-item"><a href="#d126e6883" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=characters-and-strings&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=characters-and-strings&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=characters-and-strings&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=characters-and-strings&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=characters-and-strings&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=characters-and-strings&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bqm4vbv-1">Dynamic Regular Expressions</h2><a class="indexterm" name="d126e6503"></a><a class="indexterm" name="d126e6505"></a><section><h3 class="title" id="btrvvzy">Introduction</h3><p>In a dynamic expression, you can make the pattern that you want <code class="function">regexp</code> to match dependent on the content of the input text. In this way, you can more closely match varying input patterns in the text being parsed. You can also use dynamic expressions in replacement terms for use with the <code class="function">regexprep</code> function. This gives you the ability to adapt the replacement text to the parsed input.</p><p>You can include any number of dynamic expressions in the <code class="literal">match_expr</code> or <code class="literal">replace_expr</code> arguments of these commands:</p><div class="code_responsive"><pre class="programlisting">regexp(text, match_expr)
regexpi(text, match_expr)
regexprep(text, match_expr, replace_expr)
</pre></div><p>As an example of a dynamic expression, the following <code class="function">regexprep</code> command correctly replaces the term <code class="literal">internationalization</code> with its abbreviated form, <code class="literal">i18n</code>. However, to use it on a different term such as <code class="literal">globalization</code>, you have to use a different replacement expression:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>match_expr = <span style="color:#A020F0">'(^\w)(\w*)(\w$)'</span>;

replace_expr1 = <span style="color:#A020F0">'$118$3'</span>;
regexprep(<span style="color:#A020F0">'internationalization'</span>, match_expr, replace_expr1)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'i18n'
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>replace_expr2 = <span style="color:#A020F0">'$111$3'</span>;
regexprep(<span style="color:#A020F0">'globalization'</span>, match_expr, replace_expr2)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'g11n'
</pre></div></div></div><p>Using a dynamic expression <code class="literal">&#36;{num2str(length($2))}</code> enables you to base the replacement expression on the input text so that you do not have to change the expression each time. This example uses the dynamic replacement syntax <code class="literal">&#36;{cmd}</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>match_expr = <span style="color:#A020F0">'(^\w)(\w*)(\w$)'</span>;
replace_expr = <span style="color:#A020F0">'$1&#36;{num2str(length($2))}$3'</span>;

regexprep(<span style="color:#A020F0">'internationalization'</span>, match_expr, replace_expr)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'i18n'
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'globalization'</span>, match_expr, replace_expr)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'g11n'
</pre></div></div></div><p>When parsed, a dynamic expression must correspond to a complete, valid regular expression. In addition, dynamic match expressions that use the backslash escape character (<code class="literal">\</code>) require two backslashes: one for the initial parsing of the expression, and one for the complete match. The parentheses that enclose dynamic expressions do <span class="emphasis"><em>not</em></span> create a capturing group.</p><p>There are three forms of dynamic expressions that you can use in match expressions, and one form for replacement expressions, as described in the following sections</p></section><section><h3 class="title" id="bqvj2w7-1">Dynamic Match Expressions &#8212; (??expr)</h3><a class="indexterm" name="d126e6566"></a><p>The <code class="literal">(??expr)</code> operator parses expression <code class="literal">expr</code>, and inserts the results back into the match expression. MATLAB<sup>&#x00AE;</sup> then evaluates the modified match expression.</p><p>Here is an example of the type of expression that you can use with this operator:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>chr = {<span style="color:#A020F0">'5XXXXX'</span>, <span style="color:#A020F0">'8XXXXXXXX'</span>, <span style="color:#A020F0">'1X'</span>};
regexp(chr, <span style="color:#A020F0">'^(\d+)(??X{$1})$'</span>, <span style="color:#A020F0">'match'</span>, <span style="color:#A020F0">'once'</span>);
</pre></div></div></div><p>The purpose of this particular command is to locate a series of <code class="literal">X</code> characters in each of the character vectors stored in the input cell array. Note however that the number of <code class="literal">X</code>s varies in each character vector. If the count did not vary, you could use the expression <code class="literal">X{n}</code> to indicate that you want to match <code class="literal">n</code> of these characters. But, a constant value of <code class="literal">n</code> does not work in this case.</p><p>The solution used here is to capture the leading count number (e.g., the <code class="literal">5</code> in the first character vector of the cell array) in a token, and then to use that count in a dynamic expression. The dynamic expression in this example is <code class="literal">(??X{$1})</code>, where <code class="literal">$1</code> is the value captured by the token <code class="literal">\d+</code>. The operator <code class="literal">{$1}</code> makes a quantifier of that token value. Because the expression is dynamic, the same pattern works on all three of the input vectors in the cell array. With the first input character vector, <code class="literal">regexp</code> looks for five <code class="literal">X</code> characters; with the second, it looks for eight, and with the third, it looks for just one:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexp(chr, <span style="color:#A020F0">'^(\d+)(??X{$1})$'</span>, <span style="color:#A020F0">'match'</span>, <span style="color:#A020F0">'once'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

  1×3 cell array

    {'5XXXXX'}    {'8XXXXXXXX'}    {'1X'}
</pre></div></div></div></section><section><h3 class="title" id="bqv20wc-1">Commands That Modify the Match Expression &#8212; (??@cmd)</h3><a class="indexterm" name="d126e6617"></a><p>MATLAB uses the <code class="literal">(??@cmd)</code> operator to include the results of a MATLAB command in the match expression. This command must return a term that can be used within the match expression.</p><p>For example, use the dynamic expression <code class="literal">(??@fliplr($1))</code> to
                locate a palindrome, “Never Odd or Even”, that has been embedded into
                a larger character vector.</p><p>First, create the input string. Make sure that all letters are lowercase, and remove all nonword characters.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>chr = lower(<span style="color:#0000FF">...</span>
  <span style="color:#A020F0">'Find the palindrome Never Odd or Even in this string'</span>);

chr = regexprep(chr, <span style="color:#A020F0">'\W*'</span>, <span style="color:#A020F0">''</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>chr =

    'findthepalindromeneveroddoreveninthisstring'
</pre></div></div></div><p>Locate the palindrome within the character vector using the dynamic expression:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>palindrome = regexp(chr, <span style="color:#A020F0">'(.{3,}).?(??@fliplr($1))'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>palindrome =

  1×1 cell array

    {'neveroddoreven'}
</pre></div></div></div><p>The dynamic expression reverses the order of the letters that make up the character vector, and then attempts to match as much of the reversed-order vector as possible. This requires a dynamic expression because the value for <code class="literal">$1</code> relies on the value of the token <code class="literal">(.{3,})</code>.</p><p>Dynamic expressions in MATLAB have access to the currently active workspace. This means that you can change any of the functions or variables used in a dynamic expression just by changing variables in the workspace. Repeat the last command of the example above, but this time define the function to be called within the expression using a function handle stored in the base workspace:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>fun = @fliplr;

palindrome = regexp(chr, <span style="color:#A020F0">'(.{3,}).?(??@fun($1))'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>palindrome =

  1×1 cell array

    {'neveroddoreven'}
</pre></div></div></div></section><section><h3 class="title" id="bqv5tdl-1">Commands That Serve a Functional Purpose &#8212; (?@cmd)</h3><a class="indexterm" name="d126e6662"></a><p>The <code class="literal">(?@cmd)</code> operator specifies a MATLAB command that <a href="../ref/regexp.html"><code class="function">regexp</code></a> or <a href="../ref/regexprep.html"><code class="function">regexprep</code></a> is to run while parsing the overall match expression. Unlike the other dynamic expressions in MATLAB, this operator does not alter the contents of the expression it is used in. Instead, you can use this functionality to get MATLAB to report just what steps it is taking as it parses the contents of one of your regular expressions. This functionality can be useful in diagnosing your regular expressions.</p><p>The following example parses a word for zero or more characters followed by two identical characters followed again by zero or more characters:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexp(<span style="color:#A020F0">'mississippi'</span>, <span style="color:#A020F0">'\w*(\w)\1\w*'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

  1×1 cell array

    {'mississippi'}
</pre></div></div></div><p>To track the exact steps that MATLAB takes in determining the match, the example inserts a short script <code class="literal">(?@disp($1))</code> in the expression to display the characters that finally constitute the match. Because the example uses greedy quantifiers, MATLAB attempts to match as much of the character vector as possible. So, even though MATLAB finds a match toward the beginning of the string, it continues to look for more matches until it arrives at the very end of the string. From there, it backs up through the letters <code class="literal">i</code> then <code class="literal">p</code> and the next <code class="literal">p</code>, stopping at that point because the match is finally satisfied:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexp(<span style="color:#A020F0">'mississippi'</span>, <span style="color:#A020F0">'\w*(\w)(?@disp($1))\1\w*'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>i
p
p

ans =

  1×1 cell array

    {'mississippi'}
</pre></div></div></div><p>Now try the same example again, this time making the first quantifier lazy (<code class="literal">*?</code>). Again, MATLAB makes the same match:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexp(<span style="color:#A020F0">'mississippi'</span>, <span style="color:#A020F0">'\w*?(\w)\1\w*'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

  1×1 cell array

    {'mississippi'}
</pre></div></div></div><p>But by inserting a dynamic script, you can see that this time, MATLAB has matched the text quite differently. In this case, MATLAB uses the very first match it can find, and does not even consider the rest of the text:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexp(<span style="color:#A020F0">'mississippi'</span>, <span style="color:#A020F0">'\w*?(\w)(?@disp($1))\1\w*'</span>, <span style="color:#A020F0">'match'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>m
i
s

ans =

  1×1 cell array

    {'mississippi'}
</pre></div></div></div><p>To demonstrate how versatile this type of dynamic expression can be, consider the next example that progressively assembles a cell array as MATLAB iteratively parses the input text. The <code class="literal">(?!)</code> operator found at the end of the expression is actually an empty lookahead operator, and forces a failure at each iteration. This forced failure is necessary if you want to trace the steps that MATLAB is taking to resolve the expression.</p><p>MATLAB makes a number of passes through the input text, each time trying another combination of letters to see if a fit better than last match can be found. On any passes in which no matches are found, the test results in an empty character vector. The dynamic script <code class="literal">(?@if(~isempty($&amp;)))</code> serves to omit the empty character vectors from the <code class="literal">matches</code> cell array:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>matches = {};
expr = [<span style="color:#A020F0">'(Euler\s)?(Cauchy\s)?(Boole)?(?@if(~isempty($&amp;)),'</span> <span style="color:#0000FF">...</span>
   <span style="color:#A020F0">'matches{end+1}=$&amp;;end)(?!)'</span>];

regexp(<span style="color:#A020F0">'Euler Cauchy Boole'</span>, expr);

matches
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>matches =

  1×6 cell array

    {'Euler Cauchy Bo…'}    {'Euler Cauchy '}    {'Euler '}    {'Cauchy Boole'}    {'Cauchy '}    {'Boole'}
</pre></div></div></div><p>The operators <code class="literal">$&amp;</code> (or the equivalent <code class="literal">$0</code>), <code class="literal">$`</code>, and <code class="literal">$'</code> refer to that part of the input text that is currently a match, all characters that precede the current match, and all characters to follow the current match, respectively. These operators are sometimes useful when working with dynamic expressions, particularly those that employ the <code class="literal">(?@cmd)</code> operator.</p><p>This example parses the input text looking for the letter <code class="literal">g</code>. At each iteration through the text, <code class="function">regexp</code> compares the current character with <code class="literal">g</code>, and not finding it, advances to the next character. The example tracks the progress of scan through the text by marking the current location being parsed with a <code class="literal">^</code> character.</p><p>(The <code class="literal">$`</code> and <code class="literal">$´</code> operators capture that part of the text that precedes and follows the current parsing location. You need two single-quotation marks (<code class="literal">$''</code>) to express the sequence <code class="literal">$´</code> when it appears within text.)</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>chr = <span style="color:#A020F0">'abcdefghij'</span>;
expr = <span style="color:#A020F0">'(?@disp(sprintf(''starting match: [%s^%s]'',$`,$'')))g'</span>;

regexp(chr, expr, <span style="color:#A020F0">'once'</span>);
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>starting match: [^abcdefghij]
starting match: [a^bcdefghij]
starting match: [ab^cdefghij]
starting match: [abc^defghij]
starting match: [abcd^efghij]
starting match: [abcde^fghij]
starting match: [abcdef^ghij]
</pre></div></div></div></section><section><h3 class="title" id="bqvj29s">Commands in Replacement Expressions &#8212; &#36;{cmd}</h3><a class="indexterm" name="d126e6800"></a><p>The <code class="literal">&#36;{cmd}</code> operator modifies the contents of a regular expression replacement pattern, making this pattern adaptable to parameters in the input text that might vary from one use to the next. As with the other dynamic expressions used in MATLAB, you can include any number of these expressions within the overall replacement expression.</p><p>Commands in replacement expressions only check the local workspace for variables.
                Caller and global workspaces are not available to commands in replacement
                expressions</p><p>In the <code class="literal">regexprep</code> call shown here, the replacement pattern is <code class="literal">'&#36;{convertMe($1,$2)}'</code>. In this case, the entire replacement pattern is a dynamic expression:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'This highway is 125 miles long'</span>, <span style="color:#0000FF">...</span>
          <span style="color:#A020F0">'(\d+\.?\d*)\W(\w+)'</span>, <span style="color:#A020F0">'&#36;{convertMe($1,$2)}'</span>);
</pre></div></div></div><p>The dynamic expression tells MATLAB to execute a function named <code class="literal">convertMe</code> using the two tokens <code class="literal">(\d+\.?\d*)</code> and <code class="literal">(\w+)</code>, derived from the text being matched, as input arguments in the call to <code class="literal">convertMe</code>. The replacement pattern requires a dynamic expression because the values of <code class="literal">$1</code> and <code class="literal">$2</code> are generated at runtime.</p><p>The following example defines the file named <code class="literal">convertMe</code> that converts measurements from imperial units to metric.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">function</span> valout  = convertMe(valin, units)
<span style="color:#0000FF">switch</span>(units)
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">'inches'</span>
        fun = @(in)in .* 2.54;
        uout = <span style="color:#A020F0">'centimeters'</span>;
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">'miles'</span>
        fun = @(mi)mi .* 1.6093;
        uout = <span style="color:#A020F0">'kilometers'</span>;
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">'pounds'</span>
        fun = @(lb)lb .* 0.4536;
        uout = <span style="color:#A020F0">'kilograms'</span>;
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">'pints'</span>
        fun = @(pt)pt .* 0.4731;
        uout = <span style="color:#A020F0">'litres'</span>;
    <span style="color:#0000FF">case</span> <span style="color:#A020F0">'ounces'</span>
        fun = @(oz)oz .* 28.35;
        uout = <span style="color:#A020F0">'grams'</span>;
<span style="color:#0000FF">end</span>
val = fun(str2num(valin));
valout = [num2str(val) <span style="color:#A020F0">' '</span> uout];
<span style="color:#0000FF">end</span>
</pre></div></div></div><p>At the command line, call the <code class="literal">convertMe</code> function from <code class="literal">regexprep</code>, passing in values for the quantity to be converted and name of the imperial unit:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'This highway is 125 miles long'</span>, <span style="color:#0000FF">...</span>
          <span style="color:#A020F0">'(\d+\.?\d*)\W(\w+)'</span>, <span style="color:#A020F0">'&#36;{convertMe($1,$2)}'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'This highway is 201.1625 kilometers long'
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'This pitcher holds 2.5 pints of water'</span>, <span style="color:#0000FF">...</span>
          <span style="color:#A020F0">'(\d+\.?\d*)\W(\w+)'</span>, <span style="color:#A020F0">'&#36;{convertMe($1,$2)}'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'This pitcher holds 1.1828 litres of water'
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'This stone weighs about 10 pounds'</span>, <span style="color:#0000FF">...</span>
          <span style="color:#A020F0">'(\d+\.?\d*)\W(\w+)'</span>, <span style="color:#A020F0">'&#36;{convertMe($1,$2)}'</span>)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'This stone weighs about 4.536 kilograms'
</pre></div></div></div><p>As with the <code class="literal">(??@ )</code> operator discussed in an earlier section, the <code class="literal">&#36;{ }</code> operator has access to variables in the currently active workspace. The following <code class="literal">regexprep</code> command uses the array <code class="literal">A</code> defined in the base workspace:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>A = magic(3)
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>A =

     8     1     6
     3     5     7
     4     9     2
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>regexprep(<span style="color:#A020F0">'The columns of matrix _nam are _val'</span>, <span style="color:#0000FF">...</span>
          {<span style="color:#A020F0">'_nam'</span>, <span style="color:#A020F0">'_val'</span>}, <span style="color:#0000FF">...</span>
          {<span style="color:#A020F0">'A'</span>, <span style="color:#A020F0">'&#36;{sprintf(''%d%d%d '', A)}'</span>})
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans =

    'The columns of matrix A are 834 159 672'
</pre></div></div></div></section>
            <h2 id="d126e6883">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/regexp.html"><span itemprop="name"><code class="function">regexp</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/regexpi.html"><span itemprop="name"><code class="function">regexpi</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/regexprep.html"><span itemprop="name"><code class="function">regexprep</code></span></a></span></p>
            <h3 id="d126e6895">Topics</h3><ul class="list-unstyled"><li><a href="regular-expressions.html" class="a">Regular Expressions</a></li></ul>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
