<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Create an Interactive Narrative Using the Live Editor</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../programming-and-data-types.html",
          "name": "Programming"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../live-scripts-and-functions.html",
          "name": "Live Scripts and Functions"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "live-scripts-and-functions"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Create an Interactive Narrative Using the Live Editor",
          "description": "The following is an example of how to create an interactive narrative in the Live Editor. An interactive narrative ties together the computations that you use to solve a problem. This example shows how to:",
          "thumbnailURL": "../../examples/matlab/win64/LiveEditorInteractiveNarrative_04.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.LiveEditorInteractiveNarrative",
          "name": "LiveEditorInteractiveNarrative",
          "url": "live-editor-intteractive-narrative.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/LiveEditorInteractiveNarrative')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "LiveEditorInteractiveNarrative.mlx",
        "panelRadiation.m",
        "LatitudeVsTilt.mat"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="The following is an example of how to create an interactive narrative in the Live Editor."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/LiveEditorInteractiveNarrative_04.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/livecontrolpopover.js"></script>





<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../programming-and-data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Programming</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../live-scripts-and-functions.html?s_tid=CRUX_lftnav" itemprop="url" id="bu48std"><span itemprop="title">Live Scripts and Functions</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Create an Interactive Narrative Using the Live Editor</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-1" class="nav-link intrnllnk">Overall Approach</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-2" class="nav-link intrnllnk">Solar Time</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-3" class="nav-link intrnllnk">Solar Declination and Elevation</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-4" class="nav-link intrnllnk">Air Mass and Solar Radiation</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-5" class="nav-link intrnllnk">Solar Radiation on Fixed Panels</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-6" class="nav-link intrnllnk">Panel Radiation and Power Generation for a Single Day</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-9" class="nav-link intrnllnk">Power Generation for the Whole Year</a></li><li class="nav-item"><a href="#LiveEditorInteractiveNarrative-11" class="nav-link intrnllnk">Extend the Analysis</a></li><li class="nav-item"><a href="#seealsoref" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=live-scripts-and-functions&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="bu71312">Create an Interactive Narrative Using the Live Editor</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/LiveEditorInteractiveNarrative')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-LiveEditorInteractiveNarrative"><meta itemprop="exampletitle" content="Create an Interactive Narrative Using the Live Editor"></div><span id="LiveEditorInteractiveNarrative" class="anchor_target"></span><p class="shortdesc">The following is an example of how to create an interactive narrative in the Live Editor. An interactive narrative ties together the computations that you use to solve a problem. This example shows how to:</p><div class="itemizedlist"><ul><li><p>Display output together with your MATLAB&#174; code.</p></li><li><p>Use formatted text to describe your approach.</p></li><li><p>Use equations to describe the underlying mathematics.</p></li><li><p>Use images to illustrate important points.</p></li><li><p>Add links to background material.</p></li><li><p>Use controls to modify parameters and re-run the analysis.</p></li><li><p>Plot data for visualization.</p></li><li><p>Invite colleagues to extend your analysis.</p></li></ul></div><div class="procedure"><h3 class="title" id="LiveEditorInteractiveNarrative-1">Overall Approach</h3><p>Include formatted text as part of the interactive narrative. Use bold, italic, and underlined text to highlight important words. Use bullets or numbers to format lists.</p><p>Estimate the <span class="emphasis"><em>power output</em></span> from a typical solar panel installation on a specific date, time, and location by calculating the following:</p><div class="itemizedlist"><ul><li><p>Solar time</p></li><li><p>Solar declination and solar elevation</p></li><li><p>Air mass and the solar radiation reaching the earth's surface</p></li><li><p>Radiation on a solar panel given its position, tilt, and efficiency</p></li><li><p>Power generated in a day and over the entire year</p></li></ul></div><p>Use the results of these calculations to plot solar and panel radiation for the example day and location. Then, plot the expected panel power generation over the course of a year. To streamline the analysis, use two MATLAB functions created for this example: <code class="literal">solarCorrection</code> and <code class="literal">panelRadiation</code>.</p><h3 class="title" id="LiveEditorInteractiveNarrative-2">Solar Time</h3><p>Show output together with the code that produced it. To run a section of code, go to the <strong class="emphasis bold">Live Editor</strong> tab and click the <strong class="emphasis bold">Run Section</strong> button.</p><p>Power generation in a solar panel depends on how much solar radiation reaches the panel. This in turn depends on the sun's position relative to the panel as the sun moves across the sky. For example, suppose that you want to calculate power output for a solar panel on <span class="emphasis underline">June 1st at 12 noon in Boston, Massachusetts.</span></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lambda = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_05.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="-71.06" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">-71.06</span></span>;                              <span style="color:#228B22">% longitude</span>
phi = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_06.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="42.36" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">42.36</span></span>;                                  <span style="color:#228B22">% latitude</span>
UTCoff = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_07.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="'-5'" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">'-5'</span></span>;                              <span style="color:#228B22">% UTC offset </span>
january1  = datetime(2019,1,1);                            <span style="color:#228B22">% January 1st</span>
localTime = datetime(2019,6,1,12,0,0)                      <span style="color:#228B22">% Noon on June 1</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>localTime = <span class="emphasis"><em>datetime</em></span>
   01-Jun-2019 12:00:00

</pre></div></div></div><p>To calculate the sun's position for a given date and time, use <span class="emphasis"><em>solar time</em></span>. Twelve noon solar time is the time when the sun is highest in the sky. To calculate solar time, apply a correction to local time. That correction has two parts:</p><div class="itemizedlist"><ul><li><p>A term which corrects for the difference between the observer's location and the local meridian.</p></li><li><p>An orbital term related to the earth's orbital eccentricity and axial tilt.</p></li></ul></div><p>Calculate solar time using the <code class="literal">solarCorrection</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>d = caldays(between(january1,localTime,<span style="color:#A020F0">'Day'</span>));            <span style="color:#228B22">% Day of year</span>
solarCorr = solarCorrection(d,lambda,str2double(UTCoff));              <span style="color:#228B22">% Correction to local time</span>
solarTime = localTime + minutes(solarCorr)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>solarTime = <span class="emphasis"><em>datetime</em></span>
   01-Jun-2019 12:18:15

</pre></div></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-3">Solar Declination and Elevation</h3><p>Include equations to describe the underlying mathematics. Create equations using LaTeX commands. To add a new equation, go to the <strong class="emphasis bold">Insert</strong> tab and click the <strong class="emphasis bold">Equation</strong> button. Double-click an equation to edit it in the Equation Editor.</p><p>The solar declination (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>δ</mi></mrow></math></span>) is the angle of the sun relative to the earth's equatorial plane. The solar declination is <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mn>0</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></math></span> at the vernal and autumnal equinoxes, and rises to a maximum of <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mn>23</mn><mo>.</mo><mn>45</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></math></span> at the summer solstice. Calculate the solar declination for a given day of the year (<span class="emphasis"><em>d</em></span>) using the equation</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>δ</mi><mo>=</mo><msup><mrow><mi mathvariant="normal">sin</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mi mathvariant="normal">sin</mi><mo stretchy="false">(</mo><mn>2</mn><mn>3</mn><mo stretchy="false">.</mo><mn>4</mn><mn>5</mn><mo stretchy="false">)</mo><mi mathvariant="normal">sin</mi><mrow><mo>(</mo><mfrac><mrow><mn>3</mn><mn>6</mn><mn>0</mn></mrow><mrow><mn>3</mn><mn>6</mn><mn>5</mn></mrow></mfrac><mo stretchy="false">(</mo><mi>d</mi><mo>-</mo><mn>8</mn><mn>1</mn><mo stretchy="false">)</mo><mo>)</mo></mrow><mo>)</mo></mrow></mrow></math></p></div><p></p><p>Then, use the declination (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>δ</mi></mrow></math></span>), the latitude (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>ϕ</mi></mrow></math></span>), and the hour angle (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>ω</mi></mrow></math></span>) to calculate the sun's elevation (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>α</mi></mrow></math></span>) at the current time. The hour angle is the number of degrees of rotation of the earth between the current solar time and solar noon.  </p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>α</mi><mo>=</mo><msup><mrow><mi mathvariant="normal">sin</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mi mathvariant="normal">sin</mi><mi>δ</mi><mi mathvariant="normal">sin</mi><mi>ϕ</mi><mo>+</mo><mi mathvariant="normal">cos</mi><mi>δ</mi><mi mathvariant="normal">cos</mi><mi>ϕ</mi><mi mathvariant="normal">cos</mi><mi>ω</mi><mo>)</mo></mrow></mrow></math></p></div><p></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>delta = asind(sind(23.45)*sind(360*(d - 81)/365));         <span style="color:#228B22">% Declination</span>
omega = 15*(solarTime.Hour + solarTime.Minute/60 - 12);    <span style="color:#228B22">% Hour angle</span>
alpha = asind(sind(delta)*sind(phi) + <span style="color:#0000FF">...</span><span style="color:#228B22">                  % Elevation</span>
     cosd(delta)*cosd(phi)*cosd(omega));
disp([<span style="color:#A020F0">'Solar Declination = '</span> num2str(delta) <span style="color:#A020F0">'   Solar Elevation = '</span> num2str(alpha)])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Solar Declination = 21.8155   Solar Elevation = 69.113
</pre></div></div></div><p>Calculate the time of sunrise and sunset in Standard Time using the sun's declination and the local latitude. </p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>s</mi><mi>u</mi><mi>n</mi><mi>r</mi><mi>i</mi><mi>s</mi><mi>e</mi><mo>=</mo><mn>1</mn><mn>2</mn><mo>-</mo><mfrac><mrow><msup><mrow><mi mathvariant="normal">cos</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mo>-</mo><mi mathvariant="normal">tan</mi><mi>ϕ</mi><mi mathvariant="normal">tan</mi><mi>δ</mi><mo>)</mo></mrow></mrow><mrow><mn>1</mn><msup><mrow><mn>5</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></mfrac><mo>-</mo><mfrac><mrow><mi>s</mi><mi>o</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>C</mi><mi>o</mi><mi>r</mi><mi>r</mi></mrow><mrow><mn>6</mn><mn>0</mn></mrow></mfrac><mspace width="2em"/><mspace width="2em"/><mi>s</mi><mi>u</mi><mi>n</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo>=</mo><mn>1</mn><mn>2</mn><mo>+</mo><mfrac><mrow><msup><mrow><mi mathvariant="normal">cos</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mo>-</mo><mi mathvariant="normal">tan</mi><mi>ϕ</mi><mi mathvariant="normal">tan</mi><mi>δ</mi><mo>)</mo></mrow></mrow><mrow><mn>1</mn><msup><mrow><mn>5</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></mfrac><mo>-</mo><mfrac><mrow><mi>s</mi><mi>o</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>C</mi><mi>o</mi><mi>r</mi><mi>r</mi></mrow><mrow><mn>6</mn><mn>0</mn></mrow></mfrac></mrow></math></p></div><p></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>midnight = dateshift(localTime,<span style="color:#A020F0">'start'</span>,<span style="color:#A020F0">'day'</span>);
sr = 12 - acosd(-tand(phi)*tand(delta))/15 - solarCorr/60;
sunrise = timeofday(midnight + hours(sr));
ss = 12 + acosd(-tand(phi)*tand(delta))/15 - solarCorr/60;
sunset = timeofday(midnight + hours(ss));

sunrise.Format = <span style="color:#A020F0">'hh:mm:ss'</span>;
sunset.Format = <span style="color:#A020F0">'hh:mm:ss'</span>;
disp(<span style="color:#A020F0">'Sunrise = '</span> + string(sunrise) + <span style="color:#A020F0">'   Sunset = '</span> + string(sunset))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Sunrise = 04:16:06   Sunset = 19:07:22
</pre></div></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-4">Air Mass and Solar Radiation</h3><p>Include images to illustrate important points in your story. To include an image, copy and paste an image from another source or go to the <strong class="emphasis bold">Insert</strong> tab and click the <strong class="emphasis bold">Image</strong> button.</p><p>As light from the sun passes through the earth's atmosphere, some of the solar radiation is absorbed. Air mass is the length of the path of light through the atmosphere (Y) relative to the shortest possible path (X) when the sun's elevation is 90<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><msup><mrow/><mrow><mo>∘</mo></mrow></msup></mrow></math></span>, as shown in the diagram below. It is a function of solar elevation (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>α</mi></mrow></math></span>).</p><div class="informalfigure"><div id="d126e47813" class="mediaobject"><p><img src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_01.png" height="221" width="401"></p></div></div><p>The larger the air mass, the less radiation reaches the ground. Calculate the air mass using the equation</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>a</mi><mi>i</mi><mi>r</mi><mi>M</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi mathvariant="normal">cos</mi><mo stretchy="false">(</mo><mn>9</mn><mn>0</mn><mo>-</mo><mi>α</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0</mn><mo stretchy="false">.</mo><mn>5</mn><mn>0</mn><mn>5</mn><mn>7</mn><mo stretchy="false">(</mo><mn>6</mn><mo stretchy="false">.</mo><mn>0</mn><mn>7</mn><mn>9</mn><mn>9</mn><mo>+</mo><mi>α</mi><msup><mrow><mo stretchy="false">)</mo></mrow><mrow><mo>-</mo><mn>1</mn><mo stretchy="false">.</mo><mn>6</mn><mn>3</mn><mn>6</mn><mn>4</mn></mrow></msup><mo stretchy="false">.</mo></mrow></mfrac></mrow></math></p></div><p></p><p>Then, calculate the solar radiation reaching the ground (in kilowatts per square meter) using the empirical equation</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>s</mi><mi>o</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>R</mi><mi>a</mi><mi>d</mi><mo>=</mo><mn>1</mn><mo stretchy="false">.</mo><mn>3</mn><mn>5</mn><mn>3</mn><mo>*</mo><mn>0</mn><mo stretchy="false">.</mo><msup><mrow><mn>7</mn></mrow><mrow><mi>A</mi><msup><mrow><mi>M</mi></mrow><mrow><mn>0</mn><mo stretchy="false">.</mo><mn>6</mn><mn>7</mn><mn>8</mn></mrow></msup></mrow></msup><mo stretchy="false">.</mo></mrow></math></p></div><p></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>airMass = 1/(cosd(90-alpha) + 0.50572*(6.07955+alpha)^-1.6354);
solarRad = 1.353*0.7^(airMass^0.678);                           <span style="color:#228B22">% kW/m^2</span>
disp([<span style="color:#A020F0">'Air Mass = '</span> num2str(airMass) <span style="color:#A020F0">'   Solar Radiation = '</span> num2str(solarRad) <span style="color:#A020F0">' kW/m^2'</span>])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Air Mass = 1.0698   Solar Radiation = 0.93141 kW/m^2
</pre></div></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-5">Solar Radiation on Fixed Panels</h3><p>Use hyperlinks to reference supporting information from other sources. To add a hyperlink, go to the <strong class="emphasis bold">Insert</strong> tab and click the <strong class="emphasis bold">Hyperlink</strong> button.</p><p>Panels installed with a solar tracker can move with the sun and receive 100% of the sun's radiation as the sun moves across the sky. However, most solar cell installations have panels set at a fixed azimuth and tilt. Therefore, the actual radiation reaching the panel also depends on the <a href="https://www.sciencedirect.com/topics/engineering/solar-azimuth-angle" target="_blank">solar azimuth</a>. The solar azimuth (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>γ</mi></mrow></math></span>) is the compass direction of the sun's position in the sky. At solar noon in the Northern hemisphere the solar azimuth is<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true"><msup><mrow><mn>180</mn></mrow><mrow><mo>∘</mo></mrow></msup></math></span> corresponding to the direction south. Calculate the solar azimuth using the equation</p><p></p>
<div class="code_responsive"><p class="programlistingindent"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>γ</mi><mo>=</mo><mrow><mo>{</mo><mtable columnalign="left left"><mtr><mtd><mrow><msup><mrow><mi mathvariant="normal">cos</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mfrac><mrow><mi mathvariant="normal">sin</mi><mi>δ</mi><mi mathvariant="normal">cos</mi><mi>ϕ</mi><mo>-</mo><mi mathvariant="normal">cos</mi><mi>δ</mi><mi mathvariant="normal">sin</mi><mi>ϕ</mi><mi mathvariant="normal">cos</mi><mi>ω</mi></mrow><mrow><mi mathvariant="normal">cos</mi><mi>α</mi></mrow></mfrac><mo>)</mo></mrow></mrow></mtd><mtd><mrow><mrow><mrow><mtext>for</mtext><mtext>&nbsp;</mtext><mtext>solar</mtext><mtext>&nbsp;</mtext><mtext>time</mtext><mtext>&nbsp;</mtext><mstyle mathvariant=""><mrow><mo stretchy="false">≤</mo><mn>1</mn><mn>2</mn></mrow></mstyle></mrow></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mn>3</mn><mn>6</mn><msup><mrow><mn>0</mn></mrow><mrow><mo>∘</mo></mrow></msup><mo>-</mo><msup><mrow><mi mathvariant="normal">cos</mi></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mfrac><mrow><mi mathvariant="normal">sin</mi><mi>δ</mi><mi mathvariant="normal">cos</mi><mi>ϕ</mi><mo>-</mo><mi mathvariant="normal">cos</mi><mi>δ</mi><mi mathvariant="normal">sin</mi><mi>ϕ</mi><mi mathvariant="normal">cos</mi><mi>ω</mi></mrow><mrow><mi mathvariant="normal">cos</mi><mi>α</mi></mrow></mfrac><mo>)</mo></mrow></mrow></mtd><mtd><mrow><mrow><mrow><mtext>for</mtext><mtext>&nbsp;</mtext><mtext>solar</mtext><mtext>&nbsp;</mtext><mtext>time</mtext><mtext>&nbsp;</mtext><mstyle mathvariant=""><mrow><mo>&gt;</mo><mn>1</mn><mn>2</mn></mrow></mstyle></mrow></mrow></mrow></mtd></mtr></mtable></mrow></mrow></math></p></div><p></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>gamma = acosd((sind(delta)*cosd(phi) - cosd(delta)*sind(phi)*cosd(omega))/cosd(alpha));
<span style="color:#0000FF">if</span> (hour(solarTime) &gt;= 12) &amp;&amp; (omega &gt;= 0)
    gamma = 360 - gamma;
<span style="color:#0000FF">end</span>
disp([<span style="color:#A020F0">'Solar Azimuth = '</span> num2str(gamma)])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Solar Azimuth = 191.7888
</pre></div></div></div><p>In the northern hemisphere, a typical solar panel installation has panels oriented toward the south with a panel azimuth (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>β</mi></mrow></math></span>) of <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mn>180</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></math></span>. At northern latitudes, a typical tilt angle (<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>τ</mi></mrow></math></span>) is <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mn>35</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></math></span>. Calculate the panel radiation for fixed panels from the total solar radiation using the equation</p><p class="displayequation"><span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="block"><mrow><mi>p</mi><mi>a</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>R</mi><mi>a</mi><mi>d</mi><mo>=</mo><mi>s</mi><mi>o</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>R</mi><mi>a</mi><mi>d</mi><mrow><mo>[</mo><mi mathvariant="normal">cos</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi mathvariant="normal">sin</mi><mo stretchy="false">(</mo><mi>τ</mi><mo stretchy="false">)</mo><mi mathvariant="normal">cos</mi><mo stretchy="false">(</mo><mi>β</mi><mo>-</mo><mi>γ</mi><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="normal">sin</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi mathvariant="normal">cos</mi><mo stretchy="false">(</mo><mi>τ</mi><mo stretchy="false">)</mo><mrow><mo>]</mo></mrow></mrow></mrow></math></span>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>beta = 180;                                                <span style="color:#228B22">% Panel azimuth</span>
tau = 35;                                                  <span style="color:#228B22">% Panel tilt</span>
panelRad = solarRad*max(0,(cosd(alpha)*sind(tau)*cosd(beta-gamma) + sind(alpha)*cosd(tau)));
disp([<span style="color:#A020F0">'Panel Radiation = '</span> num2str(panelRad) <span style="color:#A020F0">' kW/m^2'</span>])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Panel Radiation = 0.89928 kW/m^2
</pre></div></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-6">Panel Radiation and Power Generation for a Single Day</h3><p>Modify parameters using interactive controls. Display plots together with the code that produced them.</p><h4 class="title" id="LiveEditorInteractiveNarrative-7">Panel Radiation</h4><p>For a given day of the year, calculate the total solar radiation and the radiation on the panel. To simplify the analysis, use the <code class="literal">panelRadiation</code> function. Try different dates to see how the solar and panel radiation change depending on the time of year.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>selectedMonth = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_08.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="6" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">6</span></span>;
selectedDay = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_09.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="1" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">1</span></span>;   
selectedDate = datetime(2019,selectedMonth,selectedDay); 
[times,solarRad,panelRad] = panelRadiation(selectedDate,lambda,phi,UTCoff,tau,beta) ;

plot(times,solarRad,times,panelRad)

selectedDate.Format = <span style="color:#A020F0">'MMMM dd yyyy'</span>;
title(<span style="color:#A020F0">'Solar and Panel Radiation for '</span> + string(selectedDate))
xlabel(<span style="color:#A020F0">'Hour of Day'</span>);
ylabel(<span style="color:#A020F0">'Radiation, kW/m^2'</span>)
legend(<span style="color:#A020F0">'Available Solar Radiation'</span>,<span style="color:#A020F0">'Solar Radiation on Panel'</span>, <span style="color:#A020F0">'Location'</span>,<span style="color:#A020F0">'South'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e48198" class="mediaobject"><p><img src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_02.png" alt="Figure contains an axes object. The axes object with title Solar and Panel Radiation for June 01 2019, xlabel Hour of Day, ylabel Radiation, kW/m Squared baseline contains 2 objects of type line. These objects represent Available Solar Radiation, Solar Radiation on Panel." width="560"></p></div></div><h4 class="title" id="LiveEditorInteractiveNarrative-8">Power Generation</h4><p>So far, the calculations assume that all of the radiation reaching the panel is available to generate power. However, solar panels do not convert 100% of available solar radiation into electricity. The efficiency of a solar panel is the fraction of the available radiation that is converted. The efficiency of a solar panel depends on the design and materials of the cell.  </p><p>Typically, a residential installation includes 20<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mi mathvariant="normal">m</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></math></span> of solar panels with an efficiency of 25%. Modify the parameters below to see how efficiency and size affect panel power generation.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>eff = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_10.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="0.25" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">0.25</span></span>;                         <span style="color:#228B22">% Panel efficiency</span>
pSize = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_11.png"><span data-examplename="openExample('matlab/LiveEditorInteractiveNarrative')" tabindex="0" data-controlvalue="20" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">20</span></span>;                         <span style="color:#228B22">% Panel size in m^2</span>
radiation = sum(panelRad(1:end-1)+panelRad(2:end))/2;
dayPower = eff*pSize*radiation;                            <span style="color:#228B22">% Panel electric output in kW</span>

selectedDate.Format = <span style="color:#A020F0">'dd-MMM-yyyy'</span>;
disp(<span style="color:#A020F0">'Expected daily electical output for '</span> + string(selectedDate) + <span style="color:#A020F0">' = '</span> + num2str(dayPower) + <span style="color:#A020F0">' kW'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Expected daily electical output for 01-Jun-2019 = 33.4223 kW
</pre></div></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-9">Power Generation for the Whole Year</h3><p>Hover over a plot to interact with it. Interacting with a plot in the Live Editor will generate code that you can then add to your script.</p><p>Repeat the calculation to estimate power generation for each day of the year.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>yearDates = datetime(2019,1,1:365);                        <span style="color:#228B22">% Create a vector of days in the year</span>
dailyPower = zeros(1,365);
<span style="color:#0000FF">for</span> i = 1:365
    [times,solarRad,panelRad] = panelRadiation(yearDates(i),lambda,phi,UTCoff,tau,beta) ;
    radiation = sum(panelRad(1:end-1)+panelRad(2:end))/2;
    dailyPower(i) = eff*pSize*radiation; 
<span style="color:#0000FF">end</span>

plot(yearDates,dailyPower)
title(<span style="color:#A020F0">'Yearly Power Generation'</span>)
xlabel(<span style="color:#A020F0">'Date'</span>);
ylabel(<span style="color:#A020F0">'Power Generation, kW'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e48238" class="mediaobject"><p><img src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_03.png" alt="Figure contains an axes object. The axes object with title Yearly Power Generation, xlabel Date, ylabel Power Generation, kW contains an object of type line." width="560"></p></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>yearlyPower = sum(dailyPower);
disp([<span style="color:#A020F0">'Expected annual power output = '</span> num2str(yearlyPower) <span style="color:#A020F0">' kW'</span>])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Expected annual power output = 9954.3272 kW
</pre></div></div></div><h4 class="title" id="LiveEditorInteractiveNarrative-10">Panel Tilt and Latitude</h4><p>Use a heatmap to determine how panel tilt affects power generation. The heatmap below shows that the optimal panel tilt for any location is about <span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" xmlns:mwmmlx="https://www.mathworks.com/namespace/MathMLextensions" mwmmlx:extension="true" display="inline"><mrow><msup><mrow><mn>5</mn></mrow><mrow><mo>∘</mo></mrow></msup></mrow></math></span> less than the latitude.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>load <span style="color:#A020F0">LatitudeVsTilt.mat</span>
heatmap(powerTbl,<span style="color:#A020F0">'Tilt'</span>,<span style="color:#A020F0">'Latitude'</span>,<span style="color:#0000FF">...</span>
    <span style="color:#A020F0">'ColorVariable'</span>,<span style="color:#A020F0">'Power'</span>);
xlabel(<span style="color:#A020F0">'Panel Tilt'</span>)
ylabel(<span style="color:#A020F0">'Latitude'</span>)
title(<span style="color:#A020F0">'Normalized Power Output'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e48262" class="mediaobject"><p><img src="../../examples/matlab/win64/LiveEditorInteractiveNarrative_04.png" alt="Figure contains an object of type heatmap. The chart of type heatmap has title Normalized Power Output." width="560"></p></div></div><h3 class="title" id="LiveEditorInteractiveNarrative-11">Extend the Analysis</h3><p>Share your analysis with colleagues. Invite them to reproduce or extend your analysis. Work collaboratively using the Live Editor.</p><p>In reality, true power output from a solar installation is significantly affected by local weather conditions. An interesting extension of this analysis would be to see how cloud cover affects the results. In the US, you can use data from these government websites.</p><div class="itemizedlist"><ul><li><p>Use historical local weather data from the <a href="https://www.weather.gov/phi/localclimate.html" target="_blank">National Weather Service website</a>.</p></li><li><p>Use measured solar radiation data from the <a href="https://nsrdb.nrel.gov/" target="_blank">National Solar Radiation Database</a>.</p></li></ul></div></div>
            <h2 id="seealsoref">See Also</h2><h3 id="d126e48286">Topics</h3><ul class="list-unstyled"><li><a href="create-live-scripts.html" class="a">Create Live Scripts in the Live Editor</a></li><li><a href="format-live-scripts.html" class="a">Format Text in the Live Editor</a></li><li><a href="https://www.mathworks.com/products/matlab/live-script-gallery.html"><span class="trademark entity">MATLAB</span> Live Script Gallery</a></li></ul>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
