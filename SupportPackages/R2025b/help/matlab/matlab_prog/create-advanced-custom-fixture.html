<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Create Advanced Custom Fixture</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../software-development.html",
          "name": "Software Development Tools"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../matlab-unit-test-framework.html",
          "name": "Testing Frameworks"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../extend-testing-frameworks.html",
          "name": "Extend Testing Frameworks"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "extend-testing-frameworks"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Create a configurable fixture that changes the output display format for numeric values."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../software-development.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Software Development Tools</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../matlab-unit-test-framework.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Testing Frameworks</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../extend-testing-frameworks.html?s_tid=CRUX_lftnav" itemprop="url" id="butj3cg-8"><span itemprop="title">Extend Testing Frameworks</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Create Advanced Custom Fixture</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#d126e91798" class="nav-link intrnllnk">Create NumericFormatFixture Class</a></li><li class="nav-item"><a href="#d126e91818" class="nav-link intrnllnk">Add Fixture Constructor</a></li><li class="nav-item"><a href="#mw_9acfce20-f715-482f-9ccf-a71f37061486" class="nav-link intrnllnk">Implement setup Method</a></li><li class="nav-item"><a href="#d126e91861" class="nav-link intrnllnk">Implement isCompatible Method</a></li><li class="nav-item"><a href="#d126e91898" class="nav-link intrnllnk">Fixture Class Definition</a></li><li class="nav-item"><a href="#d126e91906" class="nav-link intrnllnk">Apply Custom Fixture to Single Test Class</a></li><li class="nav-item"><a href="#d126e91928" class="nav-link intrnllnk">Apply Custom Fixture as Shared Fixture</a></li><li class="nav-item"><a href="#d126e92002" class="nav-link intrnllnk">Alternative Approach to Calling addTeardown in setup Method</a></li><li class="nav-item"><a href="#d126e92033" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=extend-testing-frameworks&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="bt53b63-1">Create Advanced Custom Fixture</h2>
            <p class="shortdesc">This example shows how to create a custom fixture that changes
                the output display format for numeric values. You can apply the fixture to a single
                test class or share the fixture across multiple test classes. After testing, the
                fixture restores the display format to its original state.</p>
        <div class="procedure"><h3 class="title" id="d126e91798">Create <code class="class">NumericFormatFixture</code> Class</h3><p>In a file named <code class="literal">NumericFormatFixture.m</code> in your current
                    folder, create the <code class="class">NumericFormatFixture</code> class by deriving from
                    the <a href="../ref/matlab.unittest.fixtures.fixture-class.html"><code class="class">matlab.unittest.fixtures.Fixture</code></a>
                    interface. Because you want to pass the fixture a numeric format, add a
                        <code class="property">Format</code> property to your class.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    <span style="color:#0000FF">properties</span> (SetAccess=immutable)
        Format <span style="color:#A0522D">(1,1) string</span>
    <span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="d126e91818">Add Fixture Constructor</h3><p>In a <code class="literal">methods</code> block in your class, define a constructor that
                    sets the <code class="property">Format</code> property.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> fixture = NumericFormatFixture(fmt)
            fixture.Format = fmt;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="mw_9acfce20-f715-482f-9ccf-a71f37061486">Implement <code class="method">setup</code> Method</h3><p>Subclasses of the <code class="class">Fixture</code> interface must implement the <a href="../ref/matlab.unittest.fixtures.fixture.setup.html"><code class="method">setup</code></a> method, which makes changes
                    to the environment when the testing framework sets up the fixture. To restore
                    the environment when the framework tears down the fixture, you can call the
                        <a href="../ref/matlab.unittest.fixtures.fixture.addteardown.html"><code class="method">addTeardown</code></a> method within the
                        <code class="method">setup</code> method.</p><p> In a <code class="literal">methods</code> block, implement the <code class="method">setup</code>
                    method to change the numeric format to the format specified during fixture
                    construction and to restore the format to its original state after testing. To
                    provide descriptive information when the framework sets up and tear downs the
                    fixture, set the <code class="property">SetupDescription</code> and
                        <code class="property">TeardownDescription</code> properties within the
                    method.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> setup(fixture)
            originalFormat = format;
            fixture.addTeardown(@format,originalFormat)
            format(fixture.Format)
            fixture.SetupDescription = <span style="color:#A020F0">"Set the numeric format to "</span> + <span style="color:#0000FF">...</span>
                fixture.Format + <span style="color:#A020F0">"."</span>;
            fixture.TeardownDescription =  <span style="color:#0000FF">...</span>
                <span style="color:#A020F0">"Restored the numeric format to "</span> + <span style="color:#0000FF">...</span>
                originalFormat.NumericFormat + <span style="color:#A020F0">"."</span>;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="d126e91861">Implement <code class="method">isCompatible</code> Method</h3><p>Implement the <a href="../ref/matlab.unittest.fixtures.fixture.iscompatible.html"><code class="method">isCompatible</code></a> method in your
                        <code class="class">Fixture</code> subclass if the fixture is configurable (for
                    instance, if its class constructor accepts input arguments). In this example,
                    because you set the <code class="property">Format</code> property using the class
                    constructor, you must implement <code class="class">isCompatible</code>. </p><p>The testing framework calls <code class="method">isCompatible</code> to determine whether
                    instances of the same <code class="class">Fixture</code> subclass correspond to the same
                    shared test fixture state. The information about fixture compatibility helps the
                    framework decide when to perform teardown and setup actions. Two
                        <code class="class">NumericFormatFixture</code> instances make the same change to the
                    environment when their <code class="property">Format</code> properties are equal. Specify
                    this compatibility definition by implementing the <code class="method">isCompatible</code>
                    method in a <code class="literal">methods</code> block with <code class="literal">protected</code>
                    access.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    <span style="color:#0000FF">methods</span> (Access=protected)
        <span style="color:#0000FF">function</span> tf = isCompatible(fixture1,fixture2)
            tf = fixture1.Format == fixture2.Format;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="d126e91898">Fixture Class Definition</h3><p>This code provides the complete contents of the
                        <code class="class">NumericFormatFixture</code> class.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> NumericFormatFixture &lt; matlab.unittest.fixtures.Fixture
    <span style="color:#0000FF">properties</span> (SetAccess=immutable)
        Format <span style="color:#A0522D">(1,1) string</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> fixture = NumericFormatFixture(fmt)
            fixture.Format = fmt;
        <span style="color:#0000FF">end</span>

        <span style="color:#0000FF">function</span> setup(fixture)
            originalFormat = format;
            fixture.addTeardown(@format,originalFormat)
            format(fixture.Format)
            fixture.SetupDescription = <span style="color:#A020F0">"Set the numeric format to "</span> + <span style="color:#0000FF">...</span>
                fixture.Format + <span style="color:#A020F0">"."</span>;
            fixture.TeardownDescription =  <span style="color:#0000FF">...</span>
                <span style="color:#A020F0">"Restored the numeric format to "</span> + <span style="color:#0000FF">...</span>
                originalFormat.NumericFormat + <span style="color:#A020F0">"."</span>;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#0000FF">methods</span> (Access=protected)
        <span style="color:#0000FF">function</span> tf = isCompatible(fixture1,fixture2)
            tf = fixture1.Format == fixture2.Format;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="d126e91906">Apply Custom Fixture to Single Test Class</h3><p>In a file named <code class="literal">ExampleTest.m</code> in your current folder,
                    create the <code class="class">ExampleTest</code> class that applies the custom fixture and
                    verifies that a numeric value is displayed in the expected format. To simplify
                    this example, the actual value is produced by a call to the <a href="../ref/formatteddisplaytext.html"><code class="function">formattedDisplayText</code></a> function. In practice, you test
                    user-defined code.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> ExampleTest &lt; matlab.unittest.TestCase
    <span style="color:#0000FF">methods</span> (Test)
        <span style="color:#0000FF">function</span> formatTest(testCase)
            testCase.applyFixture(NumericFormatFixture(<span style="color:#A020F0">"bank"</span>))
            actual = strtrim(formattedDisplayText(pi));
            expected = <span style="color:#A020F0">"3.14"</span>;
            testCase.verifyEqual(actual,expected)
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>Run the <code class="class">ExampleTest</code> class. The testing framework sets up the
                    fixture, which changes the display format to the currency format. Once the test
                    run is complete, the framework tears down the fixture, which restores the
                    original display format. In this example, the test passes.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>runtests(<span style="color:#A020F0">"ExampleTest"</span>);</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Running ExampleTest
.
Done ExampleTest
__________</pre></div></div></div><h3 class="title" id="d126e91928">Apply Custom Fixture as Shared Fixture</h3><p>In your current folder, create three test classes that each use an instance of
                        <code class="class">NumericFormatFixture</code> as a shared test fixture.</p><p>In a file named <code class="literal">TestA.m</code>, create the <code class="class">TestA</code>
                    class.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> (SharedTestFixtures={NumericFormatFixture(<span style="color:#A020F0">"bank"</span>)}) <span style="color:#0000FF">...</span>
        TestA &lt; matlab.unittest.TestCase
    <span style="color:#0000FF">methods</span> (Test)
        <span style="color:#0000FF">function</span> formatTest(testCase)
            actual = strtrim(formattedDisplayText(pi));
            expected = <span style="color:#A020F0">"3.14"</span>;
            testCase.verifyEqual(actual,expected)
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>In a file named <code class="literal">TestB.m</code>, create the <code class="class">TestB</code>
                    class.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> (SharedTestFixtures={NumericFormatFixture(<span style="color:#A020F0">"bank"</span>)}) <span style="color:#0000FF">...</span>
        TestB &lt; matlab.unittest.TestCase
    <span style="color:#0000FF">methods</span> (Test)
        <span style="color:#0000FF">function</span> formatTest(testCase)
            actual = strtrim(formattedDisplayText(100/3));
            expected = <span style="color:#A020F0">"33.33"</span>;
            testCase.verifyEqual(actual,expected)
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>In a file named <code class="literal">TestC.m</code>, create the <code class="class">TestC</code>
                    class.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> (SharedTestFixtures={NumericFormatFixture(<span style="color:#A020F0">"hex"</span>)}) <span style="color:#0000FF">...</span>
        TestC &lt; matlab.unittest.TestCase
    <span style="color:#0000FF">methods</span> (Test)
        <span style="color:#0000FF">function</span> formatTest(testCase)
            actual = strtrim(formattedDisplayText(1));
            expected = <span style="color:#A020F0">"3ff0000000000000"</span>;
            testCase.verifyEqual(actual,expected)
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><p>The <code class="class">TestA</code> and <code class="class">TestB</code> classes are assigned shared
                    fixtures that make the same change to the environment. On the other hand, the
                        <code class="class">TestC</code> class is assigned a fixture that enforces a different
                    numeric format. According to the implementation of the
                        <code class="method">isCompatible</code> method in this example, the testing framework
                    finds the fixtures on <code class="class">TestA</code> and <code class="class">TestB</code> compatible.
                    However, it finds the fixture on <code class="class">TestC</code> incompatible with the
                    other fixtures.</p><p>The information about fixture compatibility helps the framework decide when to
                    perform teardown and setup actions. If you run <code class="class">TestA</code>,
                        <code class="class">TestB</code>, and <code class="class">TestC</code> as part of the same test
                    suite, the framework does not tear down the fixture when switching from
                        <code class="class">TestA</code> to <code class="class">TestB</code> because both classes require
                    the same environment. However, when switching from <code class="class">TestB</code> to
                        <code class="class">TestC</code>, the framework tears down the existing fixture and sets
                    up a fresh fixture required by <code class="class">TestC</code>. In this example, all the
                    tests pass.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>runtests([<span style="color:#A020F0">"TestA"</span> <span style="color:#A020F0">"TestB"</span> <span style="color:#A020F0">"TestC"</span>]);</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Setting up NumericFormatFixture
Done setting up NumericFormatFixture: Set the numeric format to bank.
__________

Running TestA
.
Done TestA
__________

Running TestB
.
Done TestB
__________

Tearing down NumericFormatFixture
Done tearing down NumericFormatFixture: Restored the numeric format to short.
__________

Setting up NumericFormatFixture
Done setting up NumericFormatFixture: Set the numeric format to hex.
__________

Running TestC
.
Done TestC
__________

Tearing down NumericFormatFixture
Done tearing down NumericFormatFixture: Restored the numeric format to short.
__________</pre></div></div></div><h3 class="title" id="d126e92002">Alternative Approach to Calling <code class="method">addTeardown</code> in                         <code class="method">setup</code> Method</h3><p>An alternative approach to calling the <code class="method">addTeardown</code> method
                    within the <code class="method">setup</code> method is to implement a separate <a href="../ref/matlab.unittest.fixtures.fixture.teardown.html"><code class="method">teardown</code></a> method. This code shows
                    how to recreate the <code class="class">NumericFormatFixture</code> class by implementing
                    both the <code class="method">setup</code> and <code class="method">teardown</code> methods. Note that
                    the alternative class definition contains an additional property,
                        <code class="property">OriginalFormat</code>, to pass information about the original
                    format to the <code class="method">teardown</code> method.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> NumericFormatFixture &lt; matlab.unittest.fixtures.Fixture
    <span style="color:#0000FF">properties</span> (SetAccess=immutable)
        Format <span style="color:#A0522D">(1,1) string</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#0000FF">properties</span> (Access=private)
        OriginalFormat
    <span style="color:#0000FF">end</span>

    <span style="color:#0000FF">methods</span>
        <span style="color:#0000FF">function</span> fixture = NumericFormatFixture(fmt)  
            fixture.Format = fmt;
        <span style="color:#0000FF">end</span>

        <span style="color:#0000FF">function</span> setup(fixture)
            fixture.OriginalFormat = format().NumericFormat;
            format(fixture.Format)
            fixture.SetupDescription = <span style="color:#A020F0">"Set the numeric format to "</span> + <span style="color:#0000FF">...</span>
                fixture.Format + <span style="color:#A020F0">"."</span>;
        <span style="color:#0000FF">end</span>

        <span style="color:#0000FF">function</span> teardown(fixture)
            format(fixture.OriginalFormat)
            fixture.TeardownDescription =  <span style="color:#0000FF">...</span>
                <span style="color:#A020F0">"Restored the numeric format to "</span> + <span style="color:#0000FF">...</span>
                fixture.OriginalFormat + <span style="color:#A020F0">"."</span>;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#0000FF">methods</span> (Access=protected)
        <span style="color:#0000FF">function</span> tf = isCompatible(fixture1,fixture2)
            tf = fixture1.Format == fixture2.Format;
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div></div>
            <h2 id="d126e92033">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.unittest.fixtures.fixture-class.html"><span itemprop="name"><code class="class">matlab.unittest.fixtures.Fixture</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.unittest.testcase-class.html"><span itemprop="name"><code class="class">matlab.unittest.TestCase</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/format.html"><span itemprop="name"><code class="function">format</code></span></a></span></p>
            <h3 id="d126e92045">Topics</h3><ul class="list-unstyled"><li><a href="create-basic-custom-fixture.html" class="a">Create Basic Custom Fixture</a></li><li><a href="write-test-using-shared-fixtures.html" class="a">Write Tests Using Shared Fixtures</a></li></ul>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
