<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Add Event Table from External Data to Timetable</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../language-fundamentals.html",
          "name": "Language Fundamentals"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-types.html",
          "name": "Data Types"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../timetables.html",
          "name": "Timetables"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "timetables"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Add Event Table from External Data to Timetable",
          "description": "Add events that come from an external data source to your timestamped data, and analyze and plot the results.",
          "thumbnailURL": "../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_04.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.AddEventsFromExternalDataToTimetableExample",
          "name": "AddEventsFromExternalDataToTimetableExample",
          "url": "add-event-table-from-external-data-to-timetable.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/AddEventsFromExternalDataToTimetableExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "AddEventsFromExternalDataToTimetableExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Add events that come from an external data source to your timestamped data, and analyze and plot the results."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_04.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../language-fundamentals.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Language Fundamentals</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Types</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../timetables.html?s_tid=CRUX_lftnav" itemprop="url" id="bvdhhum-1"><span itemprop="title">Timetables</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Add Event Table from External Data to Timetable</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-1" class="nav-link intrnllnk">Import Timetable with Length-of-Day Measurements</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-3" class="nav-link intrnllnk">Store Leap Seconds in Event Table</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-4" class="nav-link intrnllnk">Use Event Timestamps to Select Data</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-5" class="nav-link intrnllnk">Plot Events Against Data</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-6" class="nav-link intrnllnk">Copy Event Data to State Variable in Timetable</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-7" class="nav-link intrnllnk">Plot State Variable Against Data</a></li><li class="nav-item"><a href="#AddEventsFromExternalDataToTimetableExample-8" class="nav-link intrnllnk">Choose Events or State Variables</a></li><li class="nav-item"><a href="#d126e35529" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="mw_90835feb-0585-46c7-a7e4-f121f4c586d1">Add Event Table from External Data to Timetable</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/AddEventsFromExternalDataToTimetableExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-AddEventsFromExternalDataToTimetableExample"><meta itemprop="exampletitle" content="Add Event Table from External Data to Timetable"></div><span id="AddEventsFromExternalDataToTimetableExample" class="anchor_target"></span><p class="shortdesc">To find and label events in a timetable, attach an <a href="../ref/eventtable.html" data-docid="matlab_ref#mw_38a0cb0f-8eba-45ea-a726-6c49bc32754f" class="a"><code class="olink">eventtable</code></a> to it. An event table is a timetable of <span class="emphasis"><em>events</em></span>. An event consists of an event time (when something happened), often an event length or event end time (how long it happened), often an event label (what happened), and sometimes additional information about the event. When you attach an event table to a timetable, it enables you to find and label rows in the timetable that occur during events. By associating timetable rows with events, you can more easily analyze and plot the data that they contain.</p><p>This example shows how you can add events to your timetable using data that comes from an external data source. In the example, import a timetable of measurements of the Earth's rotation rate from 1962 to the present. The rotation rate varies as a function of time, causing changes in the excess length-of-day to accumulate. Whenever the cumulative excess becomes too large, a leap second is inserted. This example analyzes the excess length-of-day over time and treats leap seconds added since 1972 as a set of external events. To analyze these data with event tables, use the <code class="literal">eventtable</code>, <code class="literal">eventfilter</code>, and <code class="literal">syncevents</code> functions. (A related workflow is to find and label events within your timetable. For more information about that workflow, see <a href="find-events-in-timetable-using-event-table.html" data-docid="matlab_prog#mw_d9938087-88f5-473c-b9e6-4dd1e455e6d0" class="a">Find Events in Timetable Using Event Table</a>.)</p><div class="procedure"><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-1">Import Timetable with Length-of-Day Measurements<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_FE00E8F8" class="anchor_target"></span></h3><p>By definition, a day is 86,400 seconds long, where the second has a precise definition in the International System of Units (SI). However, the length of a day actually varies due to several physical causes. It varies with the seasons by as much as 30 seconds over and 21 seconds under the SI definition because of the eccentricity of Earth's orbit and the tilt of its axis. Averaging these seasonal effects enables the definition of the <span class="emphasis"><em>mean solar day</em></span>, which does not vary in length over a year.</p><p>Also, there is a very long-term slowing in the rotational speed of the Earth due to tidal interaction with the moon; a smaller, opposite, shorter-term component believed to be due to melting of continental ice sheets; very short-term cycles on the order of decades; and unpredictable fluctuations due to geological events and other causes. Because of those effects, the length of a mean solar day might increase or decrease. In recent decades, it has fluctuated up and down, but has mostly been 1&#8211;3 milliseconds longer than 86,400 seconds. That difference is known as the <span class="emphasis"><em>excess Length of Day</em></span>, or <span class="emphasis"><em>excess LOD</em></span>.</p><p>For this example, create a timetable that contains the excess LOD for every day from January 1, 1962, to the present. The <a href="https://www.iers.org/IERS/EN/Home/home_node.html" target="_blank">International Earth Rotation and Reference Systems Service</a> (IERS) collects and publishes this data. However, this data needs preprocessing before storing in a MATLAB timetable because the dates are modified <a href="https://en.wikipedia.org/wiki/Julian_day" target="_blank">Julian dates</a>. To read the IERS data into a table, use the <code class="literal">readtable</code> function. Rename the two variables of interest to <code class="literal">MJD</code> and <code class="literal">ExcessLOD</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>file = <span style="color:#A020F0">"https://datacenter.iers.org/data/latestVersion/223_EOP_C04_14.62-NOW.IAU1980223.txt"</span>;
IERSdata = readtable(file,NumHeaderLines=14);
IERSdata.Properties.VariableNames([4 8]) = [<span style="color:#A020F0">"MJD"</span>,<span style="color:#A020F0">"ExcessLOD"</span>];</pre></div></div></div><p>To store the excess LOD values in a timetable, convert the modified Julian dates to <code class="literal">datetime</code> values. Use the <code class="literal">datetime</code> function with the <code class="literal">ConvertFrom="mjd"</code> name-value argument. Convert the excess LOD values to <code class="literal">duration</code> values by using the <code class="literal">seconds</code> function. Then convert <code class="literal">IERSdata</code> from a table to a timetable using the <code class="literal">table2timetable</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.Date = datetime(IERSdata.MJD,ConvertFrom=<span style="color:#A020F0">"mjd"</span>);
IERSdata.ExcessLOD = seconds(IERSdata.ExcessLOD);
IERSdata = table2timetable(IERSdata(:,[<span style="color:#A020F0">"Date"</span>,<span style="color:#A020F0">"ExcessLOD"</span>]))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdata=<span class="emphasis"><em>22458×1 timetable</em></span>
       Date         ExcessLOD  
    ___________    ____________
    01-Jan-1962    0.001723 sec
    02-Jan-1962    0.001669 sec
    03-Jan-1962    0.001582 sec
    04-Jan-1962    0.001496 sec
    05-Jan-1962    0.001416 sec
    06-Jan-1962    0.001382 sec
    07-Jan-1962    0.001413 sec
    08-Jan-1962    0.001505 sec
    09-Jan-1962    0.001628 sec
    10-Jan-1962    0.001738 sec
    11-Jan-1962    0.001794 sec
    12-Jan-1962    0.001774 sec
    13-Jan-1962    0.001667 sec
    14-Jan-1962     0.00151 sec
    15-Jan-1962    0.001312 sec
    16-Jan-1962    0.001112 sec
      &#x22EE;

</pre></div></div></div><p>Plot the excess LOD as a function of time. The excess LOD is currently decreasing on average but has remained positive except during very brief periods.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata.Date,IERSdata.ExcessLOD,<span style="color:#A020F0">"b-"</span>);
xlabel(<span style="color:#A020F0">"Date"</span>);
ylabel(<span style="color:#A020F0">"Excess LOD"</span>);</pre></div></div></div><div class="informalfigure"><div id="d126e35168" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_01.png" alt="Figure contains an axes object. The axes object with xlabel Date, ylabel Excess LOD contains an object of type line." width="560"></p></div></div><h4 class="title" id="AddEventsFromExternalDataToTimetableExample-2">Calculate Cumulative Excess Length of Day<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_73A20286" class="anchor_target"></span></h4><p>A clock that defines a day as 86,400 SI seconds is effectively running fast with respect to the Earth's rotation, gaining time with respect to the sun each day. A few extra milliseconds per day might seem unimportant, but the excess LOD since 1962 accumulates.</p><p>Add the cumulative excess LOD to <code class="literal">IERSdata</code> as another table variable. To calculate the cumulative sum of the excess LOD, use the <code class="literal">cumsum</code> function. Then use the <code class="literal">stackedplot</code> function to plot excess LOD and cumulative excess LOD together. This plot shows that the shift due to the accumulated excess LOD since the 1960s has been less than one minute.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.CumulativeELOD = [0; cumsum(IERSdata.ExcessLOD(1:end-1))];
stackedplot(IERSdata,[<span style="color:#A020F0">"ExcessLOD"</span>,<span style="color:#A020F0">"CumulativeELOD"</span>])</pre></div></div></div><div class="informalfigure"><div id="d126e35188" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_02.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-3">Store Leap Seconds in Event Table<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_A7B4382D" class="anchor_target"></span></h3><p>At midnight on January 1, 1972, the current version of the system of time known as <span class="emphasis"><em>Coordinated Universal Time</em></span> (UTC) was enacted, which uses 86,400 SI seconds per day. On that date, UTC was defined to be roughly in sync with solar time at the Greenwich Meridian, or more precisely, with the time known as UT1. However, timekeeping based on exactly 86,400 SI seconds per day would drift away from our physical experience of solar time because of accumulated excess LOD. So, when needed, an extra <span class="emphasis"><em>leap second adjustment</em></span> is inserted to keep UTC approximately in sync with solar time. Without these leap second adjustments after 1972, accumulated excess LOD would have caused UTC to drift away from UT1 over the years. Within decades, the difference would have grown to tens of seconds.</p><p>Show the difference since 1972. First, select the post-1971 excess LOD data by subscripting into <code class="literal">IERSdata</code> with a time range starting on January 1, 1972. To create that time range, use the <code class="literal">timerange</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972 = IERSdata(timerange(<span style="color:#A020F0">"1972-01-01"</span>,Inf),<span style="color:#A020F0">"ExcessLOD"</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdata1972=<span class="emphasis"><em>18806×1 timetable</em></span>
       Date         ExcessLOD  
    ___________    ____________
    01-Jan-1972    0.002539 sec
    02-Jan-1972    0.002708 sec
    03-Jan-1972    0.002897 sec
    04-Jan-1972    0.003065 sec
    05-Jan-1972    0.003177 sec
    06-Jan-1972     0.00322 sec
    07-Jan-1972    0.003201 sec
    08-Jan-1972    0.003137 sec
    09-Jan-1972    0.003033 sec
    10-Jan-1972    0.002898 sec
    11-Jan-1972    0.002772 sec
    12-Jan-1972    0.002672 sec
    13-Jan-1972    0.002621 sec
    14-Jan-1972    0.002642 sec
    15-Jan-1972     0.00274 sec
    16-Jan-1972    0.002937 sec
      &#x22EE;

</pre></div></div></div><p>Add another variable with the unadjusted difference since 1972. Start with the cumulative excess LOD on January 1, 1972, which was 0.0454859 second. For every date that follows, calculate the unadjusted difference. By the beginning of 2017, the unadjusted difference would have grown to about 26 seconds. Display <code class="literal">IERSdata1972</code> using a time range that includes the start of 2017.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>DiffUT1_1972 = seconds(0.0454859);
IERSdata1972.UnadjustedDiff = DiffUT1_1972 + [0; cumsum(IERSdata1972.ExcessLOD(1:end-1))];
IERSdata1972(timerange(<span style="color:#A020F0">"2016-12-29"</span>,<span style="color:#A020F0">"2017-01-04"</span>),:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>6×2 timetable</em></span>
       Date          ExcessLOD      UnadjustedDiff
    ___________    _____________    ______________
    29-Dec-2016    0.0008055 sec      26.402 sec  
    30-Dec-2016    0.0008525 sec      26.402 sec  
    31-Dec-2016    0.0009173 sec      26.403 sec  
    01-Jan-2017     0.001016 sec      26.404 sec  
    02-Jan-2017    0.0011845 sec      26.405 sec  
    03-Jan-2017    0.0013554 sec      26.406 sec  

</pre></div></div></div><p>This drift is what leap seconds are designed to mitigate. You can think of each leap second that is inserted into the UTC timeline as an event. These events are not part of the LOD data. However, in MATLAB the <code class="literal">leapseconds</code> function lists each leap second that has occurred since 1972. (The leap seconds listed by <code class="literal">leapseconds</code> come from another data set provided by the IERS.) The timetable returned by <code class="literal">leapseconds</code> contains a timestamp, a description of each event (<code class="literal">+</code> for leap second insertions, <code class="literal remove_text_wrapping">-</code> for removals), and the cumulative number of leap seconds up to and including the event. To date, there have been 27 leap second events, and they have all been insertions.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lsEvents = leapseconds()</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>lsEvents=<span class="emphasis"><em>27×2 timetable</em></span>
       Date        Type    CumulativeAdjustment
    ___________    ____    ____________________
    30-Jun-1972     +              1 sec       
    31-Dec-1972     +              2 sec       
    31-Dec-1973     +              3 sec       
    31-Dec-1974     +              4 sec       
    31-Dec-1975     +              5 sec       
    31-Dec-1976     +              6 sec       
    31-Dec-1977     +              7 sec       
    31-Dec-1978     +              8 sec       
    31-Dec-1979     +              9 sec       
    30-Jun-1981     +             10 sec       
    30-Jun-1982     +             11 sec       
    30-Jun-1983     +             12 sec       
    30-Jun-1985     +             13 sec       
    31-Dec-1987     +             14 sec       
    31-Dec-1989     +             15 sec       
    31-Dec-1990     +             16 sec       
      &#x22EE;

</pre></div></div></div><p>To treat the leap seconds as events, convert <code class="literal">lsEvents</code> to an event table by using the <a href="../ref/eventtable.html" data-docid="matlab_ref#mw_38a0cb0f-8eba-45ea-a726-6c49bc32754f" class="a"><code class="olink">eventtable</code></a> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lsEvents = eventtable(lsEvents)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>lsEvents = <span class="emphasis"><em>27×2 eventtable</em></span>
  Event Labels Variable: &lt;unset&gt;
  Event Lengths Variable: &lt;instantaneous&gt;
       Date        Type    CumulativeAdjustment
    ___________    ____    ____________________
    30-Jun-1972     +              1 sec       
    31-Dec-1972     +              2 sec       
    31-Dec-1973     +              3 sec       
    31-Dec-1974     +              4 sec       
    31-Dec-1975     +              5 sec       
    31-Dec-1976     +              6 sec       
    31-Dec-1977     +              7 sec       
    31-Dec-1978     +              8 sec       
    31-Dec-1979     +              9 sec       
    30-Jun-1981     +             10 sec       
    30-Jun-1982     +             11 sec       
    30-Jun-1983     +             12 sec       
    30-Jun-1985     +             13 sec       
    31-Dec-1987     +             14 sec       
    31-Dec-1989     +             15 sec       
    31-Dec-1990     +             16 sec       
    30-Jun-1992     +             17 sec       
    30-Jun-1993     +             18 sec       
    30-Jun-1994     +             19 sec       
    31-Dec-1995     +             20 sec       
    30-Jun-1997     +             21 sec       
    31-Dec-1998     +             22 sec       
    31-Dec-2005     +             23 sec       
    31-Dec-2008     +             24 sec       
    30-Jun-2012     +             25 sec       
    30-Jun-2015     +             26 sec       
    31-Dec-2016     +             27 sec       
</pre></div></div></div><p>At this point, the main LOD data is in the <code class="literal">IERSdata1972</code> timetable. The leap second events are in the <code class="literal">lsEvents</code> event table. To find and label rows that occur during leap seconds in the LOD data, attach <code class="literal">lsEvents</code> to <code class="literal">IERSdata1972</code>. Assign <code class="literal">lsEvents</code> to its <code class="literal">Events</code> property.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972.Properties.Events = lsEvents;
IERSdata1972.Properties</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 
  TimetableProperties with properties:
             Description: ''
                UserData: []
          DimensionNames: {'Date'  'Variables'}
           VariableNames: {'ExcessLOD'  'UnadjustedDiff'}
    VariableDescriptions: {}
           VariableUnits: {}
      VariableContinuity: []
                RowTimes: [18806×1 datetime]
               StartTime: 01-Jan-1972
              SampleRate: NaN
                TimeStep: 1d
                  Events: [27×2 eventtable]
        CustomProperties: No custom properties are set.
      Use addprop and rmprop to modify CustomProperties.
</pre></div></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-4">Use Event Timestamps to Select Data<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_3BF5790B" class="anchor_target"></span></h3><p>Add the unadjusted difference, or cumulative excess LOD, at each date in <code class="literal">lsEvents</code>. To find the unadjusted differences on these dates, index into the <code class="literal">UnadjustedDiff</code> variable of <code class="literal">IERSdata1972</code> and select the unadjusted difference at the timestamps from <code class="literal">lsEvents</code>. Then append those differences to each event in <code class="literal">lsEvents</code> as additional information about the event.</p><p>First, create an event filter using the <a href="../ref/eventfilter.html" data-docid="matlab_ref#mw_fd1f19a3-5fbc-4bfd-a126-0ae19fb38830" class="a"><code class="olink">eventfilter</code></a> function. It uses the event table attached to a timetable to create a row subscript. You can use subscript into timetables rows using matching values from the event table. Subscript into <code class="literal">IERSdata1972</code> and return an array of unadjusted differences on the dates when leap seconds were added.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>EF = eventfilter(IERSdata1972)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>EF = 
  eventfilter with no constraints and no selected variables

    &lt;unconstrained&gt;

  VariableNames: Date, Type, CumulativeAdjustment

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>UnadjustedDiff = IERSdata1972{EF.Date,<span style="color:#A020F0">"UnadjustedDiff"</span>}</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>UnadjustedDiff = <span class="emphasis"><em>27×1 duration</em></span>
   0.63494 sec
    1.1864 sec
    2.2976 sec
     3.289 sec
    4.2718 sec
    5.3334 sec
    6.3469 sec
     7.398 sec
    8.3526 sec
    9.6281 sec
    10.389 sec
    11.249 sec
    12.451 sec
    13.634 sec
    14.669 sec
    15.379 sec
    16.556 sec
    17.399 sec
    18.216 sec
    19.442 sec
    20.472 sec
    21.282 sec
    22.659 sec
    23.589 sec
    24.583 sec
    25.671 sec
    26.403 sec

</pre></div></div></div><p>Add the array as a new variable to the event table. In this way, you can add more information about events after you have attached an event table to a timetable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972.Properties.Events.UnadjustedDiff = UnadjustedDiff</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdata1972=<span class="emphasis"><em>18806×2 timetable</em></span>
           Date         ExcessLOD      UnadjustedDiff
        ___________    ____________    ______________
        01-Jan-1972    0.002539 sec     0.045486 sec 
        02-Jan-1972    0.002708 sec     0.048025 sec 
        03-Jan-1972    0.002897 sec     0.050733 sec 
        04-Jan-1972    0.003065 sec      0.05363 sec 
        05-Jan-1972    0.003177 sec     0.056695 sec 
        06-Jan-1972     0.00322 sec     0.059872 sec 
        07-Jan-1972    0.003201 sec     0.063092 sec 
        08-Jan-1972    0.003137 sec     0.066293 sec 
        09-Jan-1972    0.003033 sec      0.06943 sec 
        10-Jan-1972    0.002898 sec     0.072463 sec 
        11-Jan-1972    0.002772 sec     0.075361 sec 
        12-Jan-1972    0.002672 sec     0.078133 sec 
        13-Jan-1972    0.002621 sec     0.080805 sec 
        14-Jan-1972    0.002642 sec     0.083426 sec 
        15-Jan-1972     0.00274 sec     0.086068 sec 
        16-Jan-1972    0.002937 sec     0.088808 sec 
      &#x22EE;

</pre></div></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-5">Plot Events Against Data<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_7B8807A1" class="anchor_target"></span></h3><p>The event table shows that at each event, the IERS inserted a leap second whenever the excess LOD accumulated by roughly one additional second. To confirm this observation visually, plot the LOD data overlaid with the instantaneous leap second events. Use the <code class="literal">stackedplot</code> function. If the input is a timetable with an attached event table, then <code class="literal">stackedplot</code> automatically plots events from the event table on top of the data from the timetable. It plots instantaneous events as vertical lines.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>stackedplot(IERSdata1972)</pre></div></div></div><div class="informalfigure"><div id="d126e35326" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_03.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><p>The <code class="literal">stackedplot</code> function plots all events using the same default style. To plot events using different styles, use the <code class="literal">plot</code> function and specify colors, markers, line styles, and so on. For example, plot the leap second events on the unadjusted differences using red crosses instead of vertical lines.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata1972,<span style="color:#A020F0">"UnadjustedDiff"</span>);
hold <span style="color:#A020F0">on</span>
plot(lsEvents.Date,IERSdata1972.UnadjustedDiff(lsEvents.Date),<span style="color:#A020F0">"r+"</span>);
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e35339" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_04.png" alt="Figure contains an axes object. The axes object with xlabel Date, ylabel UnadjustedDiff contains 2 objects of type line. One or more of the lines displays its values using only markers" width="560"></p></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-6">Copy Event Data to State Variable in Timetable<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_A2456115" class="anchor_target"></span></h3><p>The leap seconds are instantaneous events recorded in an event table. Another way to represent them is by using a <span class="emphasis"><em>state variable</em></span> appended to the original LOD data. A state variable describes the "state" of the process being measured at each time point rather than tagging a specific instant. One possible state variable for this leap second data is an indicator variable that records an adjustment on each event date, with missing values on all the other dates. This approach works because all timestamps from the event table are also timestamps in <code class="literal">IERSdata1972</code>.</p><p>To copy the cumulative adjustments from the attached event table to the timetable, use the <a href="../ref/timetable.syncevents.html" data-docid="matlab_ref#mw_4959f50f-3e8c-4f76-ad56-9019b1649032" class="a"><code class="olink">syncevents</code></a> function. The function automatically fills the other elements of the new <code class="literal">CumulativeAdjustment</code> variable with missing values. Display the timetable rows around the 27th leap second.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972 = syncevents(IERSdata1972,EventDataVariables=<span style="color:#A020F0">"CumulativeAdjustment"</span>);
IERSdata1972(timerange(<span style="color:#A020F0">"2016-12-29"</span>,<span style="color:#A020F0">"2017-01-04"</span>),:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>6×3 timetable</em></span>
                    Date          ExcessLOD      UnadjustedDiff    CumulativeAdjustment
                 ___________    _____________    ______________    ____________________
                 29-Dec-2016    0.0008055 sec      26.402 sec            NaN sec       
                 30-Dec-2016    0.0008525 sec      26.402 sec            NaN sec       
    &lt;1 event&gt;    31-Dec-2016    0.0009173 sec      26.403 sec             27 sec       
                 01-Jan-2017     0.001016 sec      26.404 sec            NaN sec       
                 02-Jan-2017    0.0011845 sec      26.405 sec            NaN sec       
                 03-Jan-2017    0.0013554 sec      26.406 sec            NaN sec       

</pre></div></div></div><p>Another possibility, more useful in this example, is to add a state variable that indicates the cumulative sum of leap seconds at any given date in the LOD data. Begin by removing the <code class="literal">CumulativeAdjustment</code> variable from the timetable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972.CumulativeAdjustment = []; <span style="color:#228B22">% remove the previous state variable</span></pre></div></div></div><p>Then assign the attached event table to local variable in the workspace.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lsEvents = IERSdata1972.Properties.Events;</pre></div></div></div><p>The data in <code class="literal">IERSdata1972</code> begin on January 1, 1972, before the first leap second was added. So, add one more event to <code class="literal">lsEvents</code>, to cover the time before the first leap second.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lsEvents(IERSdata1972.Date(1),:) = {<span style="color:#A020F0">"+"</span>,seconds(0),seconds(0)};
lsEvents = sortrows(lsEvents)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>lsEvents = <span class="emphasis"><em>28×3 eventtable</em></span>
  Event Labels Variable: &lt;unset&gt;
  Event Lengths Variable: &lt;instantaneous&gt;
       Date        Type    CumulativeAdjustment    UnadjustedDiff
    ___________    ____    ____________________    ______________
    01-Jan-1972     +              0 sec                  0 sec  
    30-Jun-1972     +              1 sec            0.63494 sec  
    31-Dec-1972     +              2 sec             1.1864 sec  
    31-Dec-1973     +              3 sec             2.2976 sec  
    31-Dec-1974     +              4 sec              3.289 sec  
    31-Dec-1975     +              5 sec             4.2718 sec  
    31-Dec-1976     +              6 sec             5.3334 sec  
    31-Dec-1977     +              7 sec             6.3469 sec  
    31-Dec-1978     +              8 sec              7.398 sec  
    31-Dec-1979     +              9 sec             8.3526 sec  
    30-Jun-1981     +             10 sec             9.6281 sec  
    30-Jun-1982     +             11 sec             10.389 sec  
    30-Jun-1983     +             12 sec             11.249 sec  
    30-Jun-1985     +             13 sec             12.451 sec  
    31-Dec-1987     +             14 sec             13.634 sec  
    31-Dec-1989     +             15 sec             14.669 sec  
    31-Dec-1990     +             16 sec             15.379 sec  
    30-Jun-1992     +             17 sec             16.556 sec  
    30-Jun-1993     +             18 sec             17.399 sec  
    30-Jun-1994     +             19 sec             18.216 sec  
    31-Dec-1995     +             20 sec             19.442 sec  
    30-Jun-1997     +             21 sec             20.472 sec  
    31-Dec-1998     +             22 sec             21.282 sec  
    31-Dec-2005     +             23 sec             22.659 sec  
    31-Dec-2008     +             24 sec             23.589 sec  
    30-Jun-2012     +             25 sec             24.583 sec  
    30-Jun-2015     +             26 sec             25.671 sec  
    31-Dec-2016     +             27 sec             26.403 sec  
</pre></div></div></div><p>Add event end times to transform the events into interval events. The end of each interval is the day before the next leap second was added. The last event end time is the last date in <code class="literal">IERSdata1972</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>endEvents = [lsEvents.Date(2:end) - 1 ; IERSdata1972.Date(end)];</pre></div></div></div><p>Add the event end times to <code class="literal">lsEvents</code> as a new variable. Then assign the new variable to the <code class="literal">EventEndsVariable</code> property of <code class="literal">lsEvents</code>. Event tables have properties that specify which of their variables contain event labels, event lengths, or event end times.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lsEvents.EventEnds = endEvents;
lsEvents.Properties.EventEndsVariable = <span style="color:#A020F0">"EventEnds"</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>lsEvents = <span class="emphasis"><em>28×4 eventtable</em></span>
  Event Labels Variable: &lt;unset&gt;
  Event Ends Variable: EventEnds
       Date        Type    CumulativeAdjustment    UnadjustedDiff     EventEnds 
    ___________    ____    ____________________    ______________    ___________
    01-Jan-1972     +              0 sec                  0 sec      29-Jun-1972
    30-Jun-1972     +              1 sec            0.63494 sec      30-Dec-1972
    31-Dec-1972     +              2 sec             1.1864 sec      30-Dec-1973
    31-Dec-1973     +              3 sec             2.2976 sec      30-Dec-1974
    31-Dec-1974     +              4 sec              3.289 sec      30-Dec-1975
    31-Dec-1975     +              5 sec             4.2718 sec      30-Dec-1976
    31-Dec-1976     +              6 sec             5.3334 sec      30-Dec-1977
    31-Dec-1977     +              7 sec             6.3469 sec      30-Dec-1978
    31-Dec-1978     +              8 sec              7.398 sec      30-Dec-1979
    31-Dec-1979     +              9 sec             8.3526 sec      29-Jun-1981
    30-Jun-1981     +             10 sec             9.6281 sec      29-Jun-1982
    30-Jun-1982     +             11 sec             10.389 sec      29-Jun-1983
    30-Jun-1983     +             12 sec             11.249 sec      29-Jun-1985
    30-Jun-1985     +             13 sec             12.451 sec      30-Dec-1987
    31-Dec-1987     +             14 sec             13.634 sec      30-Dec-1989
    31-Dec-1989     +             15 sec             14.669 sec      30-Dec-1990
    31-Dec-1990     +             16 sec             15.379 sec      29-Jun-1992
    30-Jun-1992     +             17 sec             16.556 sec      29-Jun-1993
    30-Jun-1993     +             18 sec             17.399 sec      29-Jun-1994
    30-Jun-1994     +             19 sec             18.216 sec      30-Dec-1995
    31-Dec-1995     +             20 sec             19.442 sec      29-Jun-1997
    30-Jun-1997     +             21 sec             20.472 sec      30-Dec-1998
    31-Dec-1998     +             22 sec             21.282 sec      30-Dec-2005
    31-Dec-2005     +             23 sec             22.659 sec      30-Dec-2008
    31-Dec-2008     +             24 sec             23.589 sec      29-Jun-2012
    30-Jun-2012     +             25 sec             24.583 sec      29-Jun-2015
    30-Jun-2015     +             26 sec             25.671 sec      30-Dec-2016
    31-Dec-2016     +             27 sec             26.403 sec      27-Jun-2023
</pre></div></div></div><p>Attach <code class="literal">lsEvents</code> to <code class="literal">IERSdata1972</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972.Properties.Events = lsEvents;</pre></div></div></div><p>Copy the cumulative adjustments by calling <code class="literal">syncevents</code>. The attached event table has interval events, so <code class="literal">syncevents</code> fills in every row of <code class="literal">IERSdata1972</code> with event data that occurs during the intervals. Every row of <code class="literal">IERSdata1972</code> records the cumulative adjustment that occurred up to that time.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972 = syncevents(IERSdata1972,EventDataVariables=<span style="color:#A020F0">"CumulativeAdjustment"</span>);
IERSdata1972(timerange(<span style="color:#A020F0">"2016-12-29"</span>,<span style="color:#A020F0">"2017-01-04"</span>),:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>6×3 timetable</em></span>
                    Date          ExcessLOD      UnadjustedDiff    CumulativeAdjustment
                 ___________    _____________    ______________    ____________________
    &lt;1 event&gt;    29-Dec-2016    0.0008055 sec      26.402 sec             26 sec       
                 30-Dec-2016    0.0008525 sec      26.402 sec            NaN sec       
    &lt;1 event&gt;    31-Dec-2016    0.0009173 sec      26.403 sec             27 sec       
    &lt;1 event&gt;    01-Jan-2017     0.001016 sec      26.404 sec             27 sec       
    &lt;1 event&gt;    02-Jan-2017    0.0011845 sec      26.405 sec             27 sec       
    &lt;1 event&gt;    03-Jan-2017    0.0013554 sec      26.406 sec             27 sec       

</pre></div></div></div><p>The new state variable is just like all the other variables in <code class="literal">IERSdata1972</code>, with a value that is defined at each time. You can use it to compute the actual differences between UTC and UT1, given all the leap second adjustments, by subtracting it from the unadjusted difference. The convention is to compute the actual difference with the opposite sign as UT1 &#8211; UTC and denote it as DUT1.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata1972.DUT1 = IERSdata1972.UnadjustedDiff - IERSdata1972.CumulativeAdjustment;
IERSdata1972(timerange(<span style="color:#A020F0">"2016-12-29"</span>,<span style="color:#A020F0">"2017-01-04"</span>),:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>6×4 timetable</em></span>
                    Date          ExcessLOD      UnadjustedDiff    CumulativeAdjustment        DUT1    
                 ___________    _____________    ______________    ____________________    ____________
    &lt;1 event&gt;    29-Dec-2016    0.0008055 sec      26.402 sec             26 sec            0.40159 sec
                 30-Dec-2016    0.0008525 sec      26.402 sec            NaN sec                NaN sec
    &lt;1 event&gt;    31-Dec-2016    0.0009173 sec      26.403 sec             27 sec           -0.59676 sec
    &lt;1 event&gt;    01-Jan-2017     0.001016 sec      26.404 sec             27 sec           -0.59584 sec
    &lt;1 event&gt;    02-Jan-2017    0.0011845 sec      26.405 sec             27 sec           -0.59482 sec
    &lt;1 event&gt;    03-Jan-2017    0.0013554 sec      26.406 sec             27 sec           -0.59364 sec

</pre></div></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-7">Plot State Variable Against Data<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_A192E392" class="anchor_target"></span></h3><p>The IERS makes leap second adjustments to keep UTC roughly in sync with UT1. To show how this adjustment works, plot the <code class="literal">CumulativeAdjustment</code> state variable as a piecewise-constant step function over time. The step function approximates the accumulated excess LOD, so subtracting it keeps DUT1 small. For visual confirmation, plot DUT1 along the same time axis by using the <code class="literal">stackedplot</code> function. Plot <code class="literal">UnadjustedDiff</code> and <code class="literal">CumulativeAdjustment</code> together along one <span class="emphasis"><em>y</em></span>-axis, with a legend, and plot <code class="literal">DUT1</code> along a second <span class="emphasis"><em>y</em></span>-axis. Because the events in the attached event table were converted to interval events that cover the entire time range, it is redundant to plot events. So, specify the <code class="literal">EventsVisible</code> name-value argument as <code class="literal">"off"</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>stackedplot(IERSdata1972,{[<span style="color:#A020F0">"UnadjustedDiff"</span>,<span style="color:#A020F0">"CumulativeAdjustment"</span>],<span style="color:#A020F0">"DUT1"</span>},EventsVisible=<span style="color:#A020F0">"off"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e35470" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_05.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><h3 class="title" id="AddEventsFromExternalDataToTimetableExample-8">Choose Events or State Variables<span id="mw_rtc_AddEventsFromExternalDataToTimetableExample_H_DF207E87" class="anchor_target"></span></h3><p>The two representations, a separate list of events and a state variable defined at all times, are conceptually different. In some cases, there might not be a useful definition of a "state" that corresponds to the periods between instantaneous events. But when there is, the two representations are equivalent and useful in similar ways. For example, to select all the data after the 22nd leap second but before the 23rd, you can use an event filter and <code class="literal">timerange</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>EF = eventfilter(IERSdata1972)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>EF = 
  eventfilter with no constraints and no selected variables

    &lt;unconstrained&gt;

  VariableNames: Date, Type, CumulativeAdjustment, UnadjustedDiff, EventEnds

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>from22to23 = timerange(EF.CumulativeAdjustment == seconds(22),EF.CumulativeAdjustment == seconds(23),<span style="color:#A020F0">"openright"</span>);
data22to23 = IERSdata1972(from22to23,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>data22to23=<span class="emphasis"><em>2557×4 timetable</em></span>
                    Date          ExcessLOD      UnadjustedDiff    CumulativeAdjustment        DUT1    
                 ___________    _____________    ______________    ____________________    ____________
    &lt;1 event&gt;    31-Dec-1998    0.0010954 sec      21.282 sec             22 sec           -0.71811 sec
    &lt;1 event&gt;    01-Jan-1999    0.0009738 sec      21.283 sec             22 sec           -0.71702 sec
    &lt;1 event&gt;    02-Jan-1999     0.000888 sec      21.284 sec             22 sec           -0.71604 sec
    &lt;1 event&gt;    03-Jan-1999    0.0008605 sec      21.285 sec             22 sec           -0.71516 sec
    &lt;1 event&gt;    04-Jan-1999    0.0008798 sec      21.286 sec             22 sec           -0.71429 sec
    &lt;1 event&gt;    05-Jan-1999    0.0008935 sec      21.287 sec             22 sec           -0.71342 sec
    &lt;1 event&gt;    06-Jan-1999    0.0009693 sec      21.287 sec             22 sec           -0.71252 sec
    &lt;1 event&gt;    07-Jan-1999    0.0010658 sec      21.288 sec             22 sec           -0.71155 sec
    &lt;1 event&gt;    08-Jan-1999    0.0010857 sec       21.29 sec             22 sec           -0.71049 sec
    &lt;1 event&gt;    09-Jan-1999    0.0010715 sec      21.291 sec             22 sec            -0.7094 sec
    &lt;1 event&gt;    10-Jan-1999    0.0010519 sec      21.292 sec             22 sec           -0.70833 sec
    &lt;1 event&gt;    11-Jan-1999    0.0010021 sec      21.293 sec             22 sec           -0.70728 sec
    &lt;1 event&gt;    12-Jan-1999    0.0008986 sec      21.294 sec             22 sec           -0.70628 sec
    &lt;1 event&gt;    13-Jan-1999    0.0007891 sec      21.295 sec             22 sec           -0.70538 sec
    &lt;1 event&gt;    14-Jan-1999    0.0007236 sec      21.295 sec             22 sec           -0.70459 sec
    &lt;1 event&gt;    15-Jan-1999    0.0006842 sec      21.296 sec             22 sec           -0.70386 sec
      &#x22EE;

</pre></div></div></div><p>As an alternative, you can create a logical subscript from the state variable that selects the same data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>from22to23 = (IERSdata1972.CumulativeAdjustment == seconds(22));
data22to23 = IERSdata1972(from22to23,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>data22to23=<span class="emphasis"><em>2556×4 timetable</em></span>
                    Date          ExcessLOD      UnadjustedDiff    CumulativeAdjustment        DUT1    
                 ___________    _____________    ______________    ____________________    ____________
    &lt;1 event&gt;    31-Dec-1998    0.0010954 sec      21.282 sec             22 sec           -0.71811 sec
    &lt;1 event&gt;    01-Jan-1999    0.0009738 sec      21.283 sec             22 sec           -0.71702 sec
    &lt;1 event&gt;    02-Jan-1999     0.000888 sec      21.284 sec             22 sec           -0.71604 sec
    &lt;1 event&gt;    03-Jan-1999    0.0008605 sec      21.285 sec             22 sec           -0.71516 sec
    &lt;1 event&gt;    04-Jan-1999    0.0008798 sec      21.286 sec             22 sec           -0.71429 sec
    &lt;1 event&gt;    05-Jan-1999    0.0008935 sec      21.287 sec             22 sec           -0.71342 sec
    &lt;1 event&gt;    06-Jan-1999    0.0009693 sec      21.287 sec             22 sec           -0.71252 sec
    &lt;1 event&gt;    07-Jan-1999    0.0010658 sec      21.288 sec             22 sec           -0.71155 sec
    &lt;1 event&gt;    08-Jan-1999    0.0010857 sec       21.29 sec             22 sec           -0.71049 sec
    &lt;1 event&gt;    09-Jan-1999    0.0010715 sec      21.291 sec             22 sec            -0.7094 sec
    &lt;1 event&gt;    10-Jan-1999    0.0010519 sec      21.292 sec             22 sec           -0.70833 sec
    &lt;1 event&gt;    11-Jan-1999    0.0010021 sec      21.293 sec             22 sec           -0.70728 sec
    &lt;1 event&gt;    12-Jan-1999    0.0008986 sec      21.294 sec             22 sec           -0.70628 sec
    &lt;1 event&gt;    13-Jan-1999    0.0007891 sec      21.295 sec             22 sec           -0.70538 sec
    &lt;1 event&gt;    14-Jan-1999    0.0007236 sec      21.295 sec             22 sec           -0.70459 sec
    &lt;1 event&gt;    15-Jan-1999    0.0006842 sec      21.296 sec             22 sec           -0.70386 sec
      &#x22EE;

</pre></div></div></div><p>Both representations have their uses. For example, while each event can be plotted as a point, the state variable is the more convenient form for highlighting regions between events in a plot. To highlight the region between the 22nd and 23rd leap second, use the <code class="literal">from22to23</code> logical subscript created from <code class="literal">CumulativeAdjustment</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata1972,<span style="color:#A020F0">"UnadjustedDiff"</span>);
hold <span style="color:#A020F0">on</span>
plot(IERSdata1972(from22to23,:),<span style="color:#A020F0">"UnadjustedDiff"</span>,Color=<span style="color:#A020F0">"r"</span>,LineWidth=4);
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e35509" class="mediaobject"><p><img src="../../examples/matlab/win64/AddEventsFromExternalDataToTimetableExample_06.png" alt="Figure contains an axes object. The axes object with xlabel Date, ylabel UnadjustedDiff contains 2 objects of type line." width="560"></p></div></div><p>You can switch between the two representations. In this case, to get the leap second event dates from <code class="literal">CumulativeAdjustment</code>, find the locations where the adjustment changes, and subtract one day. The <code class="literal">eventTimes</code> output represents the dates on which leap seconds were added, which are instantaneous events.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>eventTimes = IERSdata1972.Date(diff(IERSdata1972.CumulativeAdjustment) ~= 0) + caldays(1)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>eventTimes = <span class="emphasis"><em>55×1 datetime</em></span>
   29-Jun-1972
   30-Jun-1972
   30-Dec-1972
   31-Dec-1972
   30-Dec-1973
   31-Dec-1973
   30-Dec-1974
   31-Dec-1974
   30-Dec-1975
   31-Dec-1975
   30-Dec-1976
   31-Dec-1976
   30-Dec-1977
   31-Dec-1977
   30-Dec-1978
   31-Dec-1978
   30-Dec-1979
   31-Dec-1979
   29-Jun-1981
   30-Jun-1981
   29-Jun-1982
   30-Jun-1982
   29-Jun-1983
   30-Jun-1983
   29-Jun-1985
   30-Jun-1985
   30-Dec-1987
   31-Dec-1987
   30-Dec-1989
   31-Dec-1989
      &#x22EE;

</pre></div></div></div><p>To represent events, you can use event tables, with either instantaneous events or interval events, or state variables in timetables. The representation you use depends on which one is more convenient and useful for the data analysis that you plan to conduct. You might even switch between representations as you go. All these representations are useful ways to add information about events to your timestamped data in a timetable.</p></div>
        <h2 id="d126e35529">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/eventtable.html"><span itemprop="name"><code class="object">eventtable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timetable.html"><span itemprop="name"><code class="function">timetable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/datetime.html"><span itemprop="name"><code class="object">datetime</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/duration.seconds.html"><span itemprop="name"><code class="function">seconds</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/leapseconds.html"><span itemprop="name"><code class="function">leapseconds</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timerange.html"><span itemprop="name"><code class="function">timerange</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/stackedplot.html"><span itemprop="name"><code class="function">stackedplot</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/readtable.html"><span itemprop="name"><code class="function">readtable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/table2timetable.html"><span itemprop="name"><code class="function">table2timetable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/double.cumsum.html"><span itemprop="name"><code class="function">cumsum</code></span></a></span></p>
        <h3 id="d126e35563">Topics</h3><ul class="list-unstyled"><li><a href="represent-date-and-times-in-MATLAB.html" class="a">Represent Dates and Times in MATLAB</a></li><li><a href="resample-and-aggregate-data-in-timetable.html" class="a">Resample and Aggregate Data in Timetable</a></li><li><a href="clean-timetable-with-missing-duplicate-or-irregular-times.html" class="a">Clean Timetable with Missing, Duplicate, or Nonuniform Times</a></li><li><a href="computations-with-numeric-data-in-table-or-timetable.html" class="a">Data Cleaning and Calculations in Tables</a></li><li><a href="grouped-calculations-in-tables-and-timetables.html" class="a">Grouped Calculations in Tables and Timetables</a></li><li><a href="subscript-into-times-of-timetable.html" class="a">Select Times in Timetable</a></li><li><a href="find-events-in-timetable-using-event-table.html" class="a">Find Events in Timetable Using Event Table</a></li></ul>
        
      </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
