<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Select Times in Timetable</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../language-fundamentals.html",
          "name": "Language Fundamentals"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-types.html",
          "name": "Data Types"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../timetables.html",
          "name": "Timetables"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "timetables"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Select Times in Timetable",
          "description": "Select row times from a timetable by using the timerange or withtol functions, or by matching date or time components of the row times. Resample or group the selected timetable data by using the retime function.",
          "thumbnailURL": "../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_05.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.PreprocessTabularDataWithTimeBasedSubscriptingExample",
          "name": "PreprocessTabularDataWithTimeBasedSubscriptingExample",
          "url": "subscript-into-times-of-timetable.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/PreprocessTabularDataWithTimeBasedSubscriptingExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "PreprocessTabularDataWithTimeBasedSubscriptingExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Select row times from a timetable by using the timerange or withtol functions, or by matching date or time components of the row times."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_05.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../language-fundamentals.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Language Fundamentals</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Types</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../timetables.html?s_tid=CRUX_lftnav" itemprop="url" id="bvdhhum-1"><span itemprop="title">Timetables</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Select Times in Timetable</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#PreprocessTabularDataWithTimeBasedSubscriptingExample-1" class="nav-link intrnllnk">Select Time Range</a></li><li class="nav-item"><a href="#PreprocessTabularDataWithTimeBasedSubscriptingExample-2" class="nav-link intrnllnk">Match Units of Time</a></li><li class="nav-item"><a href="#PreprocessTabularDataWithTimeBasedSubscriptingExample-3" class="nav-link intrnllnk">Group by Time Period</a></li><li class="nav-item"><a href="#PreprocessTabularDataWithTimeBasedSubscriptingExample-4" class="nav-link intrnllnk">Calculate Durations Using Row Times</a></li><li class="nav-item"><a href="#d126e33291" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="bvdi0bs">Select Times in Timetable</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/PreprocessTabularDataWithTimeBasedSubscriptingExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><span id="error_timetable_InvalidRowSubscriptsDatetime" class="anchor_target"></span><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-PreprocessTabularDataWithTimeBasedSubscriptingExample"><meta itemprop="exampletitle" content="Select Times in Timetable"></div><span id="PreprocessTabularDataWithTimeBasedSubscriptingExample" class="anchor_target"></span><p class="shortdesc">A timetable is a type of table that associates a time with each row. You can select time-based subsets of its data in several ways:</p><div class="itemizedlist"><ul><li><p>Find times within a certain range using the <code class="literal">timerange</code> or <code class="literal">withtol</code> functions.</p></li><li><p>Match recurring units of time, such as days or months, using the components of <code class="literal">datetime</code> arrays.</p></li><li><p>Resample or group data with the <code class="literal">retime</code> function.</p></li></ul></div><p>For example, read a sample file <code class="literal">outages.csv</code>, containing data representing electric utility outages in the United States from 2002&#8211;2014. The vector of row times, <code class="literal">OutageTime</code>, indicates when the outages occurred. The <code class="literal">readtimetable</code> function imports it as a <code class="literal">datetime</code> array. Display the first five rows.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TT = readtimetable(<span style="color:#A020F0">'outages.csv'</span>);
head(TT,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>       OutageTime          Region         Loss     Customers     RestorationTime            Cause       
    ________________    _____________    ______    __________    ________________    ___________________

    2002-02-01 12:18    {'SouthWest'}    458.98    1.8202e+06    2002-02-07 16:50    {'winter storm'   }
    2003-01-23 00:49    {'SouthEast'}    530.14    2.1204e+05                 NaT    {'winter storm'   }
    2003-02-07 21:15    {'SouthEast'}     289.4    1.4294e+05    2003-02-17 08:14    {'winter storm'   }
    2004-04-06 05:44    {'West'     }    434.81    3.4037e+05    2004-04-06 06:10    {'equipment fault'}
    2002-03-16 06:18    {'MidWest'  }    186.44    2.1275e+05    2002-03-18 23:23    {'severe storm'   }
</pre></div></div></div><p><span class="emphasis"><em>Before R2019a, read tabular data with </em></span><a href="../ref/readtable.html" data-docid="matlab_ref#btx_238-1" class="a"><code class="olink">readtable</code></a><span class="emphasis"><em> and convert it to a timetable using </em></span><a href="../ref/table2timetable.html" data-docid="matlab_ref#bvdhiue" class="a"><code class="olink">table2timetable</code></a><span class="emphasis"><em>.</em></span></p><div class="procedure"><h3 class="title" id="PreprocessTabularDataWithTimeBasedSubscriptingExample-1">Select Time Range</h3><p>To find data in a specific range, you can use the <code class="literal">timerange</code> function, which defines time-based subscripts for indexing. For instance, define a range for the summer of 2008, which started on June 20 and ended on September 21. By default, <code class="literal">timerange</code> defines a half-open interval that is closed on the left and open on the right, so specify the end date as September 22.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TR = timerange(<span style="color:#A020F0">"2008-06-20"</span>,<span style="color:#A020F0">"2008-09-22"</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>TR = 
	timetable timerange subscript:

		Select timetable rows with times in the half-open interval:
		  Starting at, including:   20-Jun-2008 00:00:00
		  Ending at, but excluding: 22-Sep-2008 00:00:00

	See Select Times in Timetable.

</pre></div></div></div><p>Find the outages that occurred in that range, and then plot the number of customers affected over time.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>summer08 = TT(TR,:);
stem(summer08.OutageTime,summer08.Customers)
ylabel(<span style="color:#A020F0">"Customers"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e33125" class="mediaobject"><p><img src="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_01.png" alt="Figure contains an axes object. The axes object with ylabel Customers contains an object of type stem." width="560"></p></div></div><p>Several outages during that time range had high customer impact. Expand the range to a time period that spans the entire year of 2008 and look for similarly high numbers.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TR = timerange(<span style="color:#A020F0">"2008"</span>,<span style="color:#A020F0">"years"</span>);
all08 = TT(TR,:);
high08 = all08(all08.Customers &gt; 500000,:);

stem(high08.OutageTime,high08.Customers)
ylabel(<span style="color:#A020F0">'Customers'</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e33133" class="mediaobject"><p><img src="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_02.png" alt="Figure contains an axes object. The axes object with ylabel Customers contains an object of type stem." width="560"></p></div></div><p>The <code class="literal">timerange</code> function is also helpful for selecting specific dates. Selecting times by comparing <code class="literal">datetime</code> values can give misleading results because all <code class="literal">datetime</code> values include both date and time components. However, when you specify only the date component of a <code class="literal">datetime</code> value, the time component is set to midnight. Therefore, although there is data from June 26, a comparison like this one returns no results.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>any(summer08.OutageTime == datetime(<span style="color:#A020F0">"2008-06-26"</span>))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = <span class="emphasis"><em>logical</em></span>
   0

</pre></div></div></div><p>Instead, you can use <code class="literal">timerange</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TR = timerange(<span style="color:#A020F0">"2008-06-26"</span>,<span style="color:#A020F0">"days"</span>);
june26 = summer08(TR,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>june26=<span class="emphasis"><em>1×5 timetable</em></span>
       OutageTime          Region         Loss     Customers    RestorationTime           Cause      
    ________________    _____________    ______    _________    ________________    _________________

    2008-06-26 22:36    {'NorthEast'}    425.21      93612      2008-06-27 06:53    {'thunder storm'}

</pre></div></div></div><p>Another way to define a range is to specify a tolerance around a time using <code class="literal">withtol</code>. For example, find rows from the summer of 2008 where <code class="literal">OutageTime</code> is within three days of Labor Day, September 1.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>WT = withtol(<span style="color:#A020F0">"2008-09-01"</span>,days(3));
nearSep1 = summer08(WT,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>nearSep1=<span class="emphasis"><em>4×5 timetable</em></span>
       OutageTime          Region         Loss     Customers    RestorationTime            Cause       
    ________________    _____________    ______    _________    ________________    ___________________

    2008-09-01 23:35    {'SouthEast'}    206.27     2.27e+05                 NaT    {'equipment fault'}
    2008-09-01 00:18    {'MidWest'  }    510.05        74213    2008-09-01 14:07    {'thunder storm'  }
    2008-09-02 19:01    {'MidWest'  }       NaN    2.215e+05    2008-09-03 02:58    {'severe storm'   }
    2008-08-29 20:25    {'West'     }       NaN        31624    2008-09-01 01:51    {'wind'           }

</pre></div></div></div><h3 class="title" id="PreprocessTabularDataWithTimeBasedSubscriptingExample-2">Match Units of Time</h3><p>You also can use units of <code class="literal">datetime</code> values, such as hours or days, to identify rows for logical indexing. This method can be useful for specifying periodic intervals.</p><p>For example, find the values of <code class="literal">OutageTime</code> whose month components have values of 3 or less, corresponding to January, February, and March of each year. Use the resulting logical array to index into <code class="literal">TT</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TR = (month(TT.OutageTime) &lt;= 3);
winterTT = TT(TR,:);

head(winterTT,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>       OutageTime          Region         Loss     Customers     RestorationTime          Cause      
    ________________    _____________    ______    __________    ________________    ________________

    2002-02-01 12:18    {'SouthWest'}    458.98    1.8202e+06    2002-02-07 16:50    {'winter storm'}
    2003-01-23 00:49    {'SouthEast'}    530.14    2.1204e+05                 NaT    {'winter storm'}
    2003-02-07 21:15    {'SouthEast'}     289.4    1.4294e+05    2003-02-17 08:14    {'winter storm'}
    2002-03-16 06:18    {'MidWest'  }    186.44    2.1275e+05    2002-03-18 23:23    {'severe storm'}
    2005-02-04 08:18    {'MidWest'  }       NaN           NaN    2005-02-04 19:51    {'attack'      }
</pre></div></div></div><p>Create a pie chart of the wintertime causes. The <code class="literal">pie</code> function accepts only numeric or <code class="literal">categorical</code> inputs, so first convert <code class="literal">Cause</code> to <code class="literal">categorical</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>winterTT.Cause = categorical(winterTT.Cause);
pie(winterTT.Cause)
title(<span style="color:#A020F0">"Causes of Outages, January to March"</span>);</pre></div></div></div><div class="informalfigure"><div id="d126e33205" class="mediaobject"><p><img src="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_03.png" alt="Figure contains an axes object. The hidden axes object with title Causes of Outages, January to March contains 16 objects of type patch, text. These objects represent attack, energy emergency, equipment fault, severe storm, thunder storm, unknown, wind, winter storm." width="560"></p></div></div><h3 class="title" id="PreprocessTabularDataWithTimeBasedSubscriptingExample-3">Group by Time Period</h3><p>The <code class="literal">retime</code> function adjusts row times to create specified intervals, either by resampling or grouping values. Its pre-defined intervals range from seconds to years, and you can specify how to handle missing or multiple values for the intervals. For instance, you can select the first observation from each week, or count observations in a quarter.</p><p>For the outage data, you can use <code class="literal">retime</code> to find totals for each year. First, create a timetable with only numeric variables. Then, call <code class="literal">retime</code> and specify a yearly interval, combining multiple values using a sum. The output has one row for each year, containing the total losses and total customers affected during that year.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>numTT = TT(:,vartype(<span style="color:#A020F0">"numeric"</span>));
numTT = retime(numTT,<span style="color:#A020F0">"yearly"</span>,<span style="color:#A020F0">"sum"</span>);
head(numTT,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>       OutageTime       Loss     Customers 
    ________________    _____    __________

    2002-01-01 00:00    81335    1.3052e+07
    2003-01-01 00:00    58036     1.396e+07
    2004-01-01 00:00    51014    1.5523e+07
    2005-01-01 00:00    33980    8.7334e+06
    2006-01-01 00:00    35129    2.5729e+07
</pre></div></div></div><p>Create a bar chart of the number of customers affected each year.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>bar(numTT.OutageTime,numTT.Customers)
xlabel(<span style="color:#A020F0">"Year"</span>)
ylabel(<span style="color:#A020F0">"Customers"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e33229" class="mediaobject"><p><img src="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_04.png" alt="Figure contains an axes object. The axes object with xlabel Year, ylabel Customers contains an object of type bar." width="560"></p></div></div><h3 class="title" id="PreprocessTabularDataWithTimeBasedSubscriptingExample-4">Calculate Durations Using Row Times</h3><p>You can use the row times of a timetable with other <code class="literal">datetime</code> or <code class="literal">duration</code> values to perform calculations. For example, calculate the durations of the power outages listed in the outage data. Then calculate the monthly medians of the outage durations and plot them.</p><p>First add the outage durations to <code class="literal">TT</code> by subtracting the row times (which are the starts of power outages) from <code class="literal">RestorationTime</code> (which are the ends of the power outages). Change the format of <code class="literal">OutageDuration</code> to display the durations of the outages in days. Display the first five rows of <code class="literal">TT</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>TT.OutageDuration = TT.RestorationTime - TT.OutageTime;
TT.OutageDuration.Format = <span style="color:#A020F0">'d'</span>;
head(TT,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>       OutageTime          Region         Loss     Customers     RestorationTime            Cause           OutageDuration
    ________________    _____________    ______    __________    ________________    ___________________    ______________

    2002-02-01 12:18    {'SouthWest'}    458.98    1.8202e+06    2002-02-07 16:50    {'winter storm'   }      6.1889 days 
    2003-01-23 00:49    {'SouthEast'}    530.14    2.1204e+05                 NaT    {'winter storm'   }         NaN days 
    2003-02-07 21:15    {'SouthEast'}     289.4    1.4294e+05    2003-02-17 08:14    {'winter storm'   }      9.4576 days 
    2004-04-06 05:44    {'West'     }    434.81    3.4037e+05    2004-04-06 06:10    {'equipment fault'}    0.018056 days 
    2002-03-16 06:18    {'MidWest'  }    186.44    2.1275e+05    2002-03-18 23:23    {'severe storm'   }      2.7118 days 
</pre></div></div></div><p>Create a timetable that has only the outage durations. Some rows of <code class="literal">TT</code> have missing values, <code class="literal">NaT</code>, for the restoration times, leading to <code class="literal">NaN</code> values in <code class="literal">OutageDuration</code>. To remove the <code class="literal">NaN</code> values from <code class="literal">medianTT</code>, use the <code class="literal">rmmissing</code> function. Then use <code class="literal">retime</code> to calculate the monthly median outage duration. Display the first five rows of <code class="literal">medianTT</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>medianTT = TT(:,<span style="color:#A020F0">"OutageDuration"</span>);
medianTT = rmmissing(medianTT); 
medianTT = retime(medianTT,<span style="color:#A020F0">'monthly'</span>,@median);
head(medianTT,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>       OutageTime       OutageDuration
    ________________    ______________

    2002-02-01 00:00      6.1889 days 
    2002-03-01 00:00      2.7472 days 
    2002-04-01 00:00         NaN days 
    2002-05-01 00:00     0.72917 days 
    2002-06-01 00:00     0.22431 days 
</pre></div></div></div><p>Create a stairstep chart of the monthly median outage durations.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>stairs(medianTT.OutageTime,medianTT.OutageDuration)
xlabel(<span style="color:#A020F0">"Year"</span>)
ylabel(<span style="color:#A020F0">"Median Duration (days)"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e33284" class="mediaobject"><p><img src="../../examples/matlab/win64/PreprocessTabularDataWithTimeBasedSubscriptingExample_05.png" alt="Figure contains an axes object. The axes object with xlabel Year, ylabel Median Duration (days) contains an object of type stair." width="560"></p></div></div></div>
        <h2 id="d126e33291">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/categorical.html"><span itemprop="name"><code class="object">categorical</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timetable.html"><span itemprop="name"><code class="function">timetable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timetable.retime.html"><span itemprop="name"><code class="function">retime</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timerange.html"><span itemprop="name"><code class="function">timerange</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/readtimetable.html"><span itemprop="name"><code class="function">readtimetable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/datetime.month.html"><span itemprop="name"><code class="function">month</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/withtol.html"><span itemprop="name"><code class="function">withtol</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/rmmissing.html"><span itemprop="name"><code class="function">rmmissing</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/vartype.html"><span itemprop="name"><code class="function">vartype</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/datetime.html"><span itemprop="name"><code class="object">datetime</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/duration.html"><span itemprop="name"><code class="object">duration</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/nat.html"><span itemprop="name"><code class="function">NaT</code></span></a></span></p>
        <h3 id="d126e33332">Topics</h3><ul class="list-unstyled"><li><a href="resample-and-aggregate-data-in-timetable.html" class="a">Resample and Aggregate Data in Timetable</a></li><li><a href="clean-timetable-with-missing-duplicate-or-irregular-times.html" class="a">Clean Timetable with Missing, Duplicate, or Nonuniform Times</a></li><li><a href="access-data-in-a-table.html" class="a">Access Data in Tables</a></li><li><a href="calculations-when-tables-have-both-numeric-and-nonnumeric-data.html" class="a">Calculations When Tables Have Both Numeric and Nonnumeric Data</a></li><li><a href="grouped-calculations-in-tables-and-timetables.html" class="a">Grouped Calculations in Tables and Timetables</a></li><li><a href="compare-dates-and-time.html" class="a">Compare Dates and Time</a></li><li><a href="compute-elapsed-time.html" class="a">Date and Time Arithmetic</a></li></ul>
        
      </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
