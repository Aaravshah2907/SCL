<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Write Test Using Setup and Teardown Functions</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../software-development.html",
          "name": "Software Development Tools"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../matlab-unit-test-framework.html",
          "name": "Testing Frameworks"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../write-unit-tests.html",
          "name": "Write Unit Tests"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "write-unit-tests"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Write Test Using Setup and Teardown Functions",
          "description": "Write a function-based test with setup and teardown functions that run once in your test file and before and after each test function in the file.",
          "thumbnailURL": "../../includes/product/images/doc_center/DefaultImage.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.WriteTestUsingSetupandTeardownFunctionsExample",
          "name": "WriteTestUsingSetupandTeardownFunctionsExample",
          "url": "write-test-using-setup-and-teardown-functions.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/WriteTestUsingSetupandTeardownFunctionsExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "WriteTestUsingSetupandTeardownFunctionsExample.mlx",
        "axesPropertiesTest.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="con">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="con">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Write a function-based test with setup and teardown functions that run once in your test file and before and after each test function in the file."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../includes/product/images/doc_center/DefaultImage.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../software-development.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Software Development Tools</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../matlab-unit-test-framework.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Testing Frameworks</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../write-unit-tests.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_da8ee3e3-f207-4fba-a957-34116645b7e8"><span itemprop="title">Write Unit Tests</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Write Test Using Setup and Teardown Functions</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-1" class="nav-link intrnllnk">Create axesPropertiesTest.m File</a></li><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-2" class="nav-link intrnllnk">Create File Fixture Functions</a></li><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-3" class="nav-link intrnllnk">Create Fresh Fixture Functions</a></li><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-4" class="nav-link intrnllnk">Create Test Functions</a></li><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-5" class="nav-link intrnllnk">Run Tests</a></li><li class="nav-item"><a href="#WriteTestUsingSetupandTeardownFunctionsExample-6" class="nav-link intrnllnk">Create Table of Test Results</a></li><li class="nav-item"><a href="#d126e89659" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=write-unit-tests&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=write-unit-tests&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=write-unit-tests&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=write-unit-tests&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=write-unit-tests&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=write-unit-tests&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="bt0jk9g-1">Write Test Using Setup and Teardown Functions</h1><div class="examples_short_list hidden_ios_android" data-products="ML ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/WriteTestUsingSetupandTeardownFunctionsExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-WriteTestUsingSetupandTeardownFunctionsExample"><meta itemprop="exampletitle" content="Write Test Using Setup and Teardown Functions"></div><span id="WriteTestUsingSetupandTeardownFunctionsExample" class="anchor_target"></span><p class="shortdesc">This example shows how to write unit tests for a couple of MATLAB&#174; figure properties using file fixtures and fresh fixtures. </p><div class="procedure"><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-1">Create axesPropertiesTest.m File</h3><p>Create a file containing the main function that tests figure properties and include two test functions. One function verifies that the <span class="emphasis"><em>x</em></span>-axis limits are correct, and the other one verifies that the face color of a surface is correct. </p><p>In a folder on your MATLAB path, create <code class="literal">axesPropertiesTest.m</code>. In the main function of this file, have <code class="literal">functiontests</code> create an array of tests from each local function in <code class="literal">axesPropertiesTest.m</code> with a call to the <code class="literal">localfunctions</code> function. </p><div class="code_responsive"><pre id="d126e89478" class="programlisting"><span style="color:#0000FF">function</span> tests = axesPropertiesTest
tests = functiontests(localfunctions);
<span style="color:#0000FF">end</span>
</pre></div><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-2">Create File Fixture Functions</h3><p>File fixture functions are setup and teardown code that runs a single time in your test file. These fixtures are shared across the test file. In this example, the file fixture functions create a temporary folder and set it as the current working folder. They also create and save a new figure for testing. After tests are complete, the framework reinstates the original working folder and deletes the temporary folder and saved figure. </p><p>In this example, a helper function creates a simple figure &#8212; a red cylinder. In a more realistic scenario, this code is part of the product under test and is computationally expensive, thus motivating the intent to create the figure only once and to load independent copies of the result for each test function. For this example, however, you want to create this helper function as a local function to <code class="literal">axesPropertiesTest</code>. Note that the test array does not include the function because its name does not start or end with ‘test’. </p><p>Write a helper function that creates a simple red cylinder and add it as a local function to <code class="literal">axesPropertiesTest</code>. </p><div class="code_responsive"><pre id="d126e89491" class="programlisting"><span style="color:#0000FF">function</span> f = createFigure
f = figure;
ax = axes(<span style="color:#A020F0">'Parent'</span>,f);
cylinder(ax,10)
h = findobj(ax,<span style="color:#A020F0">'Type'</span>,<span style="color:#A020F0">'surface'</span>);
h.FaceColor = [1 0 0];
<span style="color:#0000FF">end</span>
</pre></div><p>You must name the setup and teardown functions of a file test fixture <code class="literal">setupOnce</code> and <code class="literal">teardownOnce</code>, respectively. These functions take a single input argument <code class="literal">testCase</code> into which the testing framework automatically passes a function test case object. This test case object contains a <code class="literal">TestData</code> structure that allows data to pass between setup, test, and teardown functions. In this example, the <code class="literal">TestData</code> structure uses assigned fields to store the original path, the temporary folder name, and the figure file name. </p><p>Create the setup and teardown functions as local functions to <code class="literal">axesPropertiesTest</code>. </p><div class="code_responsive"><pre id="d126e89509" class="programlisting"><span style="color:#0000FF">function</span> setupOnce(testCase)
<span style="color:#228B22">% Create and change to temporary folder</span>
testCase.TestData.origPath = pwd;
testCase.TestData.tmpFolder = <span style="color:#A020F0">"tmpFolder"</span> + <span style="color:#0000FF">...</span>
    string(datetime(<span style="color:#A020F0">'now'</span>,<span style="color:#A020F0">'Format'</span>,<span style="color:#A020F0">"yyyyMMdd'T'HHmmss"</span>));
mkdir(testCase.TestData.tmpFolder)
cd(testCase.TestData.tmpFolder)
<span style="color:#228B22">% Create and save a figure</span>
testCase.TestData.figName = <span style="color:#A020F0">'tmpFig.fig'</span>;
aFig = createFigure;
saveas(aFig,testCase.TestData.figName)
close(aFig)
<span style="color:#0000FF">end</span>

<span style="color:#0000FF">function</span> teardownOnce(testCase)
delete(testCase.TestData.figName)
cd(testCase.TestData.origPath)
rmdir(testCase.TestData.tmpFolder)
<span style="color:#0000FF">end</span>
</pre></div><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-3">Create Fresh Fixture Functions</h3><p>Fresh fixtures are function-level setup and teardown code that runs before and after each test function in your file. In this example, the functions open the saved figure and find the handles. After testing, the framework closes the figure. </p><p>You must name fresh fixture functions <code class="literal">setup</code> and <code class="literal">teardown</code>, respectively. Similar to the file fixture functions, these functions take a single input argument <code class="literal">testCase</code>. In this example, these functions create a new field in the <code class="literal">TestData</code> structure that includes handles to the figure and to the axes. This allows information to pass between setup, test, and teardown functions. </p><p>Create the setup and teardown functions as local functions to <code class="literal">axesPropertiesTest</code>. Open the saved figure for each test to ensure test independence. </p><div class="code_responsive"><pre id="d126e89528" class="programlisting"><span style="color:#0000FF">function</span> setup(testCase)
testCase.TestData.Figure = openfig(testCase.TestData.figName);
testCase.TestData.Axes = findobj(testCase.TestData.Figure, <span style="color:#0000FF">...</span>
    <span style="color:#A020F0">'Type'</span>,<span style="color:#A020F0">'Axes'</span>);
<span style="color:#0000FF">end</span>

<span style="color:#0000FF">function</span> teardown(testCase)
close(testCase.TestData.Figure)
<span style="color:#0000FF">end</span>
</pre></div><p>In addition to custom setup and teardown code, the testing framework provides some classes for creating fixtures. For more information, see <a href="../ref/matlab.unittest.fixtures-package.html" data-docid="matlab_ref#bt1xyn3-1" class="a"><code class="olink">matlab.unittest.fixtures</code></a>. </p><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-4">Create Test Functions</h3><p>Each test is a local function that follows the naming convention of having ‘test’ at the beginning or end of the function name. The test array does not include local functions that do not follow this convention. Similar to setup and teardown functions, individual test functions must accept a single input argument <code class="literal">testCase</code>. Use this test case object for verifications, assertions, assumptions, and fatal assertions. </p><p>The <code class="literal">testDefaultXLim</code> function verifies that the x-axis limits are large enough to display the cylinder. The lower limit needs to be less than <code class="literal remove_text_wrapping">-10</code>, and the upper limit needs to be greater than <code class="literal">10</code>. These values come from the figure generated in the helper function &#8212; a cylinder with a <code class="literal">10</code> unit radius centered on the origin. This test function opens the figure created and saved in the <code class="literal">setupOnce</code> function, queries the axes limit, and verifies the limits are correct. The qualification functions <code class="literal">verifyLessThanOrEqual</code> and <code class="literal">verifyGreaterThanOrEqual</code> take as inputs the test case, the actual value, the expected value, and optional diagnostic information to display in the case of failure. </p><p>Create the <code class="literal">testDefaultXLim</code> function as a local function to <code class="literal">axesPropertiesTest</code>. </p><div class="code_responsive"><pre id="d126e89563" class="programlisting"><span style="color:#0000FF">function</span> testDefaultXLim(testCase)
xlim = testCase.TestData.Axes.XLim;
verifyLessThanOrEqual(testCase,xlim(1),-10, <span style="color:#0000FF">...</span>
    <span style="color:#A020F0">'Minimum x-limit was not small enough'</span>)
verifyGreaterThanOrEqual(testCase,xlim(2),10, <span style="color:#0000FF">...</span>
    <span style="color:#A020F0">'Maximum x-limit was not large enough'</span>)
<span style="color:#0000FF">end</span>
</pre></div><p>The <code class="literal">surfaceColorTest</code> function accesses the figure that you created and saved in the <code class="literal">setupOnce</code> function. <code class="literal">surfaceColorTest</code> queries the face color of the cylinder and verifies that it is red. The color red has an RGB value of <code class="literal">[1 0 0]</code>. The qualification function <code class="literal">verifyEqual</code> takes as inputs the test case, the actual value, the expected value, and optional diagnostic information to display in the case of failure. Typically when using <code class="literal">verifyEqual</code> on floating-point values, you specify a tolerance for the comparison. For more information, see <a href="../ref/matlab.unittest.constraints-package.html" data-docid="matlab_ref#bt2fgy6-1" class="a"><code class="olink">matlab.unittest.constraints</code></a>. </p><p>Create the <code class="literal">surfaceColorTest</code> function as a local function to <code class="literal">axesPropertiesTest</code>. </p><div class="code_responsive"><pre id="d126e89588" class="programlisting"><span style="color:#0000FF">function</span> surfaceColorTest(testCase)
h = findobj(testCase.TestData.Axes,<span style="color:#A020F0">'Type'</span>,<span style="color:#A020F0">'surface'</span>);
co = h.FaceColor;
verifyEqual(testCase,co,[1 0 0],<span style="color:#A020F0">'Face color is incorrect'</span>)
<span style="color:#0000FF">end</span>
</pre></div><p>Now the <code class="literal">axesPropertiesTest.m</code> file is complete with a main function, a helper function, file fixture functions, fresh fixture functions, and two test functions. You are ready to run the tests. </p><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-5">Run Tests</h3><p>The next step is to run the tests using the <code class="literal">runtests</code> function. In this example, the call to <code class="literal">runtests</code> results in the following steps:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>The main function creates a test array. </p></li><li><p>The file fixture setup records the working folder, creates a temporary folder, sets the temporary folder as the working folder, then generates and saves a figure. </p></li><li><p>The fresh fixture setup opens the saved figure and finds the handles. </p></li><li><p>The <code class="literal">testDefaultXLim</code> test runs. </p></li><li><p>The fresh fixture teardown closes the figure. </p></li><li><p>The fresh fixture setup opens the saved figure and finds the handles. </p></li><li><p>The <code class="literal">surfaceColorTest</code> test runs. </p></li><li><p>The fresh fixture teardown closes the figure. </p></li><li><p>The file fixture teardown deletes the saved figure, changes back to the original path, and deletes the temporary folder. </p></li></ol></div><p>At the command prompt, generate and run the test suite. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>results = runtests(<span style="color:#A020F0">'axesPropertiesTest.m'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Running axesPropertiesTest
..
Done axesPropertiesTest
__________
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>results = 
  1×2 TestResult array with properties:

    Name
    Passed
    Failed
    Incomplete
    Duration
    Details

Totals:
   2 Passed, 0 Failed, 0 Incomplete.
   0.5124 seconds testing time.

</pre></div></div></div><h3 class="title" id="WriteTestUsingSetupandTeardownFunctionsExample-6">Create Table of Test Results</h3><p>To access functionality available to tables, create one from the <code class="literal">TestResult</code> objects. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>rt = table(results)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>rt=<span class="emphasis"><em>2×6 table</em></span>
                     Name                      Passed    Failed    Incomplete    Duration      Details   
    _______________________________________    ______    ______    __________    ________    ____________

    {'axesPropertiesTest/testDefaultXLim' }    true      false       false       0.35239     {1×1 struct}
    {'axesPropertiesTest/surfaceColorTest'}    true      false       false       0.16001     {1×1 struct}

</pre></div></div></div><p>Sort the test results by increasing duration. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>sortrows(rt,<span style="color:#A020F0">'Duration'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans=<span class="emphasis"><em>2×6 table</em></span>
                     Name                      Passed    Failed    Incomplete    Duration      Details   
    _______________________________________    ______    ______    __________    ________    ____________

    {'axesPropertiesTest/surfaceColorTest'}    true      false       false       0.16001     {1×1 struct}
    {'axesPropertiesTest/testDefaultXLim' }    true      false       false       0.35239     {1×1 struct}

</pre></div></div></div><p>Export the test results to an Excel&#174; spreadsheet.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>writetable(rt,<span style="color:#A020F0">'myTestResults.xls'</span>)</pre></div></div></div></div>
            <h2 id="d126e89659">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.unittest.fixtures-package.html"><span itemprop="name"><code class="package">matlab.unittest.fixtures</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/matlab.unittest.constraints-package.html"><span itemprop="name"><code class="package">matlab.unittest.constraints</code></span></a></span></p>
            <h3 id="d126e89668">Topics</h3><ul class="list-unstyled"><li><a href="function-based-unit-tests.html" class="a">Function-Based Unit Tests</a></li><li><a href="write-simple-test-case-with-functions.html" class="a">Write Simple Test Case Using Functions</a></li><li><a href="types-of-qualifications.html" class="a">Table of Verifications, Assertions, and Other Qualifications</a></li></ul>
        </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
