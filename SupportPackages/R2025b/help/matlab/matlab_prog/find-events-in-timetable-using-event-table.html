<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Find Events in Timetable Using Event Table</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../language-fundamentals.html",
          "name": "Language Fundamentals"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-types.html",
          "name": "Data Types"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../timetables.html",
          "name": "Timetables"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "timetables"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Find Events in Timetable Using Event Table",
          "description": "Find events in your timestamped data. Mark events on data plots and use them to analyze trends.",
          "thumbnailURL": "../../examples/matlab/win64/FindEventsInTimestampedDataExample_06.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "matlab.FindEventsInTimestampedDataExample",
          "name": "FindEventsInTimestampedDataExample",
          "url": "find-events-in-timetable-using-event-table.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('matlab/FindEventsInTimestampedDataExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "FindEventsInTimestampedDataExample.mlx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Find events in your timestamped data."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/matlab/win64/FindEventsInTimestampedDataExample_06.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../language-fundamentals.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Language Fundamentals</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-types.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Types</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../timetables.html?s_tid=CRUX_lftnav" itemprop="url" id="bvdhhum-1"><span itemprop="title">Timetables</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Find Events in Timetable Using Event Table</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-1" class="nav-link intrnllnk">Import Timetable with Length-of-Day Measurements</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-2" class="nav-link intrnllnk">Extract Events from Timetable</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-3" class="nav-link intrnllnk">Attach Event Table to Timetable</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-4" class="nav-link intrnllnk">Plot Events Against Data</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-5" class="nav-link intrnllnk">Create Event Table of Interval Events</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-6" class="nav-link intrnllnk">Create Stacked Plot of Interval Events</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-7" class="nav-link intrnllnk">Convert Interval Events to State Variable</a></li><li class="nav-item"><a href="#FindEventsInTimestampedDataExample-8" class="nav-link intrnllnk">Find More Complex Events in Data</a></li><li class="nav-item"><a href="#d126e36010" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=timetables&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=timetables&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=timetables&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="mw_d9938087-88f5-473c-b9e6-4dd1e455e6d0">Find Events in Timetable Using Event Table</h1><div class="examples_short_list hidden_ios_android" data-products="ML"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('matlab/FindEventsInTimestampedDataExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="matlab-FindEventsInTimestampedDataExample"><meta itemprop="exampletitle" content="Find Events in Timetable Using Event Table"></div><span id="FindEventsInTimestampedDataExample" class="anchor_target"></span><p class="shortdesc">To find and label events in a timetable, attach an <a href="../ref/eventtable.html" data-docid="matlab_ref#mw_38a0cb0f-8eba-45ea-a726-6c49bc32754f" class="a"><code class="olink">eventtable</code></a> to it. An event table is a timetable of <span class="emphasis"><em>events</em></span>. An event consists of an event time (when something happened), often an event length or event end time (how long it happened), often an event label (what happened), and sometimes additional information about the event. When you attach an event table to a timetable, it enables you to find and label rows in the timetable that occur during events. By associating timetable rows with events, you can more easily analyze and plot the data that they contain.</p><p>This example shows how you can define events in data using information that is already within your timetable. In the example, import a timetable of measurements of the Earth's rotation rate from 1962 to the present. The rotation rate varies as a function of time, causing changes in the excess length-of-day to accumulate. When you plot the excess length-of-day as a function of time, the peaks and troughs in the plot represent events in this data set. To analyze these data with event tables, use the <code class="literal">extractevents</code>, <code class="literal">eventfilter</code>, and <code class="literal">syncevents</code> functions. (A related workflow is to add events from an external data source to your timetable. For more information about that workflow, see <a href="add-event-table-from-external-data-to-timetable.html" data-docid="matlab_prog#mw_90835feb-0585-46c7-a7e4-f121f4c586d1" class="a">Add Event Table from External Data to Timetable</a>.) </p><div class="procedure"><h3 class="title" id="FindEventsInTimestampedDataExample-1"><strong class="emphasis bold">Import Timetable with Length-of-Day Measurements</strong><span id="mw_rtc_FindEventsInTimestampedDataExample_H_FE00E8F8" class="anchor_target"></span></h3><p>By definition, a day is 86,400 seconds long, where the second has a precise definition in the International System of Units (SI). However, the length of a day actually varies due to several physical causes. It varies with the seasons by as much as 30 seconds over and 21 seconds under the SI definition because of the eccentricity of Earth's orbit and the tilt of its axis. Averaging these seasonal effects enables the definition of the <span class="emphasis"><em>mean solar day</em></span>, which does not vary in length over a year.</p><p>Also, there is a very long-term slowing in the rotational speed of the Earth due to tidal interaction with the moon; a smaller, opposite, shorter-term component believed to be due to melting of continental ice sheets; very short-term cycles on the order of decades; and unpredictable fluctuations due to geological events and other causes. Because of those effects, the length of a mean solar day might increase or decrease. In recent decades, it has fluctuated up and down, but has mostly been 1&#8211;3 milliseconds longer than 86,400 seconds. That difference is known as the <span class="emphasis"><em>excess Length of Day</em></span>, or <span class="emphasis"><em>excess LOD</em></span>.</p><p>For this example, create a timetable that contains the excess LOD for every day from January 1, 1962, to the present. The <a href="https://www.iers.org/IERS/EN/Home/home_node.html" target="_blank">International Earth Rotation and Reference Systems Service</a> (IERS) collects and publishes this data. However, this data needs preprocessing before storing in a MATLAB timetable because the dates are modified <a href="https://en.wikipedia.org/wiki/Julian_day" target="_blank">Julian dates</a>. To read the IERS data into a table, use the <code class="literal">readtable</code> function. Rename the two variables of interest to <code class="literal">MJD</code> and <code class="literal">ExcessLOD</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>file = <span style="color:#A020F0">"https://datacenter.iers.org/data/latestVersion/223_EOP_C04_14.62-NOW.IAU1980223.txt"</span>;
IERSdata = readtable(file,<span style="color:#A020F0">"NumHeaderLines"</span>,14);
IERSdata.Properties.VariableNames([4 8]) = [<span style="color:#A020F0">"MJD"</span>,<span style="color:#A020F0">"ExcessLOD"</span>];</pre></div></div></div><p>To store the excess LOD values in a timetable, convert the modified Julian dates to <code class="literal">datetime</code> values. Use the <code class="literal">datetime</code> function with the <code class="literal">"ConvertFrom","mjd"</code> name-value argument. Then convert <code class="literal">IERSdata</code> from a table to a timetable using the <code class="literal">table2timetable</code> function.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.Date = datetime(IERSdata.MJD,<span style="color:#A020F0">"ConvertFrom"</span>,<span style="color:#A020F0">"mjd"</span>);
IERSdata.ExcessLOD = seconds(IERSdata.ExcessLOD);
IERSdata = table2timetable(IERSdata(:,[<span style="color:#A020F0">"Date"</span>,<span style="color:#A020F0">"ExcessLOD"</span>]))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdata=<span class="emphasis"><em>22458×1 timetable</em></span>
       Date         ExcessLOD  
    ___________    ____________

    01-Jan-1962    0.001723 sec
    02-Jan-1962    0.001669 sec
    03-Jan-1962    0.001582 sec
    04-Jan-1962    0.001496 sec
    05-Jan-1962    0.001416 sec
    06-Jan-1962    0.001382 sec
    07-Jan-1962    0.001413 sec
    08-Jan-1962    0.001505 sec
    09-Jan-1962    0.001628 sec
    10-Jan-1962    0.001738 sec
    11-Jan-1962    0.001794 sec
    12-Jan-1962    0.001774 sec
    13-Jan-1962    0.001667 sec
    14-Jan-1962     0.00151 sec
    15-Jan-1962    0.001312 sec
    16-Jan-1962    0.001112 sec
      &#x22EE;

</pre></div></div></div><p>Plot the excess LOD as a function of time. When the input is a timetable, the <code class="literal">plot</code> function automatically plots the timetable variables that you specify against the row times.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata,<span style="color:#A020F0">"ExcessLOD"</span>)</pre></div></div></div><div class="informalfigure"><div id="d126e35676" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_01.png" alt="Figure contains an axes object. The axes object with xlabel Date, ylabel ExcessLOD contains an object of type line." width="560"></p></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-2">Extract Events from Timetable<span id="mw_rtc_FindEventsInTimestampedDataExample_H_B5367205" class="anchor_target"></span></h3><p>Since the 1960s there have been several periods when the excess LOD decreased over the short term. If you smooth the excess LOD data, you can see this local behavior more easily.</p><p>To smooth the excess LOD, use the <code class="literal">smoothdata</code> function. Then plot the smoothed data and the excess LOD using the <code class="literal">stackedplot</code> function. It creates a plot of every variable in a timetable and stacks the plots.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.SmoothedELOD = smoothdata(seconds(IERSdata.ExcessLOD),<span style="color:#A020F0">"loess"</span>,<span style="color:#A020F0">"SmoothingFactor"</span>,.4);
stackedplot(IERSdata)</pre></div></div></div><div class="informalfigure"><div id="d126e35694" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_02.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><p>The peaks and troughs of the smoothed data show where the short-term trend changed direction. After reaching a peak, the excess LOD decreases. After reaching a trough, the excess LOD increases. The peaks and troughs are notable events in this data set.</p><p>To identify the peaks and troughs in the smoothed data, use the <code class="literal">islocalmax</code> and <code class="literal">islocalmin</code> functions. Then get the date and the value of the excess LOD for each peak and trough. Create a categorical array with two types, <code class="literal">peak</code> and <code class="literal">trough</code>, which describe these two types of events.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>peaks = find(islocalmax(IERSdata.SmoothedELOD));
troughs = find(islocalmin(IERSdata.SmoothedELOD));
typeLabels = categorical([zeros(size(peaks)); ones(size(troughs))],[0 1],[<span style="color:#A020F0">"peak"</span>,<span style="color:#A020F0">"trough"</span>]);</pre></div></div></div><p>Store the peaks and troughs in an event table. To extract the times of the peaks and troughs from <code class="literal">IERSdata</code>, use the <a href="../ref/timetable.extractevents.html" data-docid="matlab_ref#mw_e12d5735-d249-4784-a0a2-766f4b55d51f" class="a"><code class="olink">extractevents</code></a> function. These times are the event times of the event table. The values in <code class="literal">typeLabels</code> are the event labels for these events. You can consider the peaks and troughs to be <span class="emphasis"><em>instantaneous</em></span> events because they occur on specific dates in the timetable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>extremaEvents = extractevents(IERSdata,[peaks;troughs],EventLabels=typeLabels)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>extremaEvents = <span class="emphasis"><em>10×1 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Lengths Variable: &lt;instantaneous&gt;

       Date        EventLabels
    ___________    ___________

    08-Jul-1972      peak     
    26-Jun-1977      peak     
    14-Oct-1993      peak     
    18-Feb-2008      peak     
    16-Dec-2015      peak     
    10-Aug-1975      trough   
    07-Jan-1987      trough   
    02-Nov-2003      trough   
    09-Jul-2010      trough   
    12-Sep-2022      trough   

</pre></div></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-3">Attach Event Table to Timetable</h3><p>Attach the new event table to the <code class="literal">Events</code> property of <code class="literal">IERSdata</code>. To find and label events using an event table, you must first attach it to a timetable. While this timetable has over 22,000 rows, the attached event table identifies nine events that occur within the time spanned by the timetable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.Properties.Events = extremaEvents;
IERSdata.Properties</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 
  TimetableProperties with properties:

             Description: ''
                UserData: []
          DimensionNames: {'Date'  'Variables'}
           VariableNames: {'ExcessLOD'  'SmoothedELOD'}
    VariableDescriptions: {}
           VariableUnits: {}
      VariableContinuity: []
                RowTimes: [22458×1 datetime]
               StartTime: 01-Jan-1962
              SampleRate: NaN
                TimeStep: 1d
                  Events: [10×1 eventtable]
        CustomProperties: No custom properties are set.
      Use addprop and rmprop to modify CustomProperties.

</pre></div></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-4"><strong class="emphasis bold">Plot Events Against Data</strong><span id="mw_rtc_FindEventsInTimestampedDataExample_H_946D981D" class="anchor_target"></span></h3><p>One way to plot the events is to use the <code class="literal">stackedplot</code> function. If the input timetable has an attached event table, then <code class="literal">stackedplot</code> plots the events on the stacked plot. It plots instantaneous events as vertical lines and interval events as shaded regions.</p><p>For example, create a stacked plot of data in <code class="literal">IERSdata</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>stackedplot(IERSdata)</pre></div></div></div><div class="informalfigure"><div id="d126e35757" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_03.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><p>The <code class="literal">stackedplot</code> function plots all events using the same style. To plot events using different styles for different kinds of events, use the <code class="literal">plot</code> function and specify markers for different events.</p><p>For example, make a plot where you mark the peaks using triangles pointed upward and troughs using triangles pointed downward. Start by using the <code class="literal">plot</code> function to plot the excess LOD. Then overplot the smoothed excess LOD as a green curve.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata.Date,IERSdata.ExcessLOD,<span style="color:#A020F0">"b-"</span>);
hold <span style="color:#A020F0">on</span>
plot(IERSdata.Date,IERSdata.SmoothedELOD,<span style="color:#A020F0">"g-"</span>,<span style="color:#A020F0">"LineWidth"</span>,2);
hold <span style="color:#A020F0">off</span>
ylabel(<span style="color:#A020F0">"Excess LOD"</span>);</pre></div></div></div><div class="informalfigure"><div id="d126e35774" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_04.png" alt="Figure contains an axes object. The axes object with ylabel Excess LOD contains 2 objects of type line." width="560"></p></div></div><p>Next, find the row times that correspond to the peaks and troughs. A convenient way to select the times of these events is to use an <a href="../ref/eventfilter.html" data-docid="matlab_ref#mw_fd1f19a3-5fbc-4bfd-a126-0ae19fb38830" class="a"><code class="olink">eventfilter</code></a>.</p><p>Create an event filter from the event table attached to <code class="literal">IERSdata</code>, by using the <code class="literal">eventfilter</code> function. You can use the event filter as a row subscript to select rows that occur at events.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>EF = eventfilter(IERSdata)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>EF = 
  eventfilter with no constraints and no selected variables

    &lt;unconstrained&gt;

  VariableNames: Date, EventLabels

</pre></div></div></div><p>Subscript into <code class="literal">IERSdata</code> to show the rows that occur at peaks of the smoothed excess LOD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdataPeaks = IERSdata(EF.EventLabels == <span style="color:#A020F0">"peak"</span>,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdataPeaks=<span class="emphasis"><em>5×2 timetable</em></span>
               Date          ExcessLOD      SmoothedELOD
            ___________    _____________    ____________

    peak    08-Jul-1972     0.002262 sec      0.0030098 
    peak    26-Jun-1977     0.002236 sec      0.0028586 
    peak    14-Oct-1993    0.0033068 sec      0.0023039 
    peak    18-Feb-2008     0.000678 sec     0.00087485 
    peak    16-Dec-2015    0.0016321 sec      0.0012395 

</pre></div></div></div><p>Show the rows that occur at troughs of the smoothed excess LOD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdataTroughs = IERSdata(EF.EventLabels == <span style="color:#A020F0">"trough"</span>,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdataTroughs=<span class="emphasis"><em>5×2 timetable</em></span>
                 Date          ExcessLOD       SmoothedELOD
              ___________    ______________    ____________

    trough    10-Aug-1975      0.002726 sec      0.0027631 
    trough    07-Jan-1987     0.0016989 sec      0.0012593 
    trough    02-Nov-2003     0.0001406 sec     0.00031328 
    trough    09-Jul-2010    -0.0006137 sec     0.00074505 
    trough    12-Sep-2022     0.0003547 sec    -0.00016658 

</pre></div></div></div><p>Plot the peaks using triangles pointed upward and the troughs using triangles pointed downward.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>hold <span style="color:#A020F0">on</span>
hpeaks = plot(IERSdataPeaks,<span style="color:#A020F0">"SmoothedELOD"</span>,LineStyle=<span style="color:#A020F0">"none"</span>,Marker=<span style="color:#A020F0">"^"</span>,MarkerFaceColor=<span style="color:#A020F0">"y"</span>);
htroughs = plot(IERSdataTroughs,<span style="color:#A020F0">"SmoothedELOD"</span>,LineStyle=<span style="color:#A020F0">"none"</span>,Marker=<span style="color:#A020F0">"v"</span>,MarkerFaceColor=<span style="color:#A020F0">"y"</span>);
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e35814" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_05.png" alt="Figure contains an axes object. The axes object with xlabel Date, ylabel Excess LOD contains 4 objects of type line. One or more of the lines displays its values using only markers" width="560"></p></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-5">Create Event Table of Interval Events<span id="mw_rtc_FindEventsInTimestampedDataExample_H_837625EC" class="anchor_target"></span></h3><p>From peak to trough, the excess LOD decreases, meaning that the Earth's rotation speeds up during that interval. From trough to peak, the excess LOD increases, meaning that the rotation slows down. You can consider these periods of decreasing and increasing excess LOD to be <span class="emphasis"><em>interval</em></span> events. These events persist over significant lengths of time within the excess LOD data set. </p><p>Change the event table into an event table that stores interval events. First, assign the attached event table to a more convenient local variable. Then sort it by the event times.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>intervalEvents = IERSdata.Properties.Events;
intervalEvents = sortrows(intervalEvents)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>intervalEvents = <span class="emphasis"><em>10×1 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Lengths Variable: &lt;instantaneous&gt;

       Date        EventLabels
    ___________    ___________

    08-Jul-1972      peak     
    10-Aug-1975      trough   
    26-Jun-1977      peak     
    07-Jan-1987      trough   
    14-Oct-1993      peak     
    02-Nov-2003      trough   
    18-Feb-2008      peak     
    09-Jul-2010      trough   
    16-Dec-2015      peak     
    12-Sep-2022      trough   

</pre></div></div></div><p>To turn the events into interval events, assign event end times to them. In this data set, the end of every interval is the day before the start of the next interval. (However, let the "end" of the last interval be the last date in <code class="literal">IERSdata</code>.) Assign the event end times as a new variable in <code class="literal">intervalEvents</code>. Then assign the new variable to the <code class="literal">EventEndsVariable</code> property of the event table. This assignment turns the events into interval events.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>endEvents = [intervalEvents.Date(2:end) - 1 ; IERSdata.Date(end)];
intervalEvents.EventEnds = endEvents;
intervalEvents.Properties.EventEndsVariable = <span style="color:#A020F0">"EventEnds"</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>intervalEvents = <span class="emphasis"><em>10×2 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Ends Variable: EventEnds

       Date        EventLabels     EventEnds 
    ___________    ___________    ___________

    08-Jul-1972      peak         09-Aug-1975
    10-Aug-1975      trough       25-Jun-1977
    26-Jun-1977      peak         06-Jan-1987
    07-Jan-1987      trough       13-Oct-1993
    14-Oct-1993      peak         01-Nov-2003
    02-Nov-2003      trough       17-Feb-2008
    18-Feb-2008      peak         08-Jul-2010
    09-Jul-2010      trough       15-Dec-2015
    16-Dec-2015      peak         11-Sep-2022
    12-Sep-2022      trough       27-Jun-2023

</pre></div></div></div><p>The labels <code class="literal">"peaks"</code> and <code class="literal">"troughs"</code> were appropriate labels for instantaneous events because they identified inflection points on the smoothed excess LOD curve. But they are not appropriate labels for interval events. Change the labels to <code class="literal">"decreasingLOD"</code> and <code class="literal">"increasingLOD"</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>intervalEvents.EventLabels = renamecats(intervalEvents.EventLabels,[<span style="color:#A020F0">"decreasingLOD"</span>,<span style="color:#A020F0">"increasingLOD"</span>])</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>intervalEvents = <span class="emphasis"><em>10×2 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Ends Variable: EventEnds

       Date         EventLabels      EventEnds 
    ___________    _____________    ___________

    08-Jul-1972    decreasingLOD    09-Aug-1975
    10-Aug-1975    increasingLOD    25-Jun-1977
    26-Jun-1977    decreasingLOD    06-Jan-1987
    07-Jan-1987    increasingLOD    13-Oct-1993
    14-Oct-1993    decreasingLOD    01-Nov-2003
    02-Nov-2003    increasingLOD    17-Feb-2008
    18-Feb-2008    decreasingLOD    08-Jul-2010
    09-Jul-2010    increasingLOD    15-Dec-2015
    16-Dec-2015    decreasingLOD    11-Sep-2022
    12-Sep-2022    increasingLOD    27-Jun-2023

</pre></div></div></div><p>The first interval starts with the first peak. However, <code class="literal">IERSdata</code> has earlier rows leading up to that peak. To add that period as an interval of increasing excess LOD, add another row to the event table. Its event time is the first date in <code class="literal">IERSdata</code>. Its event end time is the day before the first peak.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>intervalEvents(IERSdata.Date(1),:) = {<span style="color:#A020F0">"increasingLOD"</span>,intervalEvents.Date(1) - 1};
intervalEvents = sortrows(intervalEvents)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>intervalEvents = <span class="emphasis"><em>11×2 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Ends Variable: EventEnds

       Date         EventLabels      EventEnds 
    ___________    _____________    ___________

    01-Jan-1962    increasingLOD    07-Jul-1972
    08-Jul-1972    decreasingLOD    09-Aug-1975
    10-Aug-1975    increasingLOD    25-Jun-1977
    26-Jun-1977    decreasingLOD    06-Jan-1987
    07-Jan-1987    increasingLOD    13-Oct-1993
    14-Oct-1993    decreasingLOD    01-Nov-2003
    02-Nov-2003    increasingLOD    17-Feb-2008
    18-Feb-2008    decreasingLOD    08-Jul-2010
    09-Jul-2010    increasingLOD    15-Dec-2015
    16-Dec-2015    decreasingLOD    11-Sep-2022
    12-Sep-2022    increasingLOD    27-Jun-2023

</pre></div></div></div><p>You can add more data that describes these events in additional event table variables. For example, compute the average change in excess LOD during each interval (in units of seconds of daily excess LOD per year). Add that information to the interval events as a new variable.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>dTime = intervalEvents.EventEnds - intervalEvents.Date;
dExcess = IERSdata.SmoothedELOD(intervalEvents.EventEnds) - IERSdata.SmoothedELOD(intervalEvents.Date);
intervalEvents.AnnualAvgChange = seconds(dExcess ./ years(dTime))</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>intervalEvents = <span class="emphasis"><em>11×3 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Ends Variable: EventEnds

       Date         EventLabels      EventEnds     AnnualAvgChange
    ___________    _____________    ___________    _______________

    01-Jan-1962    increasingLOD    07-Jul-1972     0.00018435 sec
    08-Jul-1972    decreasingLOD    09-Aug-1975    -7.9965e-05 sec
    10-Aug-1975    increasingLOD    25-Jun-1977     5.0921e-05 sec
    26-Jun-1977    decreasingLOD    06-Jan-1987     -0.0001678 sec
    07-Jan-1987    increasingLOD    13-Oct-1993     0.00015441 sec
    14-Oct-1993    decreasingLOD    01-Nov-2003    -0.00019811 sec
    02-Nov-2003    increasingLOD    17-Feb-2008     0.00013081 sec
    18-Feb-2008    decreasingLOD    08-Jul-2010    -5.4428e-05 sec
    09-Jul-2010    increasingLOD    15-Dec-2015     9.0984e-05 sec
    16-Dec-2015    decreasingLOD    11-Sep-2022    -0.00020868 sec
    12-Sep-2022    increasingLOD    27-Jun-2023     4.5288e-05 sec

</pre></div></div></div><p>These results show that the mean solar day, averaged over an entire year, has been decreasing over the last few years by about 0.3 milliseconds per year. The mean solar day is currently near or even slightly less than 86,400 seconds. However, many experts believe that this trend will not continue.</p><h3 class="title" id="FindEventsInTimestampedDataExample-6">Create Stacked Plot of Interval Events</h3><p>Create a simple stacked plot of the intervals when the excess LOD was increasing. First, create a subtable of <code class="literal">intervalEvents</code> with increasing excess LOD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>increasingEvents = intervalEvents(intervalEvents.EventLabels == <span style="color:#A020F0">"increasingLOD"</span>,:)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>increasingEvents = <span class="emphasis"><em>6×3 eventtable</em></span>
  Event Labels Variable: EventLabels
  Event Ends Variable: EventEnds

       Date         EventLabels      EventEnds     AnnualAvgChange
    ___________    _____________    ___________    _______________

    01-Jan-1962    increasingLOD    07-Jul-1972    0.00018435 sec 
    10-Aug-1975    increasingLOD    25-Jun-1977    5.0921e-05 sec 
    07-Jan-1987    increasingLOD    13-Oct-1993    0.00015441 sec 
    02-Nov-2003    increasingLOD    17-Feb-2008    0.00013081 sec 
    09-Jul-2010    increasingLOD    15-Dec-2015    9.0984e-05 sec 
    12-Sep-2022    increasingLOD    27-Jun-2023    4.5288e-05 sec 

</pre></div></div></div><p>Attach <code class="literal">increasingEvents</code> to the <code class="literal">Events</code> property of <code class="literal">IERSdata</code>. Then make a stacked plot that shows only the intervals with increasing excess LOD as shaded regions.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.Properties.Events = increasingEvents;
stackedplot(IERSdata)</pre></div></div></div><div class="informalfigure"><div id="d126e35907" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_06.png" alt="Figure contains an object of type stackedplot." width="560"></p></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-7">Convert Interval Events to State Variable<span id="mw_rtc_FindEventsInTimestampedDataExample_H_7C135D48" class="anchor_target"></span></h3><p>To work with intervals of decreasing and increasing excess LOD, attach <code class="literal">intervalEvents</code> to the <code class="literal">Events</code> property of <code class="literal">IERSdata</code>. You can convert the interval events to a state variable, and make more complex plots of the events associated with these data.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata.Properties.Events = intervalEvents;</pre></div></div></div><p>The event table records interval events during which the smoothed excess LOD reached a peak and began a decrease or reached a trough and began an increase. Another way to represent those changes is as a <span class="emphasis"><em>state variable</em></span> within the timetable itself. To copy event data from an attached event table to variables of the main timetable, use the <a href="../ref/timetable.syncevents.html" data-docid="matlab_ref#mw_4959f50f-3e8c-4f76-ad56-9019b1649032" class="a"><code class="olink">syncevents</code></a> function. As a result of this call, <code class="literal">IERSdata</code> has new variables, <code class="literal">EventLabels</code> and <code class="literal">AnnualAvgChange</code>, copied from the attached event table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>IERSdata = syncevents(IERSdata)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>IERSdata=<span class="emphasis"><em>22458×4 timetable</em></span>
                        Date         ExcessLOD      SmoothedELOD     EventLabels     AnnualAvgChange
                     ___________    ____________    ____________    _____________    _______________

    increasingLOD    01-Jan-1962    0.001723 sec     0.0010716      increasingLOD    0.00018435 sec 
    increasingLOD    02-Jan-1962    0.001669 sec     0.0010728      increasingLOD    0.00018435 sec 
    increasingLOD    03-Jan-1962    0.001582 sec     0.0010739      increasingLOD    0.00018435 sec 
    increasingLOD    04-Jan-1962    0.001496 sec     0.0010751      increasingLOD    0.00018435 sec 
    increasingLOD    05-Jan-1962    0.001416 sec     0.0010762      increasingLOD    0.00018435 sec 
    increasingLOD    06-Jan-1962    0.001382 sec     0.0010773      increasingLOD    0.00018435 sec 
    increasingLOD    07-Jan-1962    0.001413 sec     0.0010785      increasingLOD    0.00018435 sec 
    increasingLOD    08-Jan-1962    0.001505 sec     0.0010796      increasingLOD    0.00018435 sec 
    increasingLOD    09-Jan-1962    0.001628 sec     0.0010807      increasingLOD    0.00018435 sec 
    increasingLOD    10-Jan-1962    0.001738 sec     0.0010818      increasingLOD    0.00018435 sec 
    increasingLOD    11-Jan-1962    0.001794 sec      0.001083      increasingLOD    0.00018435 sec 
    increasingLOD    12-Jan-1962    0.001774 sec     0.0010841      increasingLOD    0.00018435 sec 
    increasingLOD    13-Jan-1962    0.001667 sec     0.0010852      increasingLOD    0.00018435 sec 
    increasingLOD    14-Jan-1962     0.00151 sec     0.0010864      increasingLOD    0.00018435 sec 
    increasingLOD    15-Jan-1962    0.001312 sec     0.0010875      increasingLOD    0.00018435 sec 
    increasingLOD    16-Jan-1962    0.001112 sec     0.0010886      increasingLOD    0.00018435 sec 
      &#x22EE;

</pre></div></div></div><p>Next, highlight the segments in the plot where excess LOD is increasing in green and decreasing in red. In this case, it is more convenient to use the <code class="literal">EventLabels</code> state variable in <code class="literal">IERSdata</code> because you need to change the color at every data point in each segment.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata.Date,IERSdata.ExcessLOD,<span style="color:#A020F0">"b-"</span>);
hold <span style="color:#A020F0">on</span>
plot(IERSdata.Date,IERSdata.SmoothedELOD,<span style="color:#A020F0">"g-"</span>,<span style="color:#A020F0">"LineWidth"</span>,2);
ylabel(<span style="color:#A020F0">"Excess LOD"</span>);
decreasing = (IERSdata.EventLabels == <span style="color:#A020F0">"decreasingLOD"</span>);
plot(IERSdata.Date(decreasing),IERSdata.SmoothedELOD(decreasing),<span style="color:#A020F0">'r.'</span>);
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e35952" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_07.png" alt="Figure contains an axes object. The axes object with ylabel Excess LOD contains 3 objects of type line. One or more of the lines displays its values using only markers" width="560"></p></div></div><p>Alternatively, highlight the background in regions of decreasing excess LOD. In this case, it is more convenient to use the interval events from the attached event table, because you only need the start and end times of the intervals when excess LOD decreases.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>hold <span style="color:#A020F0">on</span>
decreasingEvents = IERSdata.Properties.Events;
decreasingEvents = decreasingEvents(decreasingEvents.EventLabels == <span style="color:#A020F0">"decreasingLOD"</span>,:);
startEndTimes = [decreasingEvents.Date decreasingEvents.EventEnds];
h = fill(startEndTimes(:,[1 2 2 1]),[-.002 -.002 .005 .005],<span style="color:#A020F0">"red"</span>,<span style="color:#A020F0">"FaceAlpha"</span>,.2,<span style="color:#A020F0">"LineStyle"</span>,<span style="color:#A020F0">"none"</span>);
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e35961" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_08.png" alt="Figure contains an axes object. The axes object with ylabel Excess LOD contains 8 objects of type line, patch. One or more of the lines displays its values using only markers" width="560"></p></div></div><h3 class="title" id="FindEventsInTimestampedDataExample-8">Find More Complex Events in Data<span id="mw_rtc_FindEventsInTimestampedDataExample_H_48B42D9B" class="anchor_target"></span></h3><p>The excess LOD has both increased and decreased since the 1960s. Indeed, in many years there were short periods when the raw excess LOD was significantly negative. These are only very short-term fluctuations, but during those periods the Earth was rotating one millisecond or more <span class="emphasis"><em>faster</em></span> than 86,400 SI seconds.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>plot(IERSdata.Date,IERSdata.ExcessLOD,<span style="color:#A020F0">"b-"</span>);
ylabel(<span style="color:#A020F0">"Excess LOD"</span>);
hold <span style="color:#A020F0">on</span>
line(IERSdata.Date([1 end]),[0 0],<span style="color:#A020F0">"Color"</span>,<span style="color:#A020F0">"k"</span>,<span style="color:#A020F0">"LineStyle"</span>,<span style="color:#A020F0">":"</span>)
hold <span style="color:#A020F0">off</span>
ylabel(<span style="color:#A020F0">"Excess LOD"</span>);</pre></div></div></div><div class="informalfigure"><div id="d126e35976" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_09.png" alt="Figure contains an axes object. The axes object with ylabel Excess LOD contains 2 objects of type line." width="560"></p></div></div><p>Identify the dates on which the excess LOD was negative. Extract those dates and the excess LODs into an event table. As there are over 1400 rows, display the first few rows of the event table.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>negLOD = extractevents(IERSdata,IERSdata.ExcessLOD &lt; 0,EventDataVariables=<span style="color:#A020F0">"ExcessLOD"</span>);
negLODhead = head(negLOD,5)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>negLODhead = <span class="emphasis"><em>5×1 eventtable</em></span>
  Event Labels Variable: &lt;unset&gt;
  Event Lengths Variable: &lt;instantaneous&gt;

       Date          ExcessLOD  
    ___________    _____________

    12-Jul-1984    -2.27e-05 sec
    13-Jul-1984    -9.38e-05 sec
    14-Jul-1984     -3.8e-06 sec
    09-Jun-1986     -5.5e-06 sec
    02-Aug-1986    -1.33e-05 sec

</pre></div></div></div><p>Identify the years in which those days of excess LOD occurred. Then use the <code class="literal">retime</code> function to find the minimum excess LOD in each of those years and return a new event table. (Because an event table is a kind of timetable, you can call timetable functions on event tables.) These are interval events in one sense but are stored as instantaneous events marked only by their year.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>negYears = unique(dateshift(negLOD.Date,<span style="color:#A020F0">"start"</span>,<span style="color:#A020F0">"year"</span>));
negYears.Format = <span style="color:#A020F0">"uuuu"</span>;
negLODEvents = retime(negLOD,negYears,<span style="color:#A020F0">"min"</span>);
negLODEvents.Properties.VariableNames = <span style="color:#A020F0">"MinExcessLOD"</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>negLODEvents = <span class="emphasis"><em>26×1 eventtable</em></span>
  Event Labels Variable: &lt;unset&gt;
  Event Lengths Variable: &lt;instantaneous&gt;

    Date     MinExcessLOD 
    ____    ______________

    1984     -9.38e-05 sec
    1986     -1.33e-05 sec
    1987    -0.0001492 sec
    1988     -7.06e-05 sec
    1999    -0.0001063 sec
    2000     -0.000311 sec
    2001    -0.0007064 sec
    2002    -0.0007436 sec
    2003    -0.0009769 sec
    2004    -0.0010672 sec
    2005    -0.0010809 sec
    2006    -0.0003865 sec
    2007    -0.0006192 sec
    2008    -0.0003945 sec
    2009    -0.0004417 sec
    2010     -0.000784 sec
    2011     -0.000342 sec
    2012    -0.0003178 sec
    2013    -0.0003593 sec
    2016     -1.95e-05 sec
    2018    -0.0006457 sec
    2019    -0.0009571 sec
    2020    -0.0014663 sec
    2021     -0.001452 sec
    2022    -0.0015903 sec
    2023           NaN sec

</pre></div></div></div><p>In the plot of excess LOD, mark the time axis red for each year that had periods when the excess LOD was negative. In this data set, such years happen more frequently after the year 2000.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>hold <span style="color:#A020F0">on</span>
plot([negLODEvents.Date negLODEvents.Date+calyears(1)],[-.0016 -.0016],<span style="color:#A020F0">"r-"</span>,<span style="color:#A020F0">"lineWidth"</span>,6);
ylim(seconds([-.0016 .0045]));
hold <span style="color:#A020F0">off</span></pre></div></div></div><div class="informalfigure"><div id="d126e36002" class="mediaobject"><p><img src="../../examples/matlab/win64/FindEventsInTimestampedDataExample_10.png" alt="Figure contains an axes object. The axes object with ylabel Excess LOD contains 28 objects of type line." width="560"></p></div></div><p>To represent events, you can use event tables, with either instantaneous events or interval events, or state variables in timetables. The representation you use depends on which one is more convenient and useful for the data analysis that you plan to conduct. You might even switch between representations as you go. All these representations are useful ways to add information about events to your timestamped data in a timetable.</p></div>
        <h2 id="d126e36010">See Also</h2><p><span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/eventtable.html"><span itemprop="name"><code class="object">eventtable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timetable.html"><span itemprop="name"><code class="function">timetable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/datetime.html"><span itemprop="name"><code class="object">datetime</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timetable.retime.html"><span itemprop="name"><code class="function">retime</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/smoothdata.html"><span itemprop="name"><code class="function">smoothdata</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/islocalmax.html"><span itemprop="name"><code class="function">islocalmax</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/islocalmin.html"><span itemprop="name"><code class="function">islocalmin</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/duration.seconds.html"><span itemprop="name"><code class="function">seconds</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/timerange.html"><span itemprop="name"><code class="function">timerange</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/stackedplot.html"><span itemprop="name"><code class="function">stackedplot</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/readtable.html"><span itemprop="name"><code class="function">readtable</code></span></a></span> | <span itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/SeeAlso" itemprop="seealso"><a itemprop="url" href="../ref/table2timetable.html"><span itemprop="name"><code class="function">table2timetable</code></span></a></span></p>
        <h3 id="d126e36051">Topics</h3><ul class="list-unstyled"><li><a href="represent-date-and-times-in-MATLAB.html" class="a">Represent Dates and Times in MATLAB</a></li><li><a href="resample-and-aggregate-data-in-timetable.html" class="a">Resample and Aggregate Data in Timetable</a></li><li><a href="clean-timetable-with-missing-duplicate-or-irregular-times.html" class="a">Clean Timetable with Missing, Duplicate, or Nonuniform Times</a></li><li><a href="computations-with-numeric-data-in-table-or-timetable.html" class="a">Data Cleaning and Calculations in Tables</a></li><li><a href="grouped-calculations-in-tables-and-timetables.html" class="a">Grouped Calculations in Tables and Timetables</a></li><li><a href="subscript-into-times-of-timetable.html" class="a">Select Times in Timetable</a></li><li><a href="add-event-table-from-external-data-to-timetable.html" class="a">Add Event Table from External Data to Timetable</a></li></ul>
        
      </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
