<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Transfer Data over TCP/IP Between Raspberry Pi Sense HAT and Android Device</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../raspberrypiio.html",
          "name": "Raspberry Pi Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../raspberrypiio-sense-hat.html",
          "name": "Sense HAT"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "raspberrypiio-sense-hat"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Transfer Data over TCP/IP Between Raspberry Pi Sense HAT and Android Device",
          "description": "Use MATLAB&#174; commands to send data over TCP/IP from Raspberry Pi&#174; Sense HAT to an Android&#8482; device and also receive RGB color values from the Android device and display the same on the LED matrix of Sense HAT.",
          "thumbnailURL": "../../examples/raspberrypiio/win64/ControlAndMonitorSenseHATAndroidRaspiExample_01.png",
          "genre": "Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "Simulink"

        },
          "identifier": "raspberrypiio.ControlAndMonitorSenseHATAndroidRaspiExample",
          "name": "ControlAndMonitorSenseHATAndroidRaspiExample",
          "url": "transfer-data-tcpip-raspiandroid.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('raspberrypiio/ControlAndMonitorSenseHATAndroidRaspiExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "ControlAndMonitorSenseHATAndroidRaspiExample.m",
        "raspi_sensehat_display.m",
        "androidraspberrypisensehat.slx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to use MATLAB&#174; commands to send data over TCP/IP from Raspberry Pi&#174; Sense HAT to an Android&#8482; device and also receive RGB color values from the Android device and display the same on the LED matrix of Sense HAT."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/raspberrypiio/win64/ControlAndMonitorSenseHATAndroidRaspiExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Raspberry Pi Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio-sense-hat.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_46bed064-c06c-49ef-82e0-ada7930ebfb8"><span itemprop="title">Sense HAT</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Transfer Data over TCP/IP Between Raspberry Pi Sense HAT and Android Device</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#d126e120550" class="nav-link intrnllnk">Introduction</a></li><li class="nav-item"><a href="#d126e120563" class="nav-link intrnllnk">Prerequisites</a></li><li class="nav-item"><a href="#d126e120574" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#d126e120584" class="nav-link intrnllnk">Required Products</a></li><li class="nav-item"><a href="#d126e120593" class="nav-link intrnllnk">Step 1: Create a Sense HAT Object and TCP/IP Clients</a></li><li class="nav-item"><a href="#d126e120608" class="nav-link intrnllnk">Step 2: Send IMU Sensor Data from Sense HAT</a></li><li class="nav-item"><a href="#d126e120617" class="nav-link intrnllnk">Step 3: Read Data from the Android Device on LED Matrix of Sense HAT</a></li><li class="nav-item"><a href="#d126e120634" class="nav-link intrnllnk">Step 4: Deploy the MATLAB Function</a></li><li class="nav-item"><a href="#d126e120679" class="nav-link intrnllnk">Step 5: Prepare and Deploy a Model for TCP/IP Using Simulink Support Package for Android Devices</a></li><li class="nav-item"><a href="#d126e120713" class="nav-link intrnllnk">Other Things to Try</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-sense-hat&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section><div class="example_icon"></div><h1 class="r2025b" itemprop="title content" id="example-transfer-data-tcpip-raspiandroid">Transfer Data over TCP/IP Between Raspberry Pi Sense HAT and Android Device</h1><div class="examples_short_list hidden_ios_android" data-products="ANDROID ML RASPPIIO SL"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('ANDROID')">Simulink Support Package for Android Devices</a></li><li><a href="matlab:matlab.internal.addons.showAddon('RASPPIIO')">MATLAB Support Package for Raspberry Pi Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('SL')">Simulink</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('raspberrypiio/ControlAndMonitorSenseHATAndroidRaspiExample')" data-ex-genre="Script">Open Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="raspberrypiio-ControlAndMonitorSenseHATAndroidRaspiExample"><meta itemprop="exampletitle" content="Transfer Data over TCP/IP Between Raspberry Pi Sense HAT and Android Device"></div><span id="ControlAndMonitorSenseHATAndroidRaspiExample" class="anchor_target"></span>



<p class="shortdesc">This example shows how to use MATLAB&#174; commands to send data over TCP/IP from Raspberry Pi&#174; Sense HAT to an Android&#8482; device and also receive RGB color values from the Android device and display the same on the LED matrix of Sense HAT.</p>




<div class="procedure"><h3 class="title" id="d126e120550">Introduction<span id="ControlAndMonitorSenseHATAndroidRaspiExample-1" class="anchor_target"></span></h3><p>The Raspberry Pi Sense HAT is an add-on board for Raspberry Pi hardware. It has an 8X8 RGB LED Matrix, a five-position joystick and includes the following sensors:</p><div class="itemizedlist"><ul><li><p>Humidity sensor</p></li><li><p>Pressure sensor</p></li><li><p>IMU sensor (Accelerometer, Gyroscope, and Magnetometer).</p></li></ul></div><p>In this example, you will develop an algorithm to send the data from the IMU sensor by defining a TCP/IP client. You will also develop another algorithm to receive RGB color values from the Android device over TCP/IP and display the color on the 8x8 RGB LED matrix.</p><h3 class="title" id="d126e120563">Prerequisites<span id="ControlAndMonitorSenseHATAndroidRaspiExample-2" class="anchor_target"></span></h3><div class="itemizedlist"><ul><li><p>We recommend completing <strong class="emphasis bold">Working with Raspberry Pi Sense HAT</strong> example.</p></li></ul></div><h3 class="title" id="d126e120574">Required Hardware<span id="ControlAndMonitorSenseHATAndroidRaspiExample-3" class="anchor_target"></span></h3><p>To run this example you will need the following hardware:</p><div class="itemizedlist"><ul><li><p>Raspberry Pi hardware</p></li><li><p>Raspberry Pi Sense HAT</p></li></ul></div><h3 class="title" id="d126e120584">Required Products<span id="ControlAndMonitorSenseHATAndroidRaspiExample-4" class="anchor_target"></span></h3><div class="itemizedlist"><ul><li><p>MATLAB Support Package for Raspberry Pi Hardware</p></li><li><p>Simulink Support Package for Android Devices</p></li></ul></div><h3 class="title" id="d126e120593">Step 1: Create a Sense HAT Object and TCP/IP Clients<span id="ControlAndMonitorSenseHATAndroidRaspiExample-5" class="anchor_target"></span></h3><p>Create a Sense HAT object in MATLAB Support Package for Raspberry Pi Hardware by executing the following commands at the MATLAB prompt.</p><div class="code_responsive"><pre id="d126e120598" class="programlisting">r = raspi();
s = sensehat(r);
</pre></div><p>
<code class="literal">s</code> is a handle to a sensehat object.</p><p>Create a TCP/IP client object to send data from Raspberry Pi to the Android device. Replace the IP address and Port according to your Android device.</p><div class="code_responsive"><pre class="programlisting">tcpObj_Send = tcpclient('192.168.1.2',6000);</pre></div><p>Create a TCP/IP client object to receive data from the Android device. Replace the IP address and Port according to your Android device. We specify the Timeout as 2 seconds for a response to be obtained from the Android device.</p><div class="code_responsive"><pre class="programlisting">tcpObj_Recv= tcpclient('192.168.1.2',10000, 'Timeout',2);</pre></div><h3 class="title" id="d126e120608">Step 2: Send IMU Sensor Data from Sense HAT<span id="ControlAndMonitorSenseHATAndroidRaspiExample-6" class="anchor_target"></span></h3><p>In MATLAB Support Package for Raspberry Pi Hardware, we will use an algorithm that uses a <span class="emphasis"><em>for</em></span> loop that runs for 1000 iterations while obtaining data from the IMU sensor of Raspberry Pi Sense HAT. We combine the IMU sensor data into a [1x3] array and send the data using the TCP/IP client object. We also add a pause time of 0.2 seconds between the iterations.</p><div class="code_responsive"><pre class="programlisting">for count = 1:1000
   %Read IMU Sensor - Accel data
   accelData = readAcceleration(s);
   %Read IMU Sensor - Gyro data
   gyroData = readAngularVelocity(s);
   %Read IMU Sensor - Mag data
   magData = readMagneticField(s);
   imuData = [accelData gyroData magData];
   write(tcpObj_Send, imuData);
   pause(0.2)
end</pre></div><h3 class="title" id="d126e120617">Step 3: Read Data from the Android Device on LED Matrix of Sense HAT<span id="ControlAndMonitorSenseHATAndroidRaspiExample-7" class="anchor_target"></span></h3><p>In MATLAB Support Package for Raspberry Pi Hardware, we will use an algorithm that uses a <span class="emphasis"><em>for</em></span> loop that runs for 1000 iterations while receiving data from the color sliders on the application that you are going to deploy on the remote Android device. We will use the <code class="literal">read</code> method to read data from the TCP/IP receive object (which obtains the data from the remote Android device). We also add a pause time of 0.2 seconds between the iterations.</p><p>We can display the received data on the LED matrix of Sense HAT using the <code class="literal">writePixel</code> function. In this case, we will also add a code to ignore the <code class="literal">writePixel</code> command if the input data is zero. Additionally, if the read is not successful within the timeout value specified, the TCP/IP client returns zero as output.</p><div class="code_responsive"><pre class="programlisting">for count = 1:1000
 LEDdata = read(tcpObj_Recv, 3, 'double');
 if ((LEDdata(1) ~=0) &amp;&amp; (LEDdata(2) ~=0) &amp;&amp; (LEDdata(3) ~=0))
      for row = 1:8
          for col = 1:8
              writePixel(s, [row col] , LEDdata);
          end
      end
  end
 pause(0.2)
end</pre></div><h3 class="title" id="d126e120634">Step 4: Deploy the MATLAB Function<span id="ControlAndMonitorSenseHATAndroidRaspiExample-8" class="anchor_target"></span></h3><p>You can deploy the <code class="literal">raspi_sensehat_display()</code> function on the Raspberry Pi hardware.</p><div class="code_responsive"><pre class="programlisting">function raspi_sensehat_display()</pre></div><div class="code_responsive"><pre id="d126e120643" class="programlisting">r = raspi();
s = sensehat(r);
</pre></div><div class="code_responsive"><pre id="d126e120645" class="programlisting">tcpObj_Send = tcpclient(<span style="color:#A020F0">'192.168.1.2'</span>,6000);
tcpObj_Recv= tcpclient(<span style="color:#A020F0">'192.168.1.2'</span>,10000, <span style="color:#A020F0">'Timeout'</span>,2);
</pre></div><div class="code_responsive"><pre id="d126e120647" class="programlisting">
<span style="color:#0000FF">for</span> count = 1:1000
</pre></div><div class="code_responsive"><pre class="programlisting">   accelData = readAcceleration(s);
   gyroData = readAngularVelocity(s);
   magData = readMagneticField(s);
   imuData = [accelData gyroData magData];</pre></div><div class="code_responsive"><pre class="programlisting">   write(tcpObj_Send, imuData);</pre></div><div class="code_responsive"><pre class="programlisting">   LEDdata = read(tcpObj_Recv, 3, 'double');%</pre></div><div class="code_responsive"><pre class="programlisting">   if ((LEDdata(1) ~=0) &amp;&amp; (LEDdata(2) ~=0) &amp;&amp; (LEDdata(3) ~=0))
       for row = 1:8
           for col = 1:8
               writePixel(s, [row col] , LEDdata);
           end
       end
   end</pre></div><div class="code_responsive"><pre class="programlisting">   pause(0.2);
end</pre></div><p>Deploy the <code class="literal">raspi_sensehat_display</code> function as a standalone executable on the hardware by using the <code class="literal"><a href="deploy.html" data-docid="mlsupportpkg#mw_a8a63ef5-1af4-460a-8515-2432dd5670b6" class="a"><code class="olink">deploy</code></a></code> function. Note: For Raspberry Pi with 32-bit OS use <code class="literal">targetHardware('Raspberry Pi')</code> and for 64-bit OS use <code class="literal">targetHardware('Raspberry Pi (64bit)')</code>.</p><div class="code_responsive"><pre id="d126e120666" class="programlisting">board = targetHardware(<span style="color:#A020F0">'Raspberry Pi (64bit)'</span>)
deploy(board,<span style="color:#A020F0">'raspi_sensehat_display'</span>)
</pre></div><div class="code_responsive"><pre id="d126e120668" class="programlisting">Code <span style="color:#A020F0">generation</span> <span style="color:#A020F0">successful:</span> <span style="color:#A020F0">View</span> <span style="color:#A020F0">report</span>
</pre></div><p>The <code class="literal">deploy</code> function initiates code generation of the <code class="literal">raspi_sensehat_display</code> function. At the end of code generation, MATLAB generates a code generation report. Use this report to debug the <code class="literal">raspi_sensehat_display</code> function for any build errors and warnings in the generated code.</p><p>After successfully generating the code, the support package loads and runs the code as a standalone executable on the hardware. The executable starts sending IMU Sensor data over TCP/IP and prepares to receive any data from the remote Android device.</p><h3 class="title" id="d126e120679">Step 5: Prepare and Deploy a Model for TCP/IP Using Simulink Support Package for Android Devices<span id="ControlAndMonitorSenseHATAndroidRaspiExample-9" class="anchor_target"></span></h3><p>After you install Simulink Support Package for Android Devices, open the <a href="matlab:openExample('raspberrypiio/ControlAndMonitorSenseHATAndroidRaspiExample','supportingFile','androidraspberrypisensehat')" target="_blank"><code class="literal">androidraspberrypisensehat</code></a> Simulink model.</p><div class="informalfigure"><div id="d126e120689" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/ControlAndMonitorSenseHATAndroidRaspiExample_01.png"></p></div></div><div class="itemizedlist"><ul><li><p>TCP/IP Receive block in the model is configured to receive data at port 6000 (the same port number that you specified for <code class="literal">tcpObj_Send</code> object in the MATLAB Support Package for Raspberry Pi Hardware in the previous task)</p></li><li><p>TCP/IP Send block in the model is configured to send data at port 10000 (the same port number that you specified for <code class="literal">tcpObj_Receive</code> object in the MATLAB Support Package for Raspberry Pi Hardware in the previous task).</p></li></ul></div><p>Deploy this model to the Android device that is connected to the host computer (in the <strong class="emphasis bold">Hardware</strong> tab of the Simulink model, click <strong class="emphasis bold">Build, Deploy &amp; Start</strong>). The deployed model launches an application that helps you to read the data and also use the three sliders on the application to send the desired RGB values.</p><p>On the Android device, launch the application that you deployed, and view the live data for accelerometer, gyroscope, and magnetometer, as obtained from the IMU sensor of Raspberry Pi Sense HAT.</p><p>On the Android device, move the three color sliders in the application for configuring various RGB values. You can observe the corresponding change of color on the 8X8 RGB LED Matrix of the Raspberry Pi Sense HAT.</p><h3 class="title" id="d126e120713">Other Things to Try<span id="ControlAndMonitorSenseHATAndroidRaspiExample-12" class="anchor_target"></span></h3><p>Create an algorithm to run the control continuously in MATLAB Support Package for Raspberry Pi Hardware, by using a <span class="emphasis"><em>while</em></span> loop in the MATLAB code.</p></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
