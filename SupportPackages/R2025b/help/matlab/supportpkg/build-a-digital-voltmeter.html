<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Build a Digital Voltmeter</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../raspberrypiio.html",
          "name": "Raspberry Pi Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../raspberrypiio-i2c-interface.html",
          "name": "I2C Interface"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../raspberrypiio.html",
          "name": "Raspberry Pi Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../raspberrypiio-spi-interface.html",
          "name": "SPI Interface"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "raspberrypiio-i2c-interface",
        "raspberrypiio-spi-interface"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Build a Digital Voltmeter",
          "description": "Build a digital voltmeter using MATLAB&#174; Support Package for Raspberry Pi&#174; Hardware.",
          "thumbnailURL": "../../examples/raspberrypiio/win64/xxsegment_display_circuit.png",
          "genre": "Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "raspberrypiio.BuildADigitalVoltmeterExample",
          "name": "BuildADigitalVoltmeterExample",
          "url": "build-a-digital-voltmeter.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('raspberrypiio/BuildADigitalVoltmeterExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "BuildADigitalVoltmeterExample.m",
        "segment_display_circuit.png",
        "mcp3008_circuit.png"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows you how to build a digital voltmeter using MATLAB&#174; Support Package for Raspberry Pi&#174; Hardware."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/raspberrypiio/win64/xxsegment_display_circuit.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Raspberry Pi Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio-i2c-interface.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_3a23cc06-db66-4c40-8f52-3ad2c3303542"><span itemprop="title">I2C Interface</span></a></li></ul><ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav">Data Import and Analysis</a></li><li><a href="../data-import-and-export.html?s_tid=CRUX_lftnav">Data Import and Export</a></li><li><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav">Hardware and Network Communication</a></li><li><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav">Hardware Boards and Kits</a></li><li><a href="../raspberrypiio.html?s_tid=CRUX_lftnav">Raspberry Pi Hardware</a></li><li><a href="../raspberrypiio-spi-interface.html?s_tid=CRUX_lftnav" id="mw_beb70d64-b56a-4689-9171-3f37956c180b">SPI Interface</a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Build a Digital Voltmeter</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#d126e119189" class="nav-link intrnllnk">Introduction</a></li><li class="nav-item"><a href="#d126e119195" class="nav-link intrnllnk">Prerequisites</a></li><li class="nav-item"><a href="#d126e119212" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#d126e119230" class="nav-link intrnllnk">Connect MCP3008</a></li><li class="nav-item"><a href="#d126e119243" class="nav-link intrnllnk">Connect the Display</a></li><li class="nav-item"><a href="#d126e119256" class="nav-link intrnllnk">View Available SPI Channels</a></li><li class="nav-item"><a href="#d126e119264" class="nav-link intrnllnk">Scan I2C Bus</a></li><li class="nav-item"><a href="#d126e119272" class="nav-link intrnllnk">Read Voltage</a></li><li class="nav-item"><a href="#d126e119280" class="nav-link intrnllnk">Test the Segmented Display</a></li><li class="nav-item"><a href="#d126e119288" class="nav-link intrnllnk">Display Voltage Measurements</a></li><li class="nav-item"><a href="#d126e119295" class="nav-link intrnllnk">Summary</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-i2c-interface&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section><div class="example_icon"></div><h1 class="r2025b" itemprop="title content" id="example-raspi_build_a_digital_voltmeter">Build a Digital Voltmeter</h1><div class="examples_short_list hidden_ios_android" data-products="ML RASPPIIO"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('RASPPIIO')">MATLAB Support Package for Raspberry Pi Hardware</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('raspberrypiio/BuildADigitalVoltmeterExample')" data-ex-genre="Script">Open Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="raspberrypiio-BuildADigitalVoltmeterExample"><meta itemprop="exampletitle" content="Build a Digital Voltmeter"></div><span id="BuildADigitalVoltmeterExample" class="anchor_target"></span>



<p class="shortdesc">This example shows you how to build a digital voltmeter using MATLAB&#174; Support Package for Raspberry Pi&#174; Hardware.</p>




<div class="procedure"><h3 class="title" id="d126e119189">Introduction<span id="BuildADigitalVoltmeterExample-1" class="anchor_target"></span></h3><p>In this example you combine the MCP3008 ADC with a 4-digit 7-segment display module to build a digital voltmeter. You connect the MCP3008 ADC to the Raspberry Pi hardware using SPI peripheral. You connect the 4-digit 7-segment display to the Raspberry Pi hardware using the I2C peripheral. A potentiometer connected to one of the analog inputs of the MCP3008 ADC provides a variable input voltage. You measure this voltage and display it on the segmented display.</p><p>You can replace the potentiometer with an analog temperature sensor or a photo-resistor to build a digital thermometer or a digital light sensor.</p><h3 class="title" id="d126e119195">Prerequisites<span id="BuildADigitalVoltmeterExample-2" class="anchor_target"></span></h3><p>It is helpful to complete the following examples</p><div class="itemizedlist"><ul><li><p>
<a href="analog-input-using-spi.html" data-docid="mlsupportpkg#example-raspi_analog_input_using_spi" class="a">Analog Input Using SPI</a> example.</p></li></ul></div><div class="itemizedlist"><ul><li><p>
<a href="controlling-a-4-digit-7-segment-display-using-i2c.html" data-docid="mlsupportpkg#example-raspi_segmented_display_using_i2c" class="a">Control Four-Digit Seven-Segment Display Using I2C</a> example.</p></li></ul></div><h3 class="title" id="d126e119212">Required Hardware<span id="BuildADigitalVoltmeterExample-3" class="anchor_target"></span></h3><p>To run this example you need the following hardware:</p><div class="itemizedlist"><ul><li><p>Raspberry Pi hardware</p></li><li><p>A power supply with at least 1A output</p></li><li><p>Breadboard and jumper cables</p></li><li><p>MCP3008 ADC</p></li><li><p>10 kOhm potentiometer</p></li><li><p>A 4-digit, 7-segment display with I2C interface from SparkFun</p></li></ul></div><h3 class="title" id="d126e119230">Connect MCP3008<span id="BuildADigitalVoltmeterExample-4" class="anchor_target"></span></h3><p>Connect MCP3008 to the Raspberry Pi hardware as seen in the following circuit diagram. To simulate a variable voltage applied to CH0, use a 10 kOhm potentiometer connected to CH0.</p><p>
</p>
<div class="informalfigure"><div id="d126e119238" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/xxmcp3008_circuit.png"></p></div></div><p>
 </p><p>The potentiometer (POT), in this example, is a three-terminal device with terminals 1 and 3 comprising the end points of a resistor embedded in the POT. The second terminal is connected to a variable wiper. As the wiper moves, the resistance values across terminals 1 and 2 and terminals 2 and 3 change. In this circuit, POT acts as a variable voltage divider. As you move the knob of the potentiometer, the voltage seen at terminal 2 changes between 3.3 Volts and 0 volts.</p><h3 class="title" id="d126e119243">Connect the Display<span id="BuildADigitalVoltmeterExample-5" class="anchor_target"></span></h3><p>To connect the display to Raspberry Pi hardware, you need to do some light soldering. Since you use the I2C interface of the display in this example, solder jumper wires to the SDA, SCL, GND and VCC pins of the display. You can also choose to solder some straight male headers to be able to mount the display on a breadboard for prototyping. Before going any further, follow manufacturer's hardware assembly guide.</p><p>Connect the display to the Raspberry Pi hardware following the circuit diagram below.</p><p>
</p>
<div class="informalfigure"><div id="d126e119252" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/xxsegment_display_circuit.png"></p></div></div><p>
 </p><h3 class="title" id="d126e119256">View Available SPI Channels<span id="BuildADigitalVoltmeterExample-6" class="anchor_target"></span></h3><p>Create a raspi object and inspect the AvailableSPIChannels property of the raspi object.</p><div class="code_responsive"><pre id="d126e119261" class="programlisting">clear <span style="color:#A020F0">rpi</span>
rpi = raspi();
rpi.AvailableSPIChannels
</pre></div><p>If the SPI peripheral is not enabled, you will see an empty cell array. To enable the SPI peripheral use the raspi-config utility that comes with the Raspbian Linux image. AvailableSPIChannels property of the rpi object should yield 'CE0' and 'CE1' SPI channels listed as available.</p><h3 class="title" id="d126e119264">Scan I2C Bus<span id="BuildADigitalVoltmeterExample-7" class="anchor_target"></span></h3><p>Once the display is connected to the Raspberry Pi hardware, test the presence of the display on the I2C bus.</p><div class="code_responsive"><pre id="d126e119269" class="programlisting">
<span style="color:#0000FF">for</span> i = 1:length(rpi.AvailableI2CBuses)
    scanI2CBus(rpi, rpi.AvailableI2CBuses{i})
<span style="color:#0000FF">end</span>
</pre></div><p>The scanI2CBus() method scans the given I2C bus and returns a cell array of device addresses on the bus. If you connected the display to Raspberry Pi hardware correctly, the snippet of MATLAB code above should return a device address of '0x71' for one of the I2C buses available on the Raspberry Pi hardware. '0x71' is the factory default address of the display.</p><h3 class="title" id="d126e119272">Read Voltage<span id="BuildADigitalVoltmeterExample-8" class="anchor_target"></span></h3><p>Create an MCP3008 object to read the voltage value at Channel 0 of the ADC.</p><div class="code_responsive"><pre id="d126e119277" class="programlisting">clear <span style="color:#A020F0">mcp3008</span>
mcp3008 = raspi.internal.mcp3008(rpi, <span style="color:#A020F0">'CE0'</span>);
<span style="color:#0000FF">for</span> i = 1:20
    voltage = readVoltage(mcp3008, 0);
    fprintf(<span style="color:#A020F0">'Voltage = %0.2f\n'</span>, voltage);
    pause(0.2);
<span style="color:#0000FF">end</span>
</pre></div><p>Try playing with the POT knob while executing the loop above. You should observe that the voltage value printed on the MATLAB prompt change.</p><h3 class="title" id="d126e119280">Test the Segmented Display<span id="BuildADigitalVoltmeterExample-9" class="anchor_target"></span></h3><p>Create a segmented display object connected to the appropriate I2C bus on the Raspberry Pi hardware.</p><div class="code_responsive"><pre id="d126e119285" class="programlisting">clear <span style="color:#A020F0">sd</span>
sd = raspi.internal.segmentdisplay(rpi, &lt;I2C bus&gt;, &lt;I2C address&gt;)
clr(sd);  <span style="color:#228B22">% Clear screen</span>
print(sd, <span style="color:#A020F0">'112'</span>);
print(sd, <span style="color:#A020F0">'dead'</span>);
print(sd, <span style="color:#A020F0">'beef'</span>);
</pre></div><p>Substitute the correct I2C bus and I2C address for your segmented display.</p><h3 class="title" id="d126e119288">Display Voltage Measurements<span id="BuildADigitalVoltmeterExample-10" class="anchor_target"></span></h3><p>Read the voltage at Channel 0 of the MCP3008 ADC and display it on the segmented display every 0.1 seconds.</p><div class="code_responsive"><pre id="d126e119293" class="programlisting">delay = 0.1;
adcChannel = 0;
clr(sd);
<span style="color:#0000FF">for</span> i = 1:N
    voltage = readVoltage(mcp3008,adcChannel);
    print(sd,sprintf(<span style="color:#A020F0">'%0.0f'</span>, voltage*100));
    pause(delay);
<span style="color:#0000FF">end</span>
</pre></div><h3 class="title" id="d126e119295">Summary<span id="BuildADigitalVoltmeterExample-11" class="anchor_target"></span></h3><p>This example showed how to use a MCP3008 ADC and a segmented display connected to Raspberry Pi hardware to build a digital voltmeter application.</p></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
