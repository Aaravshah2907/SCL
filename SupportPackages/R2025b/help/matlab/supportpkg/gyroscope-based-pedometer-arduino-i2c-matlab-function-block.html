<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Gyroscope-Based Pedometer Using MATLAB Functions</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../arduinoio.html",
          "name": "Arduino Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block.html",
          "name": "Deploy Arduino Functions to Arduino Hardware Using MATLAB Function Block"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Gyroscope-Based Pedometer Using MATLAB Functions",
          "description": "How MATLAB Function blocks are used in Simulink&#174; models to implement algorithms using MATLAB&#174; functions. An Arduino&#174; MKR1000 board is used to count the number of steps a person takes while walking. The pedometer is attached to the thigh of the person in such a way that the x-axis of the gyroscope is perpendicular to the direction of walking. The data from a gyroscope sensor is sent to an Android&#174; device using the User Datagram Protocol (UDP).",
          "thumbnailURL": "../../examples/arduinoio/win64/GyroscopeBasedPedometerUsingMATLABFunctionsExample_01.png",
          "genre": "Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "Simulink"

        },
          "identifier": "arduinoio.GyroscopeBasedPedometerUsingMATLABFunctionsExample",
          "name": "GyroscopeBasedPedometerUsingMATLABFunctionsExample",
          "url": "gyroscope-based-pedometer-arduino-i2c-matlab-function-block.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('arduinoio/GyroscopeBasedPedometerUsingMATLABFunctionsExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "GyroscopeBasedPedometerUsingMATLABFunctionsExample.m",
        "pedometer_matlab_codegen.png",
        "androidArduinoPedometer.slx",
        "arduino_android_pedometer_MATLAB_codegen.slx"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how MATLAB Function blocks are used in Simulink&#174; models to implement algorithms using MATLAB&#174; functions."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/arduinoio/win64/GyroscopeBasedPedometerUsingMATLABFunctionsExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Arduino Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_b8507e6a-9002-4670-bfea-0247fae067f2"><span itemprop="title">Deploy Arduino Functions to Arduino Hardware Using MATLAB Function Block</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Gyroscope-Based Pedometer Using MATLAB Functions</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#d126e73928" class="nav-link intrnllnk">Pedometer Algorithm</a></li><li class="nav-item"><a href="#d126e73937" class="nav-link intrnllnk">Reusing the Model for Other Sensors</a></li><li class="nav-item"><a href="#d126e73954" class="nav-link intrnllnk">Prerequisites</a></li><li class="nav-item"><a href="#d126e73985" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#d126e73996" class="nav-link intrnllnk">Set Up a Network Connection</a></li><li class="nav-item"><a href="#d126e74047" class="nav-link intrnllnk">Configure and Run Models on the Arduino Board and the Android Device</a></li><li class="nav-item"><a href="#d126e74091" class="nav-link intrnllnk">More About</a></li><li class="nav-item"><a href="#d126e74099" class="nav-link intrnllnk">References</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-deploy-arduino-functions-to-arduino-hardware-using-matlab-function-block&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section><div class="example_icon"></div><h1 class="r2025b" itemprop="title content" id="mw_37828611-6c45-4380-a853-22fa59076405">Gyroscope-Based Pedometer Using MATLAB Functions</h1><div class="examples_short_list hidden_ios_android" data-products="ANDROID ARDUINO ML ML_ARDUINO SL"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('ANDROID')">Simulink Support Package for Android Devices</a></li><li><a href="matlab:matlab.internal.addons.showAddon('ARDUINO')">Simulink Support Package for Arduino Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('ML_ARDUINO')">MATLAB Support Package for Arduino Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('SL')">Simulink</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('arduinoio/GyroscopeBasedPedometerUsingMATLABFunctionsExample')" data-ex-genre="Script">Open Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="arduinoio-GyroscopeBasedPedometerUsingMATLABFunctionsExample"><meta itemprop="exampletitle" content="GyroscopeBased Pedometer Using MATLAB Functions"></div><span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample" class="anchor_target"></span>



<p class="shortdesc">This example shows how MATLAB Function blocks are used in Simulink&#174; models to implement algorithms using MATLAB&#174; functions. An Arduino&#174; MKR1000 board is used to count the number of steps a person takes while walking. The pedometer is attached to the thigh of the person in such a way that the <span class="emphasis"><em>x</em></span>-axis of the gyroscope is perpendicular to the direction of walking. The data from a gyroscope sensor is sent to an Android&#174; device using the User Datagram Protocol (UDP).</p>


<p>Android devices provide wireless access and a user interface. The Arduino MKR1000 board senses the data using MPU-9250 sensor connected to the board. After calculating the steps, the board sends the data to the Android device connected to the Arduino board over Wi-Fi&#174;.</p>




<div class="procedure"><h3 class="title" id="d126e73928">Pedometer Algorithm<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-1" class="anchor_target"></span></h3><p>The pedometer algorithm is implemented inside the MATLAB function block in the Arduino model. You can use the model with other sensors after modifying the data read and sensor specific information. The data is read by the I2C device read functions inside the MATLAB function block.</p><p>While walking, one leg moves forward and the heel touches the ground. This is called an initial contact. Then, the body is pushed forward. The same leg lifts from the ground and moves forward and again the heel touches the ground, making the next initial contact. The duration between the first initial contact and the next initial contact is called a stride cycle.</p><p>Just before the leg lifts from the ground, the angular velocity of the thigh (on which the gyroscope is attached to) is zero. Then, the leg moves forward, and the angular velocity increases attaining maxima when the thigh is perpendicular to the ground. Again, the angular velocity decreases and reaches zero when the heel touches the ground, that is, when the leg makes the next initial contact. When the leg moves forward, the angular velocity has a positive gradient. In the stride cycle, when the leg moves backward pushing the body forward, the angular velocity has a negative gradient. Therefore, one stride cycle can be measured as the time between one negative gradient zero crossing point and the next.</p><p>After receiving an incoming frame, MATLAB identifies all local maxima, local minima, and zero crossings and then traverses the frame starting from the first zero crossing. If it is a negative gradient zero crossing, MATLAB expects a local minima next. After identifying the local minima, if MATLAB gets another zero crossing with positive gradient, MATLAB reads that as a valid step. The positive gradient zero crossing is the time when the other leg makes the first initial contact.</p><p>MATLAB counts all the valid zero crossings, which equals the number of steps. To validate a local maxima or minima, MATLAB uses a threshold value. The threshold is provided as an input to the MATLAB Function block. The threshold can be adjusted depending on the minimum walking speed of an individual.</p><h3 class="title" id="d126e73937">Reusing the Model for Other Sensors<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-2" class="anchor_target"></span></h3><p>The Butterworth low pass filter defined inside the MATLAB Function block is set to a cut-off frequency of 5 Hz, which is sufficient for detecting the steps. Most gyroscopes allow you to configure the bandwidth and the output data rate. These parameters must be set according to the required bandwidth in the initialization block. Also, the sample rate of the MATLAB function block named Step Calculator, which reads gyroscope data from sensor, must be the same as the sampling rate of the Butterworth low pass filter. In this example, both are set to 20 Hz.</p><p>This example uses these Simulink models:</p><div class="itemizedlist"><ul><li><p>Arduino model: An Arduino board reads data from the MPU-9250 sensor and processes it inside a MATLAB Function block, and calculates the number of steps in real time.</p></li><li><p>Android model: The UDP Receive block receives the data from the Arduino board over Wi-Fi.</p></li></ul></div><p>With these models, you will:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Set up a network connection between the Arduino board and the Android device.</p></li><li><p>Configure and run Simulink models for the Arduino board and the Android device to calculate the number of steps taken.</p></li></ol></div><h3 class="title" id="d126e73954">Prerequisites<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-3" class="anchor_target"></span></h3><p>Before you start this example, install these MathWorks&#174; products:</p><div class="itemizedlist"><ul><li><p>DSP System Toolbox&#8482; along with MATLAB and Simulink</p></li><li><p>Simulink Support Package for Android Devices</p></li><li><p>Simulink Support Package for Arduino Hardware</p></li><li><p>MATLAB Support Package for Arduino Hardware</p></li></ul></div><p>We recommend completing these examples:</p><div class="itemizedlist"><ul><li><p>
<a href="../../simulink/supportpkg/android_ref/getting-started-with-android-devices.html" data-docid="android_ref#example-androidgettingstartedexample" class="a">Getting Started with Android Devices</a><span role="cross_prod"> (Simulink)</span>
</p></li><li><p>
<a href="getting-started-with-matlab-support-package-for-arduino-hardware.html" data-docid="mlsupportpkg#bumvvfl-1" class="a">Getting Started with MATLAB Support Package for Arduino Hardware</a>
</p></li><li><p>
<a href="../../simulink/supportpkg/arduino_ref/getting-started-with-wifi-on-arduino-hardware.html" data-docid="arduino_ref#example-arduino_wifi" class="a">Get Started with Wi-Fi on Arduino Hardware</a><span role="cross_prod"> (Simulink)</span>
</p></li></ul></div><h3 class="title" id="d126e73985">Required Hardware<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-4" class="anchor_target"></span></h3><div class="itemizedlist"><ul><li><p>Arduino MKR1000/MKR WiFi 1010</p></li><li><p>Android device</p></li><li><p>MPU-9250 sensor</p></li></ul></div><h3 class="title" id="d126e73996">Set Up a Network Connection<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-5" class="anchor_target"></span></h3><p>Setup a network connection between the Arduino board and the Android device using UDP. The Arduino MKR1000/MKR WiFi 1010 board has an on-board Wi-Fi chip and can be used without any additional Wi-Fi hardware.</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Open the <a href="matlab:openExample('arduinoio/GyroscopeBasedPedometerUsingMATLABFunctionsExample','supportingFile','arduino_android_pedometer_MATLAB_codegen')" target="_blank"><code class="literal">arduino_android_pedometer_MATLAB_codegen</code></a> Simulink model.</p></li></ol></div><p>
</p>
<div class="informalfigure"><div id="d126e74011" class="mediaobject"><p><img src="../../examples/arduinoio/win64/xxpedometer_matlab_codegen.png"></p></div></div><p>
 </p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Browse to <strong class="emphasis bold">Configuration Parameters</strong> &gt; <strong class="emphasis bold">Hardware Implementation</strong> &gt; <strong class="emphasis bold">Target hardware resources</strong> &gt; <strong class="emphasis bold">WiFi properties</strong>.</p></li><li><p>Specify the SSID of your Wi-Fi network in the <strong class="emphasis bold">Service set identifier (SSID)</strong> parameter.</p></li><li><p>Select the <strong class="emphasis bold">WiFi encryption</strong> parameter based on your Wi-Fi network encryption settings. For more details on configuring the network settings for the Arduino Wi-Fi hardware, see <a href="../../simulink/supportpkg/arduino_ug/configure-network-settings-for-arduino-wifi-shield.html" data-docid="arduino_ug#bue1b5i-9" class="a">Configure Network Settings for Wi-Fi</a><span role="cross_prod"> (Simulink)</span>.</p></li><li><p>Connect the Android device to the same Wi-Fi network to which the Arduino board is connected.</p></li></ol></div><h3 class="title" id="d126e74047">Configure and Run Models on the Arduino Board and the Android Device<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-6" class="anchor_target"></span></h3><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Open the <a href="matlab:openExample('arduinoio/GyroscopeBasedPedometerUsingMATLABFunctionsExample','supportingFile','androidArduinoPedometer')" target="_blank"><code class="literal">androidArduinoPedometer</code></a> Simulink model.</p></li></ol></div><div class="informalfigure"><div id="d126e74059" class="mediaobject"><p><img src="../../examples/arduinoio/win64/GyroscopeBasedPedometerUsingMATLABFunctionsExample_01.png"></p></div></div><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Click the <strong class="emphasis bold">Deploy to Hardware</strong> button of the Android model to run the model on the Android device.</p></li><li><p>After the launch is complete, the app opens on the Android device.</p></li><li><p>Find the IP address of the Android device from the <strong class="emphasis bold">INFO</strong> pane of the app.</p></li><li><p>In the Arduino model, double-click the WiFi UDP Send block and set the <strong class="emphasis bold">Remote IP Address</strong> to the IP address of the Android device.</p></li><li><p>Click the <strong class="emphasis bold">Deploy to Hardware</strong> button to run this model on the Arduino board.</p></li><li><p>After the model is deployed on the Arduino board, you can see the step count values in the app.</p></li></ol></div><h3 class="title" id="d126e74091">More About<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-9" class="anchor_target"></span></h3><p>
<a href="../../simulink/what-is-a-matlab-function-block.html" data-docid="simulink_doccenter#mw_857ffd97-02f4-4f5a-9c79-21d4ef335197" class="a">MATLAB Function Block Basics</a><span role="cross_prod"> (Simulink)</span>
</p><h3 class="title" id="d126e74099">References<span id="GyroscopeBasedPedometerUsingMATLABFunctionsExample-10" class="anchor_target"></span></h3><p>Jayalath S, Abhayasinghe N, Murray I. A Gyroscope Based Accurate Pedometer Algorithm, October 2013.</p></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
