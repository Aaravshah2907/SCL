<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Create LCD Add-on</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../arduinoio.html",
          "name": "Arduino Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../arduinoio-custom-arduino-libraries.html",
          "name": "Custom Arduino Libraries"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "arduinoio-custom-arduino-libraries"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Create a custom MATLAB Arduino LCD add-on library."><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Arduino Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio-custom-arduino-libraries.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_41370889-fa54-44f8-9187-6048e26fc428"><span itemprop="title">Custom Arduino Libraries</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Create LCD Add-on</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#mw_32606fa1-c5a9-4816-8435-a220583f2011" class="nav-link intrnllnk">Connect Arduino to LCD</a><ul class="nav"><li class="nav-item"><a href="#d126e75952" class="nav-link intrnllnk">Required Hardware</a></li></ul></li><li class="nav-item"><a href="#mw_4e033b91-bb7f-4012-a0de-cfacc283f7e9" class="nav-link intrnllnk">Setup</a></li><li class="nav-item"><a href="#buvvedz-1" class="nav-link intrnllnk">Create C++ Header and Include Third-Party Source Files</a></li><li class="nav-item"><a href="#buvvfvp-1" class="nav-link intrnllnk">Create MATLAB Add-On Wrapper</a></li><li class="nav-item"><a href="#buvvqmh-1" class="nav-link intrnllnk">Register Custom Library and Run MATLAB Code</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-custom-arduino-libraries&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h2 class="title r2025b" itemprop="title content" id="butlugf-1">Create LCD Add-on</h2>
            <p class="shortdesc">This example shows how to create an LCD add-on library and
                display “Hello World!” on an LCD. For more information on LCDs, see
                    <a href="https://learn.adafruit.com/character-lcds/rgb-backlit-lcds" target="_blank">RGB Backlit LCDs</a>. </p>
        <ul><li><p><a class="intrnllnk" href="#mw_32606fa1-c5a9-4816-8435-a220583f2011">Connect Arduino to LCD</a></p></li><li><p><a class="intrnllnk" href="#mw_4e033b91-bb7f-4012-a0de-cfacc283f7e9">Setup</a></p></li><li><p><a class="intrnllnk" href="#buvvedz-1">Create C++ Header and Include Third-Party Source Files</a></p></li><li><p><a class="intrnllnk" href="#buvvfvp-1">Create <span class="trademark entity">MATLAB</span> Add-On Wrapper</a></p></li><li><p><a class="intrnllnk" href="#buvvqmh-1">Register Custom Library and Run <span class="trademark entity">MATLAB</span> Code</a></p></li></ul><section><h3 class="title" id="mw_32606fa1-c5a9-4816-8435-a220583f2011">Connect Arduino to LCD</h3><div class="examples_short_list hidden_ios_android" data-products="ML ML_ARDUINO"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('ML_ARDUINO')">MATLAB Support Package for Arduino Hardware</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('arduinoio/ConnectArduinoToLCDExample')" data-ex-genre="Script">Open Script</a></div></div></div></div><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Connect Arduino to LCD",
          "description": "You can connect an LCD display to your Arduino&#174; Uno board.",
          "thumbnailURL": "../../examples/arduinoio/win64/xxLCD_schem.png",
          "genre": "Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "isPartOf": {
          "@type": "CreativeWork",
          "url": "add-lcd-library.html"

        },
          "identifier": "arduinoio.ConnectArduinoToLCDExample",
          "name": "ConnectArduinoToLCDExample",
          "url": "add-lcd-library.html#mw_32606fa1-c5a9-4816-8435-a220583f2011"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('arduinoio/ConnectArduinoToLCDExample')"

        }</script><script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "ConnectArduinoToLCDExample.m",
        "LCD_schem.png"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="arduinoio-ConnectArduinoToLCDExample"><meta itemprop="exampletitle" content="Connect Arduino to LCD"></div><span id="ConnectArduinoToLCDExample" class="anchor_target"></span>

<p class="shortdesc">You can connect an LCD display to your Arduino&#174; Uno board.</p>

<div class="procedure"><span id="d126e75952" class="anchor_target"></span><p class="title" id="d126e75952"><b>Required Hardware<span id="ConnectArduinoToLCDExample-1" class="anchor_target"></span></b></p><div class="itemizedlist"><ul><li><p>An Arduino Uno board</p></li></ul></div><div class="itemizedlist"><ul><li><p>16x2 LCD similar to this device from Sparkfun.</p></li></ul></div><div class="itemizedlist"><ul><li><p>10k potentiometer</p></li></ul></div><div class="itemizedlist"><ul><li><p>Breadboard</p></li></ul></div><div class="itemizedlist"><ul><li><p>Jumper cables</p></li></ul></div><p>To access all the library files for this example click on 'Open Example' and download the 'ConnectArduinoToLCDExample/SDKExampleLCD' folder attached with this example.</p><p>Connect the LCD as shown in the schematic:</p><p></p>
<div class="informalfigure"><div id="d126e75975" class="mediaobject"><p><img src="../../examples/arduinoio/win64/xxLCD_schem.png"></p></div></div><p>
 </p></div></section><section><h3 class="title" id="mw_4e033b91-bb7f-4012-a0de-cfacc283f7e9">Setup</h3><p>Make sure that you wire your pins as follows:</p><div class="table-responsive"><table class="table table-condensed"><colgroup><col class="tcol1" width="29%"><col class="tcol2" width="71%"></colgroup><tbody><tr><td><strong class="emphasis bold">LCD Pin</strong></td><td><strong class="emphasis bold">Arduino<sup>&#x00AE;</sup> Pin</strong></td></tr><tr><td>1 (VSS)</td><td>Ground</td></tr><tr><td>2 (VDD)</td><td>5V</td></tr><tr><td>3 (V0)</td><td>Mid pin on potentiometer</td></tr><tr><td>4 (RS)</td><td>D7</td></tr><tr><td>5 (R/W)</td><td>Ground</td></tr><tr><td>6 (E)</td><td>D6</td></tr><tr><td>11 (DB4)</td><td>D5 (PWM)</td></tr><tr><td>12 (DB5)</td><td>D4</td></tr><tr><td>13 (DB6)</td><td>D3 (PWM)</td></tr><tr><td>14 (DB7)</td><td>D2</td></tr><tr><td>15 (LED+)</td><td>5 V</td></tr><tr><td>16 (LED-)</td><td>Ground</td></tr></tbody></table></div><p>When done, your setup looks similar to this:</p><div class="informalfigure"><div id="d126e76060" class="mediaobject"><p><img src="lcd_bb.png" height="718" width="732"></p></div></div></section><section><h3 class="title" id="buvvedz-1">Create C++ Header and Include Third-Party Source Files</h3>
                <p class="shortdesc">For this example, create a header file named
                        <code class="literal">LCDAddon.h</code> and save it in the
                        <code class="literal">+arduinoioaddons/+ExampleLCD/src</code> folder. This file wraps
                    all the methods in the library.</p>
                <p>You can access the library files from
                    'CreateFolderStructureLCDExample/SDKExampleLCD' folder downloaded in <a href="add-lcd-library.html#mw_32606fa1-c5a9-4816-8435-a220583f2011" class="intrnllnk">Connect Arduino to LCD</a>.</p>
            <div class="procedure"><p>Include <code class="literal">LibraryBase.h</code> and the third-party header
                            file<code class="literal">LiquidCrystal.h</code>.</p><div class="code_responsive"><pre class="programlisting">#include "LibraryBase.h"
#include "LiquidCrystal.h"</pre></div><p>Declare debug strings using <code class="literal">const char</code>. Use
                            <code class="literal">PROGMEM</code> to store the debug strings to the device
                        flash memory, to save <code class="literal">SRAM</code>.</p><div class="code_responsive"><pre class="programlisting">const char MSG_pLCD_CREATE_LCD_SHIELD[]       PROGMEM = "Arduino::pLCD = new LiquidCrystal(%d, %d, %d, %d, %d, %d);\n";
const char MSG_pLCD_INITIALIZE_LCD_SHIELD[]   PROGMEM = "Arduino::pLCD-&gt;begin(%d, %d);\n";
const char MSG_pLCD_CLEAR_LCD_SHIELD[]        PROGMEM = "Arduino::pLCD-&gt;clear();\n";
const char MSG_pLCD_PRINT[]                   PROGMEM = "Arduino::pLCD-&gt;print(%s);\n";
const char MSG_SET_CURSOR_LCD_SHIELD[]        PROGMEM = "Arduino::pLCD-&gt;setCursor(%d, %d);\n";
const char MSG_pLCD_DELETE_LCD_SHIELD[]       PROGMEM = "Arduino::delete pLCD;\n";</pre></div><p>Define command IDs to match those defined in your MATLAB<sup>&#x00AE;</sup> class.</p><div class="code_responsive"><pre class="programlisting">#define LCD_CREATE      0x00
#define LCD_INITIALIZE  0x01
#define LCD_CLEAR       0x02
#define LCD_PRINT       0x03
#define LCD_DELETE      0x04

byte cursorRow = 0;
</pre></div><p>Create the constructor that defines the library name. Declare the debug
                        strings and register the library to the server.</p><div class="code_responsive"><pre class="programlisting">class LCD : public LibraryBase
{
public:
    LiquidCrystal *pLCD;
public:
    LCD(MWArduinoClass&amp; a)
    {
        libName = "ExampleShield/LCD";
        a.registerLibrary(this);
    }</pre></div><p>Override the <code class="method">setup</code> method to reset the cursor to the
                        first row upon initialization.</p><div class="code_responsive"><pre class="programlisting">    void setup()
    {
        cursorRow = 0;
    }
    </pre></div><p>Override <code class="literal">commandHandler</code>, and map each command to its
                        corresponding methods. For this example, map the commands:</p><div class="table-responsive"><table class="table table-condensed"><colgroup><col class="tcol1" width="33%"><col class="tcol2" width="33%"><col class="tcol3" width="33%"></colgroup><thead><tr><th>Case</th><th>Command </th><th>Description</th></tr></thead><tbody><tr><td>0x00</td><td><code class="literal">LCD_CREATE</code></td><td>Define pins used by the LCD</td></tr><tr><td>0x01</td><td><code class="literal">LCD_INITIALIZE</code></td><td>Set up columns and rows</td></tr><tr><td>0x02</td><td><code class="literal">LCD_CLEAR </code></td><td>Clear the LCD screen</td></tr><tr><td>0x03</td><td><code class="literal">LCD_PRINT</code></td><td>Print the message on the LCD</td></tr><tr><td>0x04</td><td><code class="literal">LCD_DELETE</code></td><td>Delete the LCD object</td></tr></tbody></table></div><p> Create an LCD object. Initialize the LCD and assign rows and columns of
                        the inputs. Use <code class="literal">debugPrint</code> to print trace messages to the
                            MATLAB command line to help you debug code running on the Arduino device.</p><p>To understand more about command handlers see <a href="custom-library-concepts.html#bu73xge" class="a">Command Handler</a>.</p><div class="code_responsive"><pre class="programlisting">public:
    void commandHandler(byte cmdID, byte* dataIn, unsigned int payloadSize)
    {
        switch(cmdID)
        {
            case LCD_CREATE:  //createLCD
            {
                byte* pinNumbers = new byte [6];
                for (byte i=0; i&lt;6; i=i+1)
                {
                    pinNumbers[i] = dataIn[i];
                }
                createLCDObject(pinNumbers[0],pinNumbers[1],pinNumbers[2],pinNumbers[3],pinNumbers[4],pinNumbers[5]);
                sendResponseMsg(cmdID, 0, 0);
                break;
            }
            case LCD_INITIALIZE:  //initializeLCD
            {
                unsigned int rows = dataIn[0];
                unsigned int cols = dataIn[1];
                initializeLCD(rows,cols);
                clearLCD();
                sendResponseMsg(cmdID, 0, 0);
                break;
            }            </pre></div><p>Clear the LCD screen.</p><div class="code_responsive"><pre class="programlisting">case LCD_CLEAR:  //clearLCD
            {
                clearLCD();
                cursorRow = 0;
                setCursor(0, cursorRow);
                sendResponseMsg(cmdID, 0, 0);
                break;
            }   </pre></div><p>Create a command that takes an input and prints it on the LCD
                        screen.</p><div class="code_responsive"><pre class="programlisting">            case LCD_PRINT:  //printLCD
            {
                byte* val = {dataIn};
                // last byte is the number of rows initialized
                // last 2nd byte is the number of columns initialized
                char message[payloadSize-1];
                for(byte k=0; k&lt;(payloadSize-2); k=k+1)
                {
                    message[k]=val[k];
                }
                message[payloadSize-2] = '\0';
                
                byte cols = val[payloadSize-2];
                byte rows = val[payloadSize-1];

                if(cursorRow+1 &gt; rows){
                    cursorRow = 0;
                    clearLCD();
                }
                setCursor(0,cursorRow);
                printLCD(message);
                cursorRow++;
                    
                sendResponseMsg(cmdID, 0, 0);
                break;
            }        </pre></div><p>Delete the LCD object.</p><div class="code_responsive"><pre class="programlisting">            case LCD_DELETE:  //delete
            {
                deleteLCDobject();
                //reset the cursor position to the first row on deletion
                cursorRow = 0;
                sendResponseMsg(cmdID, 0, 0);
                break;
            }
            default:
            {
                // Do nothing
                break;
            }    </pre></div><p>Wrap the <code class="literal">LiquidCrystal</code> methods to add debug
                        messages.</p><div class="code_responsive"><pre class="programlisting">public:
	void createLCDObject(unsigned int rs,unsigned int enable,unsigned int d0,unsigned int d1,unsigned int d2,unsigned int d3)
	{
		 pLCD = new LiquidCrystal(rs, enable, d0, d1, d2, d3);
		 debugPrint(MSG_pLCD_CREATE_LCD_SHIELD,rs,enable,d0,d1,d2,d3);
	}
	void initializeLCD(unsigned int cols,unsigned int rows)
	{
		pLCD-&gt;begin(cols, rows);
		debugPrint(MSG_pLCD_INITIALIZE_LCD_SHIELD, cols, rows);
	}
	void clearLCD()
	{
		pLCD-&gt;clear();
		debugPrint(MSG_pLCD_CLEAR_LCD_SHIELD);
	}
	void printLCD(char message[])
	{
		pLCD-&gt;print(message);
		debugPrint(MSG_pLCD_PRINT, message);
	}
	void setCursor(byte column, byte row)
	{
		pLCD-&gt;setCursor(column, row);
		debugPrint(MSG_SET_CURSOR_LCD_SHIELD,column,row);
	}
	void deleteLCDobject()
	{
		delete pLCD;
		debugPrint(MSG_pLCD_DELETE_LCD_SHIELD);
	}
};</pre></div></div></section><section><h3 class="title" id="buvvfvp-1">Create <span class="trademark entity">MATLAB</span> Add-On Wrapper</h3>
                <p class="shortdesc">This example shows how to create
                        <code class="literal">LCDAddon.m</code>
                    MATLAB wrapper class file and save it in the
                        <code class="literal">C:\Work\+arduinoioaddons\+ExampleLCD</code> folder. </p>
                <p>You can access the library files from
                    'CreateFolderStructureLCDExample/SDKExampleLCD' folder downloaded in <a href="add-lcd-library.html#mw_32606fa1-c5a9-4816-8435-a220583f2011" class="intrnllnk">Connect Arduino to LCD</a>.</p>
            <div class="procedure"><p>Create MATLAB class, <code class="literal">LCDAddon</code>, that inherits from
                            <code class="literal">matlabshared.addon.LibraryBase</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#0000FF">classdef</span> LCDAddon &lt; matlabshared.addon.LibraryBase </pre></div></div></div><p>Define custom command IDs for all public methods of the LCD class sent to
                        the server on the board.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    properties(Access = private, Constant = true)
        LCD_CREATE     = hex2dec(<span style="color:#A020F0">'00'</span>)
        LCD_INITIALIZE = hex2dec(<span style="color:#A020F0">'01'</span>)
        LCD_CLEAR      = hex2dec(<span style="color:#A020F0">'02'</span>)
        LCD_PRINT      = hex2dec(<span style="color:#A020F0">'03'</span>)
        LCD_DELETE     = hex2dec(<span style="color:#A020F0">'04'</span>)
    <span style="color:#0000FF">end</span>  </pre></div></div></div><p>Override constant properties in the class to include necessary header and
                        third-party source files.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    properties(Access = protected, Constant = true)
        LibraryName = <span style="color:#A020F0">'ExampleLCD/LCDAddon'</span>
        DependentLibraries = {}
        LibraryHeaderFiles = <span style="color:#A020F0">'LiquidCrystal/LiquidCrystal.h'</span>
        CppHeaderFile = fullfile(arduinoio.FilePath(mfilename(<span style="color:#A020F0">'fullpath'</span>)), <span style="color:#A020F0">'src'</span>, <span style="color:#A020F0">'LCDAddon.h'</span>)
        CppClassName = <span style="color:#A020F0">'LCD'</span>
    <span style="color:#0000FF">end</span>    

    properties(Access = private)
        ResourceOwner = <span style="color:#A020F0">'ExampleLCD/LCDAddon'</span>;
        Rows
        Columns
    <span style="color:#0000FF">end</span>    </pre></div></div></div><div class="itemizedlist"><ul><li><p><code class="literal">DependentLibraries</code> must contain all other
                                libraries you need to use your custom library.</p></li><li><p><code class="literal">LibraryHeaderFiles</code> must be a string, starting
                                with the library name, followed by a slash (<code class="literal">/</code>),
                                and then header file name. If you need multiple header files,
                                specify a cell array of strings. </p></li><li><p><code class="literal">CppHeaderFile</code> must be the
                                    <code class="literal">LCDAddon.h</code> with the full path. Replace
                                    <code class="literal">LCDAddon.h</code> with your custom file name after
                                you create it, and save it to the <code class="literal">src</code> folder in
                                the <code class="literal">ExampleLCD</code> folder. </p></li><li><p><code class="literal">CppClassName</code> must be the exact class name
                                defined in <code class="literal">LCDAddon.h</code>.</p></li></ul></div><p>Specify command IDs supported by the add-on for each method you create.
                        Specify the pins that connect to the LCD, and define an error if the
                        resource count is more than <code class="literal">0</code>. In this example, you can
                        add only one LCD, and therefore it is imperative that you manage your pin
                        resource count.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    methods(Hidden, Access = public)
     <span style="color:#228B22">% InputPins is user input and contains the pins that connect the LCD Data Pins and the arduino</span>
        <span style="color:#0000FF">function</span> obj = LCDAddon(parentObj,varargin)
             <span style="color:#0000FF">if</span>(nargin &lt; 7)
                matlabshared.hwsdk.internal.localizedError(<span style="color:#A020F0">'MATLAB:narginchk:notEnoughInputs'</span>);
             <span style="color:#0000FF">elseif</span> nargin &gt; 7
                matlabshared.hwsdk.internal.localizedError(<span style="color:#A020F0">'MATLAB:narginchk:tooManyInputs'</span>);
             <span style="color:#0000FF">end</span>  

             <span style="color:#0000FF">try</span>
                p = inputParser;
                addParameter(p, <span style="color:#A020F0">'RegisterSelectPin'</span>,[]);
                addParameter(p, <span style="color:#A020F0">'EnablePin'</span>, []);
                addParameter(p, <span style="color:#A020F0">'DataPins'</span>, []);
                parse(p, varargin{1:end});
             <span style="color:#0000FF">catch</span> e
                 throwAsCaller(e);
             <span style="color:#0000FF">end</span>
            obj.Parent = parentObj;            
            obj.RegisterSelectPin = p.Results.RegisterSelectPin;
            obj.EnablePin = p.Results.EnablePin;
            obj.DataPins = p.Results.DataPins;
            inputPins = [cellstr(obj.RegisterSelectPin) cellstr(obj.EnablePin) obj.DataPins];
            obj.Pins = inputPins;
            count = getResourceCount(obj.Parent,obj.ResourceOwner);
            <span style="color:#228B22">% Since this example allows implementation of only 1 LCD</span>
            <span style="color:#228B22">% shield, error out if resource count is more than 0</span>
            <span style="color:#0000FF">if</span> count &gt; 0
                error(<span style="color:#A020F0">'You can only have 1 LCD shield'</span>);
            <span style="color:#0000FF">end</span> 
            incrementResourceCount(obj.Parent,obj.ResourceOwner);    
            createLCD(obj,inputPins);
        <span style="color:#0000FF">end</span></pre></div></div></div><p>Devices such as the Arduino Uno have a limited number of pins and require you to manage
                        the resource allocation. Therefore, you are limited to creating only one LCD
                        object at a time. For more information, see <a href="getresourceowner.html"><code class="function">getResourceOwner</code></a>.</p><p>Write a <code class="literal">createLCD</code> method to perform the following
                        functions: </p><div class="itemizedlist"><ul><li><p>Reserve the pins on the Arduino connected to the LCD and used by the library.
                                Reserving prevents other functions from using these pins, giving
                                your library exclusive use of the pins.</p></li><li><p>Send commands, including pin data, to the server using
                                    <code class="literal">sendCommand</code>.</p></li></ul></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>        <span style="color:#0000FF">function</span> createLCD(obj,inputPins)
            <span style="color:#0000FF">try</span>
                cmdID = obj.LCD_CREATE;
                
                <span style="color:#0000FF">for</span> iLoop = inputPins
                    configurePinResource(obj.Parent,iLoop{:},obj.ResourceOwner,<span style="color:#A020F0">'Reserved'</span>);
                <span style="color:#0000FF">end</span>
                
                terminals = getTerminalsFromPins(obj.Parent,inputPins);
                sendCommand(obj, obj.LibraryName, cmdID, terminals);
            <span style="color:#0000FF">catch</span> e
                throwAsCaller(e);
            <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>    </pre></div></div></div><p>Overload destructor <code class="literal">delete</code> method for LCD class to free
                        up the reserved pins and decrement LCD resource count.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    methods(Access = protected)
        <span style="color:#0000FF">function</span> delete(obj)
            <span style="color:#0000FF">try</span>
                parentObj = obj.Parent;
                <span style="color:#228B22">% Clear the pins that have been configured to the LCD shield</span>
                inputPins = [cellstr(obj.RegisterSelectPin) cellstr(obj.EnablePin) obj.DataPins];
                <span style="color:#0000FF">for</span> iLoop = inputPins
                    configurePinResource(parentObj,iLoop{:},obj.ResourceOwner,<span style="color:#A020F0">'Unset'</span>);
                <span style="color:#0000FF">end</span>
                <span style="color:#228B22">% Decrement the resource count for the LCD</span>
                decrementResourceCount(parentObj, obj.ResourceOwner);
                cmdID = obj.LCD_DELETE;
                inputs = [];
                sendCommand(obj, obj.LibraryName, cmdID, inputs);
            <span style="color:#0000FF">catch</span>
                <span style="color:#228B22">% Do not throw errors on destroy.</span>
                <span style="color:#228B22">% This may result from an incomplete construction.</span>
            <span style="color:#0000FF">end</span>
        <span style="color:#0000FF">end</span>  
    <span style="color:#0000FF">end</span></pre></div></div></div><div class="alert alert-info d-inline-block"><span class="alert_icon icon-alert-info-reverse"></span><p class="alert_heading"><strong>Note</strong></p><p>Do not throw errors when you destroy the object.</p></div><p>Initialize the LCD with specific number of columns and rows, and clear the
                        LCD screen.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>    methods(Access = public)
        <span style="color:#0000FF">function</span> initializeLCD(obj,varargin)                                    
            p = inputParser;
            p.PartialMatching = true;
            
            addParameter(p, <span style="color:#A020F0">'Rows'</span>, 2);
            addParameter(p, <span style="color:#A020F0">'Columns'</span>, 16);
            parse(p, varargin{:});
            output = p.Results;
            
            obj.Rows = output.Rows;
            obj.Columns = output.Columns;
            inputs = [output.Columns output.Rows];
            
            cmdID = obj.LCD_INITIALIZE;  
            sendCommand(obj, obj.LibraryName, cmdID, inputs);
        <span style="color:#0000FF">end</span>    </pre></div></div></div><p>Clear the LCD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>        <span style="color:#0000FF">function</span> clearLCD(obj)
            cmdID = obj.LCD_CLEAR;
            inputs = [];
            sendCommand(obj, obj.LibraryName, cmdID, inputs);
        <span style="color:#0000FF">end</span>    </pre></div></div></div><p>Print the message on the LCD. This example uses a 16x2 LCD screen and
                        cannot print more than 16 characters.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>        <span style="color:#0000FF">function</span> printLCD(obj,message)
            cmdID = obj.LCD_PRINT;
            
            <span style="color:#0000FF">if</span> numel(message) &gt; 16
                error(<span style="color:#A020F0">'Cannot print more than 16 characters'</span>)
            <span style="color:#0000FF">end</span>
            
            inputs = [double(message) obj.Columns obj.Rows];
            sendCommand(obj, obj.LibraryName, cmdID, inputs); 
        <span style="color:#0000FF">end</span>       
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span>    </pre></div></div></div></div></section><section><h3 class="title" id="buvvqmh-1">Register Custom Library and Run <span class="trademark entity">MATLAB</span> Code</h3>
                <p class="shortdesc">Use the header files you have created to register the custom
                    library and run the example.</p>
                <p>You can access the library files from
                    'CreateFolderStructureLCDExample/SDKExampleLCD' folder downloaded in <a href="add-lcd-library.html#mw_32606fa1-c5a9-4816-8435-a220583f2011" class="intrnllnk">Connect Arduino to LCD</a>.</p>
            <div class="procedure"><p>Add the location of the working folder that contains
                            <code class="literal">+arduinoioaddons</code> to the MATLAB path. For example:</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>addpath (<span style="color:#A020F0">'C:\Work'</span>);</pre></div></div></div><div class="informalfigure"><div id="d126e76357" class="mediaobject"><p><img src="lcdarduinolibraries.png" height="158" width="392"></p></div></div><p>Make sure the <code class="literal">ExampleLCD/LCDAddon</code> library is
                        available.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>listArduinoLibraries</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>ans = 

    'Adafruit/MotorShieldV2'
    'ExampleLCD/LCDAddon'
    'I2C'
    'SPI'
    'Servo'</pre></div></div></div><div class="alert alert-info d-inline-block"><span class="alert_icon icon-alert-info-reverse"></span><p class="alert_heading"><strong>Tip</strong></p><p>If you do not see your add-on library in the list, see <a href="custom-arduino-library-issues.html" class="a">Custom Arduino Library Issues</a> for more
                            information.</p></div><p>Create an <code class="function">arduino</code> object specifying the
                            <code class="literal">ExampleLCD/LCDAddon</code> library. Set
                            <code class="literal">ForceBuildOn</code> to <code class="literal">true</code> to reprogram
                        the board.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>a = arduino(<span style="color:#A020F0">'com5'</span>,<span style="color:#A020F0">'uno'</span>,<span style="color:#A020F0">'libraries'</span>,<span style="color:#A020F0">'ExampleLCD/LCDAddon'</span>,<span style="color:#A020F0">'ForceBuildOn'</span>,true);</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>a = 

  arduino with properties:

                    Port: 'COM5'
                   Board: 'Uno'
           AvailablePins: {'D2-D13', 'A0-A5'}
    AvailableDigitalPins: {'D2-D13', 'A0-A5'}
        AvailablePWMPins: {'D3', 'D5-D6', 'D9-D11'}
     AvailableAnalogPins: {'A0-A5'}
      AvailableI2CBusIDs: [0]
             Libraries: {'ExampleLCD/LCDAddon'}</pre></div></div></div><p>Create the LCD object, and specify the pins you configured on the
                            Arduino device.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>lcd = addon(a,<span style="color:#A020F0">'ExampleLCD/LCDAddon'</span>,<span style="color:#A020F0">'RegisterSelectPin'</span>,<span style="color:#A020F0">'D7'</span>,<span style="color:#A020F0">'EnablePin'</span>,<span style="color:#A020F0">'D6'</span>,<span style="color:#A020F0">'DataPins'</span>,{<span style="color:#A020F0">'D5'</span>,<span style="color:#A020F0">'D4'</span>,<span style="color:#A020F0">'D3'</span>,<span style="color:#A020F0">'D2'</span>});</pre></div></div></div><p>Initialize the LCD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>initializeLCD(lcd);
</pre></div></div></div><p>Print a string to the LCD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>printLCD(lcd,<span style="color:#A020F0">'Hello World!'</span>);</pre></div></div></div><p>If you do not see a display on your LCD, try turning the knob on your
                        potentiometer to adjust the contrast.</p><p>Clear the LCD.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>clearLCD(lcd);</pre></div></div></div></div></section></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
