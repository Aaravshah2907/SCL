<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Classify Static Image Using Deep Learning on Raspberry Pi</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../raspberrypiio.html",
          "name": "Raspberry Pi Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../raspberrypiio-run-on-hardware.html",
          "name": "Run on Target Hardware"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "raspberrypiio-run-on-hardware"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Classify Static Image Using Deep Learning on Raspberry Pi",
          "description": "Generate and deploy code for an image classification algorithm using MATLAB&#174; Support Package for Raspberry Pi&#174; Hardware. The algorithm uses the ResNet-50 neural network to identify the image that is passed as an input using the command line of Raspberry Pi.",
          "thumbnailURL": "../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "raspberrypiio.ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample",
          "name": "ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample",
          "url": "classify-image-received-over-ssh-in-raspberry-pi.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('raspberrypiio/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample.mlx",
        "main.cpp",
        "coffeemug.png",
        "raspi_fileRead_resnet.m",
        "raspberrypi_modify_maincpp_image_classification.png",
        "readResizedImg.m",
        "main.h",
        "update_main_h_file.png",
        "raspberrypi_ssh_resnet50_output.png"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="fe">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="ex">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows you how to generate and deploy code for an image classification algorithm using MATLAB&#174; Support Package for Raspberry Pi&#174; Hardware."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Raspberry Pi Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../raspberrypiio-run-on-hardware.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_8aa46fa2-1931-45fb-af48-20625a7eaffd"><span itemprop="title">Run on Target Hardware</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Classify Static Image Using Deep Learning on Raspberry Pi</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-1" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-2" class="nav-link intrnllnk">Prerequisite</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-3" class="nav-link intrnllnk">Step 1: Connect the Raspberry Pi Hardware</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-4" class="nav-link intrnllnk">Step 2: Open the Object Classification Algorithm</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-5" class="nav-link intrnllnk">Step 3: Generate C++ Code for Image Classification on Raspberry Pi</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-6" class="nav-link intrnllnk">Step 4: Edit C++ Main File to Accept Input from Command Line of Raspberry Pi</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-7" class="nav-link intrnllnk">Step 5: Deploy the Function as a Standalone Executable on the Raspberry Pi</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-8" class="nav-link intrnllnk">Step 6: Copy Image File to the Raspberry Pi</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-9" class="nav-link intrnllnk">Step 7: Run the Executable Program to Get Prediction Scores</a></li><li class="nav-item"><a href="#ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-10" class="nav-link intrnllnk">See Also</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=raspberrypiio-run-on-hardware&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-example">
<section><div class="example_icon"></div><h1 class="r2025b" itemprop="title content" id="example-resnet50_ssh">Classify Static Image Using Deep Learning on Raspberry Pi</h1><div class="examples_short_list hidden_ios_android" data-products="ML RASPPIIO NN RESNET50 ME ML_DEEPLEARNING_LIB"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('RASPPIIO')">MATLAB Support Package for Raspberry Pi Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('NN')">Deep Learning Toolbox</a></li><li><a href="matlab:matlab.internal.addons.showAddon('RESNET50')">Deep Learning Toolbox Model for ResNet-50 Network</a></li><li><a href="matlab:matlab.internal.addons.showAddon('ME')">MATLAB Coder</a></li><li><a href="matlab:matlab.internal.addons.showAddon('ML_DEEPLEARNING_LIB')">MATLAB Coder Interface for Deep Learning</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('raspberrypiio/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="raspberrypiio-ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample"><meta itemprop="exampletitle" content="Classify Static Image Using Deep Learning on Raspberry Pi"></div><span id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample" class="anchor_target"></span><p class="shortdesc">This example shows you how to generate and deploy code for an image classification algorithm using MATLAB&#174; Support Package for Raspberry Pi&#174;  Hardware. The algorithm uses the ResNet-50 neural network to identify the image that is passed as an input using the command line of Raspberry Pi. </p><p>When you generate code for prediction the Raspberry Pi support package builds the executable on the hardware. Using ResNet-50, the executable classifies images into 1000 object categories, such as keyboard, coffee mug, pencil, and many animals. The executable predicts the object and outputs a label for it along with the associated probability of object category.</p><p>Note: You cannot generate and deploy deep learning code on Raspberry Pi hardware using macOS. </p><div class="procedure"><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-1">Required Hardware<span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_0C07844F" class="anchor_target"></span></h3><div class="itemizedlist"><ul><li><p>Raspberry Pi hardware (Model 4 recommended)</p></li><li><p>USB cable</p></li><li><p>Ethernet cable</p></li><li><p>A monitor connected to the Raspberry Pi hardware and a HDMI cable (optional)</p></li></ul></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-2">Prerequisite</h3><p><strong class="emphasis bold">Configure the Raspberry Pi using the </strong><a href="install-support-for-raspberry-pi-hardware.html#bt7xwov-2_sep_mw_ce00da2f-bde9-4f39-a69a-a9aaf014dbc0" data-docid="mlsupportpkg#bt7xwov-2.mw_ce00da2f-bde9-4f39-a69a-a9aaf014dbc0" class="a">Hardware Setup</a><strong class="emphasis bold"> screen</strong>. Customize the OS on your hardware and ensure that you select the option to install the OpenCV Library.</p><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-3"><strong class="emphasis bold">Step 1: Connect the Raspberry Pi Hardware</strong><span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_A82A0988" class="anchor_target"></span></h3><p><strong class="emphasis bold">Tip</strong>: Before you start this example, we recommend you to complete the <a href="getting-started-with-matlab-support-package-for-raspberry-pi-hardware.html" data-docid="mlsupportpkg#example-raspi_gettingstarted" class="a">Getting Started with MATLAB Support Package for Raspberry Pi Hardware</a> and <a href="get-inputs-to-a-matlab-function-over-ssh-in-raspberry-pi.html" data-docid="mlsupportpkg#example-simplesum_ssh" class="a">Send Inputs to MATLAB Function from Command Line of Raspberry Pi</a> examples.</p><p>Connect the micro end of the USB cable to the Raspberry Pi and the regular end of the USB cable to the computer. Wait until the PWR LED on the hardware starts blinking.</p><div class="informalfigure"><div id="d126e121461" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_01.png" alt="Connection diagram of the setup." height="252" width="491"></p></div></div><p>In the MATLAB&#174; Command Window, create a connection to the Raspberry Pi hardware.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>r = raspi(<span style="color:#A020F0">"rpi4b040308eth"</span>);</pre></div></div></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-4">Step 2: Open the Object Classification Algorithm<span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_2B407ED7" class="anchor_target"></span></h3><p>In this example, the <code class="literal">raspi_fileRead_resnet</code> function loads the ResNet-50 deep learning neural network to classify the input image. The function resizes the image using OpenCV to fit the size expected by the network. It then classifies the image into object categories and outputs a label for object predictions along with the probabilities for each of the object categories. </p><p>For more information on the function, enter this command in the MATLAB Command Window.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>type <span style="color:#A020F0">raspi_fileRead_resnet</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>function raspi_fileRead_resnet(fileName)
%#codegen
assert(size(fileName,2)==1); % Filename is a 1d array of size Nx1
assert(all(size(fileName) &lt;= 50));
assert(isa(fileName,'char'));

%Initialize DNN and the input size
net        = coder.loadDeepLearningNetwork('resnet50');
inputSize  = [224, 224,3]; %net.Layers(1).InputSize;

%Read the image
imgSizeAdjusted = readResizedImg(fileName,inputSize);

%Classify the input image
[label,score] = net.classify(imgSizeAdjusted);

labelStr  = cellstr(label);
maxScore  = max(score);
outputStr = sprintf('Label : %s \nScore : %f',labelStr{:},maxScore);

%Print label and score to stdout
fprintf('%s\n',outputStr);
end
</pre></div></div></div><p>You can modify the function by using the <code class="literal">edit</code> command.</p><div class="code_responsive"><pre id="d126e121485" class="programlisting">edit <span style="color:#A020F0">raspi_fileRead_resnet</span>
</pre></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-5">Step 3: Generate C++ Code for Image Classification on Raspberry Pi<span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_A3E08C49" class="anchor_target"></span></h3><p>Create a hardware configuration object by using the <a href="targethardware.targethardware.html" data-docid="mlsupportpkg#mw_0826d141-e828-41a5-b465-cdf6268cb39a" class="a"><code class="olink">targetHardware</code></a> function in the MATLAB Command Window.</p><p>For Raspberry Pi with 32-bit OS, use: </p><div class="code_responsive"><pre class="programlisting">board = targetHardware('Raspberry Pi')
</pre></div><p>For Raspberry Pi with 64-bit OS, use: </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board = targetHardware(<span style="color:#A020F0">'Raspberry Pi (64bit)'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>board = 
targetHardware with properties:

               Name: 'Raspberry Pi (64bit)'
      DeviceAddress: 'rpi4b040308eth'
           Username: 'pi'
           Password: '*********'
           BuildDir: '/home/pi'
    EnableRunOnBoot: 0
        BuildAction: 'Build, load, and run'
        CoderConfig: [1×1 coder.CodeConfig]

</pre></div></div></div><p>Set the <code class="literal">DeviceAddress.</code></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.DeviceAddress=<span style="color:#A020F0">'rpi4b040308eth'</span>;
board.Username = <span style="color:#A020F0">'pi'</span>;
board.Password = <span style="color:#A020F0">'raspberry'</span>;
board.BuildDir = <span style="color:#A020F0">'/home/pi'</span>;</pre></div></div></div><p>Verify the <code class="literal">DeviceAddress</code>, <code class="literal">Username</code>, and <code class="literal">Password</code> properties listed in the output. If required, change the value of the properties by using the dot notation syntax. For example, to change the device address to <code class="literal">172.18.186.123</code>, enter, </p><div class="code_responsive"><pre id="d126e121517" class="programlisting">board.DeviceAddress = <span style="color:#A020F0">'172.18.186.123'</span>;
</pre></div><p>Set the <code class="literal">CoderConfig.GenCodeOnly</code> property of the board object to <code class="literal">true</code>. This enables the support package to generate and run the image classification algorithm code only on the host computer.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.CoderConfig.TargetLang = <span style="color:#A020F0">'C++'</span>;
board.CoderConfig.GenCodeOnly = true;</pre></div></div></div><p>Create deep learning configuration object. Specify the TargetLibrary to 'none' to generate library free code.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>dlcfg = coder.DeepLearningConfig(TargetLibrary = <span style="color:#A020F0">'none'</span>);</pre></div></div></div><p>You can use <code class="literal">CodeReplacementLibraries</code> for improved run-time execution. To utilize "ARM CORTEX-A CMSIS CRL", please make sure you have installed the following:</p><div class="itemizedlist"><ul><li><p>Embedded Coder and </p></li><li><p>"Simulink Support package for Raspberry Pi" or "Embedded Coder support package for ARM Cortex-A"</p></li></ul></div><p>You can run the following command in the command window:</p><div class="code_responsive"><pre id="d126e121541" class="programlisting">board.CoderConfig.CodeReplacementLibrary = <span style="color:#A020F0">"ARM Cortex-A CMSIS"</span>; 
</pre></div><p>Set the <code class="literal">DeepLearningConfig</code> property of the code generation configuration object to the deep learning configuration object.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.CoderConfig.DeepLearningConfig = dlcfg;</pre></div></div></div><p>Deploy the function on the hardware by using the <a href="deploy.html" data-docid="mlsupportpkg#mw_a8a63ef5-1af4-460a-8515-2432dd5670b6" class="a"><code class="olink">deploy</code></a> function. The <code class="literal">deploy</code> function initiates code generation of the <code class="literal">raspi_fileRead_resnet</code> function. Once code generation is complete, MATLAB generates a code generation report. Use this report to debug the function for any errors and warnings in the generated code.</p><p>After successfully generating the code, update the <code class="literal">main.cpp</code><strong class="emphasis bold"> </strong>file to accept command line arguments.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>deploy(board,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>);</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Code generation successful: View report
</pre></div></div></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-6"><strong class="emphasis bold">Step 4: Edit C++ Main File to Accept Input from Command Line of Raspberry Pi</strong><span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_D3F44DAA" class="anchor_target"></span></h3><p>This section explains how to modify the <code class="literal">main.cpp</code> file to provide inputs using the command line of Raspberry Pi. A premodified <code class="literal">main.cpp</code> file is available for you to use. You can choose to use the premodified file or to update the file manually using the steps in this section.</p><p>To use the premodified <code class="literal">main.cpp</code>  and <code class="literal">mail.h</code> files, enter this command in the MATLAB Command Window.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>copyfile(<span style="color:#A020F0">'main.h'</span>,fullfile(pwd,<span style="color:#A020F0">'codegen'</span>,<span style="color:#A020F0">'exe'</span>,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>),<span style="color:#A020F0">'f'</span>)
copyfile(<span style="color:#A020F0">'main.cpp'</span>,fullfile(pwd,<span style="color:#A020F0">'codegen'</span>,<span style="color:#A020F0">'exe'</span>,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>),<span style="color:#A020F0">'f'</span>)</pre></div></div></div><p>To update the file manually, copy the generated <code class="literal">main.cpp</code> and <code class="literal">main.h</code> files to one level higher than the current level in the file hierarchy. Open the <code class="literal">main.cpp</code> file from the <strong class="emphasis bold">GENERATED CODE</strong> section of the code generation report and update the file by adding code at the points labeled in this code.</p><div class="informalfigure"><div id="d126e121599" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_02.png" height="1272" width="1015"></p></div></div><p>Open the <code class="literal">main.h</code> file from the <strong class="emphasis bold">GENERATED CODE</strong> section of the code generation report and update the file by adding code at the points labeled in this code.</p><div class="informalfigure"><div id="d126e121610" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_03.png" height="398" width="759"></p></div></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-7"><strong class="emphasis bold">Step 5: Deploy the Function as a Standalone Executable on the Raspberry Pi</strong><span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_0B8207B2" class="anchor_target"></span></h3><p>To generate and deploy the code on the hardware, set the <code class="literal">CoderConfig.GenCodeOnly</code> property of the <code class="literal">board</code> object to <code class="literal">false</code> and then use the <a href="deploy.html" data-docid="mlsupportpkg#mw_a8a63ef5-1af4-460a-8515-2432dd5670b6" class="a"><code class="olink">deploy</code></a> function. Since the <code class="literal">deploy</code> function overwrites the<code class="literal"> main.cpp</code> file that you edited in the previous section, disable the creation of the file before deployment. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.CoderConfig.CustomSource = {fullfile(pwd,<span style="color:#A020F0">'codegen'</span>,<span style="color:#A020F0">'exe'</span>,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>,<span style="color:#A020F0">'main.cpp'</span>)}</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>board = 
targetHardware with properties:

               Name: 'Raspberry Pi (64bit)'
      DeviceAddress: 'rpi4b040308eth'
           Username: 'pi'
           Password: '*********'
           BuildDir: '/home/pi'
    EnableRunOnBoot: 0
        BuildAction: 'Build, load, and run'
        CoderConfig: [1×1 coder.CodeConfig]

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.CoderConfig.CustomInclude = {fullfile(pwd,<span style="color:#A020F0">'codegen'</span>,<span style="color:#A020F0">'exe'</span>,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>)}</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>board = 
targetHardware with properties:

               Name: 'Raspberry Pi (64bit)'
      DeviceAddress: 'rpi4b040308eth'
           Username: 'pi'
           Password: '*********'
           BuildDir: '/home/pi'
    EnableRunOnBoot: 0
        BuildAction: 'Build, load, and run'
        CoderConfig: [1×1 coder.CodeConfig]

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>board.CoderConfig.GenerateExampleMain = <span style="color:#A020F0">'DoNotGenerate'</span>;
board.CoderConfig.GenCodeOnly = false</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>board = 
targetHardware with properties:

               Name: 'Raspberry Pi (64bit)'
      DeviceAddress: 'rpi4b040308eth'
           Username: 'pi'
           Password: '*********'
           BuildDir: '/home/pi'
    EnableRunOnBoot: 0
        BuildAction: 'Build, load, and run'
        CoderConfig: [1×1 coder.CodeConfig]

</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>deploy(board,<span style="color:#A020F0">'raspi_fileRead_resnet'</span>)</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Code generation successful: View report
</pre></div></div></div><p>The <code class="literal">deploy</code> function initiates code generation of the <code class="literal">raspi_fileRead_resnet</code> function.</p><p>After successfully generating the code, the support package loads the object classification algorithm as a standalone executable on the hardware. The location of the executable is displayed in the MATLAB Command Window. Note the location for later use.</p><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-8">Step 6: Copy Image File to the Raspberry Pi<span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_93EB1E8E" class="anchor_target"></span></h3><div class="orderedlist"><ol style="list-style: decimal;"><li><p>After the code generation report has been successfully generated, click <strong class="emphasis bold">View report</strong> from the previous section.<span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_04.png" height="74" width="708"></span></span></p></li><li><p>On the <strong class="emphasis bold">MATLAB Coder Report Viewer</strong> window, on the <strong class="emphasis bold">Build Logs</strong> tab, copy the location of the generated elf. <span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_05.png" height="674" width="1200"></span></span></p></li><li><p>Copy the image file to the hardware for prediction, using <code class="literal">putFile. </code></p></li></ol></div><p>            In this example,<code class="literal"> coffeemug.png </code>is the image input to the executable and the location of the executable is same as the one you noted in the previous step.</p><p>            <span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_06.png" alt="coffeemug.png" height="307" width="398"></span></span></p><p>            4. You can provide the input image of your choice and copy it to the location of the generated elf using the following syntax:</p><div class="code_responsive"><pre class="programlisting">r.putFile('&lt;input image&gt;','&lt;target location of the generated elf copied from the code generation report&gt;')
</pre></div><p>            In this example,<code class="literal"> coffeemug.png </code>is the image input to the executable and the location of the executable is <code class="literal">/home/pi/MATLAB_ws_R2021a/C/Users/Documents/MATLAB/Examples/rasp</code>.</p><div class="code_responsive"><pre id="d126e121708" class="programlisting">r.putFile(<span style="color:#A020F0">'coffeemug.png'</span>,<span style="color:#A020F0">'/home/pi/MATLAB_ws/R2021a/C/Users/Documents/MATLAB/Examples/rasp'</span>)
</pre></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-9"><strong class="emphasis bold">Step 7: Run the Executable Program to Get Prediction Scores</strong><span id="mw_rtc_ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_H_0D94DE58" class="anchor_target"></span></h3><p>For MATLAB Desktop, use this command in the MATLAB Command Window to open an SSH terminal with Raspberry Pi, . </p><div class="code_responsive"><pre id="d126e121716" class="programlisting">openShell(r)
</pre></div><p>For MATLAB Online, open an SSH terminal with Raspberry Pi. You can use Putty to connect to Hardware or directly use SSH commands in terminal for Unix.</p><p>In the terminal, log in by entering the user name and password for the Raspberry Pi.</p><p>Change the current directory to the directory where the executable was saved.</p><div class="code_responsive"><pre id="d126e121721" class="programlisting">cd <span style="color:#A020F0">/home/pi/MATLAB_ws/R2021a/C/Users/Documents/MATLAB/Examples/rasp</span>
</pre></div><p>Run the executable on the Raspberry Pi by providing the <code class="literal">coffee.png</code> image as an input to the executable.</p><div class="code_responsive"><pre class="programlisting">sudo ./raspi_fileRead_resnet.elf coffeemug.png
</pre></div><p>The executable starts classifying the object in the image file, then it predicts the object and displays its label and the probability associated with the object category.</p><div class="informalfigure"><div id="d126e121730" class="mediaobject"><p><img src="../../examples/raspberrypiio/win64/ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample_07.png" height="94" width="1200"></p></div></div><h3 class="title" id="ClassifyImageOnRaspberryPiViaSSHWithResNet50AndOpenCVExample-10">See Also</h3><div class="itemizedlist"><ul><li><p><a href="identify-objects-within-video-using-resNet-50-on-raspberry-pi-hardware.html" data-docid="mlsupportpkg#example-resnet50_webcam" class="a">Identify Objects Within Live Video Using ResNet-50 on Raspberry Pi Hardware</a></p></li><li><p><a href="get-inputs-to-a-matlab-function-over-ssh-in-raspberry-pi.html" data-docid="mlsupportpkg#example-simplesum_ssh" class="a">Send Inputs to MATLAB Function from Command Line of Raspberry Pi</a></p></li></ul></div></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
