<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Wireless Data Streaming Using BNO055 and Bluetooth and Estimating Orientation Using Sensor Fusion</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../arduinoio.html",
          "name": "Arduino Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../arduinoio-sensors.html",
          "name": "Sensors"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "arduinoio-sensors"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Wireless Data Streaming Using BNO055 and Bluetooth and Estimating Orientation Using Sensor Fusion",
          "description": "Get data from a Bosch BNO055 IMU sensor through HC-05 Bluetooth&#174; module and to use the 9-axis AHRS fusion algorithm on the sensor data to compute orientation of the device. The example creates a figure which gets updated as you move the device.",
          "thumbnailURL": "../../examples/arduinoio/win64/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample_01.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "arduinoio.WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample",
          "name": "WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample",
          "url": "wireless-data-streaming-using-bno055.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('arduinoio/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample.mlx",
        "HelperBox.m",
        "HelperOrientationViewer.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to get data from a Bosch BNO055 IMU sensor through HC-05 Bluetooth&#174; module and to use the 9-axis AHRS fusion algorithm on the sensor data to compute orientation of the device."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/arduinoio/win64/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample_01.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script>




<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Arduino Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio-sensors.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_a50129d8-52cc-41a2-a650-07e612c999b7"><span itemprop="title">Sensors</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Wireless Data Streaming Using BNO055 and Bluetooth and Estimating Orientation Using Sensor Fusion</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-1" class="nav-link intrnllnk">Required MathWorks Products</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-2" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-3" class="nav-link intrnllnk">Hardware Connection</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-4" class="nav-link intrnllnk">Setup and Configure Arduino for Bluetooth Communication</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-5" class="nav-link intrnllnk">Create Sensor Object</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-6" class="nav-link intrnllnk">Compensating for Hard Iron and Soft Iron Distortions</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-7" class="nav-link intrnllnk">Aligning the Axis of BNO055 Sensor with NED Coordinates</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-8" class="nav-link intrnllnk">Tuning Filter Parameters</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-9" class="nav-link intrnllnk">Accelerometer-Gyroscope-Magnetometer Fusion</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-10" class="nav-link intrnllnk">Clean Up</a></li><li class="nav-item"><a href="#WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-11" class="nav-link intrnllnk">Things to Try</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="mw_55262021-6cda-4b5d-a1a0-84eb6412eb60">Wireless Data Streaming Using BNO055 and Bluetooth and Estimating Orientation Using Sensor Fusion</h1><div class="examples_short_list hidden_ios_android" data-products="ML ML_ARDUINO TF NV"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('ML_ARDUINO')">MATLAB Support Package for Arduino Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('TF')">Sensor Fusion and Tracking Toolbox</a></li><li><a href="matlab:matlab.internal.addons.showAddon('NV')">Navigation Toolbox</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('arduinoio/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="arduinoio-WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample"><meta itemprop="exampletitle" content="Wireless Data Streaming Using BNO055 and Bluetooth and Estimating Orientation Using Sensor Fusion"></div><span id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample" class="anchor_target"></span><p class="shortdesc">This example shows how to get data from a Bosch BNO055 IMU sensor through HC-05 Bluetooth&#174; module and to use the 9-axis AHRS fusion algorithm on the sensor data to compute orientation of the device. The example creates a figure which gets updated as you move the device. </p><p>BNO055 is a 9-axis sensor with accelerometer, gyroscope, and magnetometer. Accelerometer measures acceleration, gyroscope measures angular velocity, and magnetometer measures magnetic field in <span class="emphasis"><em>x-</em></span>, <span class="emphasis"><em>y-</em></span> and <span class="emphasis"><em>z-</em></span>axes.</p><div class="procedure"><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-1">Required MathWorks Products</h3><div class="itemizedlist"><ul><li><p>MATLAB&#174;</p></li><li><p>MATLAB Support Package for Arduino&#174; Hardware</p></li><li><p>Sensor Fusion and Tracking Toolbox&#8482; or Navigation Toolbox&#8482;</p></li></ul></div><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-2">Required Hardware</h3><div class="itemizedlist"><ul><li><p>Arduino Uno</p></li><li><p>Bosch BNO055 Sensor</p></li><li><p>HC-05 Bluetooth Module</p></li></ul></div><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-3">Hardware Connection</h3><div class="informalfigure"><div id="d126e73634" class="mediaobject"><p><img src="../../examples/arduinoio/win64/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample_01.png" height="900" width="600"></p></div></div><p>Connect the SDA, SCL, GND, and the VCC pins of the BNO055 sensor to the corresponding pins on the Arduino Uno board with the connections:</p><div class="itemizedlist"><ul><li><p>SDA - A4</p></li><li><p>SCL - A5</p></li><li><p>VCC - +3.3V</p></li><li><p>GND - GND</p></li></ul></div><p>Connect the TX, RX, GND and VCC pins of the HC-05 module to the corresponding pins on the Arduino Uno board. This example uses the connections:</p><div class="itemizedlist"><ul><li><p>TX &#8211; Digital Pin 0 (RX) </p></li><li><p>RX &#8211; Digital Pin 1 (TX) </p></li><li><p>VCC &#8211; 5V </p></li><li><p>GND &#8211; GND </p></li></ul></div><p>Ensure that the connections to the sensors and Bluetooth&#174; module are intact. It is recommended to use a BNO055 shield for Arduino Uno (<a href="https://store-usa.arduino.cc/products/arduino-9-axis-motion-shield?selectedStore=us" target="_blank">Arduino 9 Axis Motion Shield</a>). See <a href="troubleshoot-sensors.html" data-docid="mlsupportpkg#mw_08b9ee29-ce8a-4ab0-b4c8-b11655b01471" class="a">Troubleshooting Sensors</a> to debug the sensor related issues.</p><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-4">Setup and Configure Arduino for Bluetooth Communication</h3><p>Configure the Arduino Uno board to communicate through Bluetooth using the <code class="literal">arduinosetup</code> command from MATLAB command prompt. See <a href="configure-setup-for-arduino-hardware.html#bvn8yxz-1" data-docid="mlsupportpkg#bvn8yxz-1" class="a">Connection over Bluetooth</a> for steps on how to configure the Arduino board for communication through Bluetooth. Make sure to check the box for I2C Libraries to be included during the Setup. </p><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-5">Create Sensor Object</h3><p>Create an <code class="literal">arduino</code> object.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>a = arduino(<span style="color:#A020F0">'btspp://001908361009'</span>);</pre></div></div></div><p>Create the <code class="literal">bno055</code> sensor object in the <code class="literal">OperatingMode</code> <code class="literal">'amg'</code>.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre> fs = 100; <span style="color:#228B22">% Sample Rate in Hz&nbsp;</span>
imu = bno055(a,<span style="color:#A020F0">'SampleRate'</span>,fs,<span style="color:#A020F0">'OutputFormat'</span>,<span style="color:#A020F0">'matrix'</span>,<span style="color:#A020F0">'OperatingMode'</span>,<span style="color:#A020F0">'amg'</span>); </pre></div></div></div><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-6">Compensating for Hard Iron and Soft Iron Distortions</h3><p>Fusion algorithms use magnetometer readings which need to be compensated for magnetic distortions such as hard iron distortion. Hard iron distortions are produced by materials which create a magnetic field, resulting in shifting the origin on the response surface. These distortions can be corrected by subtracting the correction values from the magnetometer readings for each axis. In order to find the correction values,</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Rotate the sensor from 0 to 360 degree along each axis. </p></li><li><p>Use the <a href="../../fusion/ref/magcal.html" data-docid="fusion_ref#function_magcal" class="a"><code class="olink">magcal</code></a><span role="cross_prod"> (Sensor Fusion and Tracking Toolbox)</span> function to obtain the correction coefficients. </p></li></ol></div><p>These correction values change with the surroundings. </p><p>To obtain correction coefficients for both hard iron and soft iron distortions: </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>ts = tic; 
stopTimer = 50; 
magReadings=[]; 
<span style="color:#0000FF">while</span>(toc(ts) &lt; stopTimer) 
    <span style="color:#228B22">% Rotate the sensor along x axis from 0 to 360 degree. </span>
    <span style="color:#228B22">% Take 2-3 rotations to improve accuracy. </span>
    <span style="color:#228B22">% For other axes, rotate along that axes. </span>
   [accel,gyro,mag] = read(imu); 
   magReadings = [magReadings;mag]; 
<span style="color:#0000FF">end</span> 

[A, b] = magcal(magReadings); <span style="color:#228B22">% A = 3x3 matrix for soft iron correction </span>
                              <span style="color:#228B22">% b = 3x1 vector for hard iron correction </span></pre></div></div></div><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-7">Aligning the Axis of BNO055 Sensor with NED Coordinates</h3><p>Sensor Fusion algorithms used in this example use North-East-Down(NED) as a fixed, parent coordinate system. In the NED reference frame, the <span class="emphasis"><em>x-</em></span>axis points north, the <span class="emphasis"><em>y-</em></span>axis points east, and the <span class="emphasis"><em>z-</em></span>axis points down. Depending on the algorithm, north may either be the magnetic north or true north. The algorithms in this example use the magnetic north. The algorithms used here expect all the sensors in the object to have their axes aligned with NED convention. The sensor values have to be inverted so that they are in accordance with the NED coordinates. </p><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-8">Tuning Filter Parameters</h3><p>The algorithms used in this example, when properly tuned, enable estimation of orientation and are robust against environmental noise sources. You must consider the situations in which the sensors are used and tune the filters accordingly. See <a href="../../fusion/ug/estimate-orientation-through-inertial-sensor-fusion.html" data-docid="fusion_ug#mw_eb1c387f-b5bd-4727-8372-9e6bcdc82e26" class="a">Estimate Orientation Through Inertial Sensor Fusion</a><span role="cross_prod"> (Sensor Fusion and Tracking Toolbox)</span> for more details related to tuning filter parameters. </p><p>The example uses <a href="../../fusion/ref/ahrsfilter-system-object.html" data-docid="fusion_ref#mw_7a7bef63-30df-49d1-bb2f-973b3a8ac8b5" class="a"><code class="olink">ahrsfilter</code></a><span role="cross_prod"> (Sensor Fusion and Tracking Toolbox)</span> to demonstrate orientation estimation. See <a href="../../fusion/gs/determine-orientation-through-sensor-fusion.html" data-docid="fusion_gs#mw_86c431c2-c2d1-49f8-a6b5-0022bc210a97" class="a">Determine Orientation Using Inertial Sensors</a><span role="cross_prod"> (Sensor Fusion and Tracking Toolbox)</span> for more details related to inertial fusion algorithms. </p><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-9">Accelerometer-Gyroscope-Magnetometer Fusion</h3><p>An attitude and heading reference system (AHRS) consists of a 9-axis system that uses an accelerometer, gyroscope, and magnetometer to compute the orientation of the device. The <code class="literal">ahrsfilter</code> produces a smoothly changing estimate of orientation of the device, while correctly estimating the north direction. The <code class="literal">ahrsfilter</code> has the ability to remove gyroscope bias and can also detect and reject mild magnetic jamming.</p><p>The following code snippets use <code class="literal">ahrsfilter</code> system object to determine the orientation of the sensor and create a figure that gets updated as you move the sensor. The initial position of the sensor should be such that the device <span class="emphasis"><em>x-</em></span>axis is pointing towards magnetic north, the device <span class="emphasis"><em>y-</em></span>axis is pointing to east and the device <span class="emphasis"><em>z-</em></span>axis is pointing downwards. You could use a cellphone or compass to determine magnetic north.  </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#228B22">% GyroscopeNoise, AccelerometerNoise and MagnetometerNoise are determined from the BNO055 datasheet using the following formula </span>
<span style="color:#228B22">% NoisePower = OutputNoisePowerDensityrms^2 * Bandwidth </span>

GyroscopeNoiseBNO055 = 3.05e-06; <span style="color:#228B22">% GyroscopeNoise (variance value) in units of (rad/s)^2 </span>
AccelerometerNoiseBNO055 = 67.53e-06; <span style="color:#228B22">% AccelerometerNoise (variance value)in units of (m/s^2)^2 </span>
MagnetometerNoiseBNO055 = 1; <span style="color:#228B22">%MagnetometerNoise (variance value) in units of uT^2 </span>

viewer = HelperOrientationViewer(<span style="color:#A020F0">'Title'</span>,{<span style="color:#A020F0">'AHRS Filter'</span>}); 

FUSE = ahrsfilter(<span style="color:#A020F0">'SampleRate'</span>,imu.SampleRate,<span style="color:#A020F0">'GyroscopeNoise'</span>,GyroscopeNoiseBNO055,<span style="color:#A020F0">'AccelerometerNoise'</span>,AccelerometerNoiseBNO055,<span style="color:#A020F0">'MagnetometerNoise'</span>,MagnetometerNoiseBNO055); 

stopTimer=10; </pre></div></div></div><p>After executing the below code snippet, slowly move the sensor and check if the motion in the figure matches the motion of the sensor. Increase the <code class="literal">stopTimer</code> value, if you need to track the orientation for longer time. </p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>magx_correction = b(1); 
magy_correction = b(2); 
magz_correction = b(3); 
 
ts = tic; 
<span style="color:#0000FF">while</span>(toc(ts) &lt; stopTimer) 
    [accel,gyro,mag] = read(imu); 
    <span style="color:#228B22">% Align coordinates in accordance with NED convention </span>
    accel = [-accel(:,1), accel(:,2), accel(:,3)]; 
    gyro = [gyro(:,1), -gyro(:,2), -gyro(:,3)]; 
    mag = [(mag(:,1)-magx_correction), -(mag(:,2)- magy_correction), -(mag(:,3)-magz_correction)] * A; 
    rotators = FUSE(accel,gyro,mag); 
    <span style="color:#0000FF">for</span> j = numel(rotators) 
      viewer(rotators(j)); 
    <span style="color:#0000FF">end</span> 
<span style="color:#0000FF">end</span></pre></div></div></div><p>If the sensor is stationary, at the initial position where the device <span class="emphasis"><em>x-</em></span>axis points to the magnetic north, the device <span class="emphasis"><em>y-</em></span>axis points to the east and the device <span class="emphasis"><em>z-</em></span>axis points downwards, the <span class="emphasis"><em>x-</em></span>axis in the figure will be parallel to and aligned with the positive <span class="emphasis"><em>x</em></span>-axis, the<span class="emphasis"><em> y-</em></span>axis in the figure will be parallel to and aligned with the positive <span class="emphasis"><em>y</em></span>-axis and the <span class="emphasis"><em>z-</em></span>axis in the figure will be parallel to and aligned with the positive <span class="emphasis"><em>z</em></span>-axis. </p><p><span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/arduinoio/win64/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample_02.png" height="620" width="1200"></span></span><span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/arduinoio/win64/WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample_03.png" height="620" width="1200"></span></span></p><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-10">Clean Up</h3><p>When the connection is no longer needed, release and clear all the objects.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>release(imu);
delete(imu);
clear;</pre></div></div></div><h3 class="title" id="WirelessDataStreamingUsingBNO055AndBTArduinoNavSFTExample-11">Things to Try</h3><p>You can try this example with other sensors such as InvenSense MPU-6050, MPU-9250, and STMicroelectronics LSM9DS1. </p></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright">Â© 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
