<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta xmlns="http://www.w3.org/1999/xhtml" charset="utf-8">
<meta xmlns="http://www.w3.org/1999/xhtml" name="viewport" content="width=device-width, initial-scale=1.0">
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="X-UA-Compatible" content="IE=edge">
<title>Perform Predictive Maintenance on Rotating Device Using ESP32 Board, ThingSpeak, and Machine Learning</title>
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
      {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement":
      [{
          "@type": "ListItem",
          "position": 1,

          "item": {
          "@id": "../index.html",
          "name": "MATLAB"
}

          } 
        ,
        {
          "@type": "ListItem",
          "position": 2,

          "item": {
          "@id": "../data-import-and-analysis.html",
          "name": "Data Import and Analysis"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 3,

          "item": {
          "@id": "../data-import-and-export.html",
          "name": "Data Import and Export"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 4,

          "item": {
          "@id": "../hardware-network-comm.html",
          "name": "Hardware and Network Communication"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 5,

          "item": {
          "@id": "../hardware-boards-and-kits.html",
          "name": "Hardware Boards and Kits"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 6,

          "item": {
          "@id": "../arduinoio.html",
          "name": "Arduino Hardware"
}

          }
        ,
        {
          "@type": "ListItem",
          "position": 7,

          "item": {
          "@id": "../arduinoio-sensors.html",
          "name": "Sensors"
}

          }]
      }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "VisibleBreadcrumbs",

        "itemListElement":
        [
        "arduinoio-sensors"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "DigitalDocument",
          "headline": "Perform Predictive Maintenance on Rotating Device Using ESP32 Board, ThingSpeak, and Machine Learning",
          "description": "Predict and monitor the health of a rotating device using machine learning algorithm. You can use this example for predictive maintenance of any rotating device or piece of equipment so that you can fix them before they fail.",
          "thumbnailURL": "../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_11.png",
          "genre": "Live Script",
          "isBasedOn": {
          "@type": "Product",
          "name": "MATLAB"

        },
          "identifier": "arduinoio.PredictiveMaintenanceRotatingDeviceThingSpeakMLExample",
          "name": "PredictiveMaintenanceRotatingDeviceThingSpeakMLExample",
          "url": "predictive-maintenance-rotating-device-esp32-ML-example.html"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "PropertyValue",
          "name": "open_command",
          "value": "matlab:openExample('arduinoio/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample')"

        }</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "ItemList",
          "name": "ExampleSourceFiles",

        "itemListElement":
        [
        "PredictiveMaintenanceRotatingDeviceThingSpeakMLExample.mlx",
        "AbnormalityAlert.m",
        "Block_raw_data.mat",
        "Normal_raw_data.mat",
        "RotorImbalance_raw_data.mat",
        "Stop_raw_data.mat",
        "collectModeData.m",
        "extractModeFeatures.m",
        "modeTrainedModel.mat",
        "predictMode.m",
        "spectralPowerFeatures.m"
        ],
        "itemListOrder": "http://schema.org/ItemListOrderAscending"
        }
        </script><link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">

<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="This example shows how to predict and monitor the health of a rotating device using machine learning algorithm."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_11.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-3.6.0.min.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery-migrate.min.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_lg.css" rel="stylesheet" media="screen and (min-width: 1200px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_md.css" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm+xs.css" rel="stylesheet" media="screen and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_sm.css" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_xs.css" rel="stylesheet" media="screen and (max-width: 767px)">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/shared/highlight/styles/mwdochighlight.min.css" rel="stylesheet" type="text/css">

<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/l10n.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/f1help.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/docscripts.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/mw.imageanimation.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/jquery.highlight.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/underscore-min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/use_platform_screenshots.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/suggest.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/overload.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/helpservices.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/productfilter.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/matlab_dialog_shared.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/highlight/highlight.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/localstorage.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/product_group.js"></script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/saxonjs/SaxonJS2.rt.js"></script><script xmlns="http://www.w3.org/1999/xhtml">
            window.history.replaceState(window.location.href, null, ""); // Initialize
            window.onload = function() {    
            mystylesheetLocation = "../../includes/shared/scripts/product_group-sef.json";
            mysourceLocation = "../../docset/docset.xml";
            product_help_location = "matlab";
            pagetype = "section";
            doccentertype = "product";
            langcode = "";
            getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);  
            }
          </script><script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/scripts/livecontrolpopover.js"></script>





<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/bootstrap.bundle.min.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/product/scripts/global.js"></script>
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_base.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link xmlns="http://www.w3.org/1999/xhtml" href="../../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script xmlns="http://www.w3.org/1999/xhtml" src="../../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div xmlns="http://www.w3.org/1999/xhtml" id="doc_header_spacer" class="header"></div>
<div xmlns="http://www.w3.org/1999/xhtml" class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../../documentation-center.html">Help Center</a></h1></div></div></div><div class="col-12 col-sm-6 col-md-5" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2025b" data-language="en" action="../../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="visually-hidden form-label">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"> <div><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search float-end icon_32 d-sm-none" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="d-sm-none" id="search_actuator"><button class="btn icon-search btn_search float-end icon_16" data-bs-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div></div></div><div class="row-offcanvas row-offcanvas-left">
<div xmlns="http://www.w3.org/1999/xhtml" class="sidebar-offcanvas" id="sidebar">
<nav class="offcanvas_nav" role="navigation">
<div class="offcanvas_actuator" data-bs-toggle="offcanvas" data-bs-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="visually-hidden">Off-Canvas Navigation Menu Toggle
                  Off-Canvas Navigation Menu Toggle</span><span class="icon-menu"></span></button><span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span></div><div class="nav_list_wrapper" id="nav_list_wrapper"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../documentation-center.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul>
<ul class="nav_disambiguation"><li><a href="../index.html?s_tid=CRUX_lftnav" id="index">MATLAB</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-analysis.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Analysis</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../data-import-and-export.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Data Import and Export</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-network-comm.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware and Network Communication</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../hardware-boards-and-kits.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Hardware Boards and Kits</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Arduino Hardware</span></a></li><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../arduinoio-sensors.html?s_tid=CRUX_lftnav" itemprop="url" id="mw_a50129d8-52cc-41a2-a650-07e612c999b7"><span itemprop="title">Sensors</span></a></li></ul><div class="search_refine_v4"><div id="facets_area"><ul class="nav_scrollspy nav list-unstyled" id="pnav">
<li class="nav_scrollspy_function nav-item"><a href="#responsive_offcanvas">Perform Predictive Maintenance on Rotating Device Using ESP32 Board, ThingSpeak, and Machine Learning</a></li>
<li class="nav_scrollspy_title nav-item" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-1" class="nav-link intrnllnk">Required Hardware</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-2" class="nav-link intrnllnk">Hardware Setup</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-3" class="nav-link intrnllnk">Prepare Data Set for Training Deep Learning Algorithm</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-7" class="nav-link intrnllnk">Create ThingSpeak Channel and Add Widgets to monitor the state of the device</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-8" class="nav-link intrnllnk">Identify API Keys in ThingSpeak</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-9" class="nav-link intrnllnk">Predict and Write Data to ThingSpeak</a></li><li class="nav-item"><a href="#PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-10" class="nav-link intrnllnk">Set Up Email Alert</a></li></ul></div></div>
</nav></div></nav>
<script src="../../includes/product/scripts/offcanvas_v2.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="offcanvas_content_container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sticky_header_container"><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-sm-12 d-none d-sm-block"><nav class="navbar navbar-default" role="navigation" id="subnav"><div><ul class="nav navbar-nav crux_browse"><li id="crux_nav_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_example" class="crux_resource"><a href="../examples.html?category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></nav></div><div class="d-sm-none"><div class="container-fluid"><div class="row"><div class="col-9"><div class="mobile_crux_nav_trigger"><div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button><ul class="dropdown-menu"><li id="crux_nav_mobile_documentation" class="crux_resource active">Documentation</li><li id="crux_nav_mobile_example" class="crux_resource"><a href="../examples.html?category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Examples</a></li><li id="crux_nav_mobile_function" class="crux_resource"><a href="../referencelist.html?type=function&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Functions</a></li><li id="crux_nav_mobile_app" class="crux_resource"><a href="../referencelist.html?type=app&amp;category=arduinoio-sensors&amp;s_tid=CRUX_topnav">Apps</a></li></ul></div></div></div><div class="col-3"><div class="translate_placeholder"></div></div></div></div></div></div></div></div></div></div></div><div class="content_container" id="content_container" itemprop="content">
<div class="container-fluid">
<div class="row">
<div class="col-12">

<main id="skip_link_anchor" tabindex="-1">
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" lang="en" data-language="en"><div id="pgtype-topic">
<section><h1 class="r2025b" itemprop="title content" id="mw_93469410-64af-4cc5-97e3-cd778c193556">Perform Predictive Maintenance on Rotating Device Using ESP32 Board, ThingSpeak, and Machine Learning</h1><div class="examples_short_list hidden_ios_android" data-products="ML ML_ARDUINO DS ST TSP"><div data-pane="metadata" class="card metadata_container"><div class="card-body metadata_content"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a href="matlab:matlab.internal.addons.showAddon('ML_ARDUINO')">MATLAB Support Package for Arduino Hardware</a></li><li><a href="matlab:matlab.internal.addons.showAddon('DS')">DSP System Toolbox</a></li><li><a href="matlab:matlab.internal.addons.showAddon('ST')">Statistics and Machine Learning Toolbox</a></li><li><a href="matlab:matlab.internal.addons.showAddon('TSP')">ThingSpeak</a></li></ul><div class="d-grid"><a class="btn btn_color_blue" href="matlab:openExample('arduinoio/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample')" data-ex-genre="Live Script">Open Live Script</a></div></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="arduinoio-PredictiveMaintenanceRotatingDeviceThingSpeakMLExample"><meta itemprop="exampletitle" content="Perform Predictive Maintenance on Rotating Device Using ESP32 Board, ThingSpeak, and Machine Learning"></div><span id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample" class="anchor_target"></span><p class="shortdesc">This example shows how to predict and monitor the health of a rotating device using machine learning algorithm. You can use this example for predictive maintenance of any rotating device or piece of equipment so that you can fix them before they fail.</p><p>In this example, the operational state of the rotating device is divided into four operational modes of Stop, Block, Normal, and Rotor Imbalanced. This example uses a ESP32 board with <a href="raspberrypiio.lsm9ds1.html" data-docid="mlsupportpkg#mw_dcb23e4d-75d4-465e-8b7d-e8c6caae9fb4" class="a"><code class="olink">lsm9ds1</code></a> sensor to detect the vibrations along the <span class="emphasis"><em>X</em></span>-, <span class="emphasis"><em>Y</em></span>-, and <span class="emphasis"><em>Z</em></span>- directions. These vibration signals are then fed into a pre-trained machine learning model to classify into different defined operational modes.</p><p>This example also shows how to use the ThingSpeak&#8482; platform to view the operational mode of the rotating and trigger an email alert whenever there is abnormality in the motion of the rotating device. To access all the files for this example, click <strong class="emphasis bold">Open Live Script</strong> and download the attached files.</p><div class="procedure"><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-1">Required Hardware</h3><div class="itemizedlist"><ul><li><p>ESP32 board</p></li><li><p>LSM9DS1 IMU sensor</p></li><li><p>Any device that contains moving parts. This example uses a rotating fan.</p></li><li><p>Connecting Wires</p></li><li><p>Any object for blocking the normal operational mode of a device. This example uses cardboard.</p></li><li><p>Adhesive or sticking tape</p></li></ul></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-2">Hardware Setup</h3><div class="itemizedlist"><ul><li><p>Configure ESP32 hardware for USB based workflow. For more information, see <a href="configure-setup-for-arduino-hardware.html#bvn8wpb-1" data-docid="mlsupportpkg#bvn8wpb-1" class="a">Connection over Wi-Fi</a>.</p></li><li><p>Connect SCL and SDA of ESP32 to SCL and SDA of LSM9DS1 IMU.</p></li><li><p>Connect the ground and 3.3V pin of ESP32 to ground and VDD of LSM9DS1 IMU.</p></li><li><p>Place the entire hardware setup in a secure location on the rotating device. Use an adhesive or a piece of tape to secure the hardware board on the top of the device. Ensure that no connecting wires create an obstacle while the device vibrates.</p></li></ul></div><div class="informalfigure"><div id="d126e71408" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_01.png" alt="Figure shows the hardware setup" height="313" width="236"></p></div></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-3">Prepare Data Set for Training Deep Learning Algorithm</h3><p>The IMU sensor capture the acceleration data of rotating device. Follow these steps to capture and train acceleration data for any rotating device using an IMU sensor</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>Data Acquisition Using Accelerometer</p></li><li><p>Feature Extraction</p></li><li><p>Develop Predictive Model to Classify Data</p></li></ol></div><h4 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-4">Data Acquisition Using Accelerometer</h4><p>You can either use <code class="literal">Stop_raw_data.mat</code>, <code class="literal">Block_raw_data.mat</code>, <code class="literal">Normal_raw_data.mat</code>, <code class="literal">and</code> <code class="literal">RotorImbalance_raw_data.mat</code> dataset corresponding to the <span class="emphasis"><em>Stop, Normal, Block and Rotor imbalanc</em></span>e or capture the data manually.</p><p>To use the dataset, click <strong class="emphasis bold">Open Live Script</strong> and download <code class="literal">Stop_raw_data.mat</code>,<code class="literal"> Block_raw_data.mat</code>,<code class="literal"> Normal_raw_data.mat</code>, and <code class="literal">Rotor Imbalance_raw_data.m</code> files.</p><p>To capture the data manually, place the setup in the secure location on the rotating device. Select <code class="literal">iscollectData</code> check box and start capturing the data.</p><p>The dataset in this example contains 3000 samples, as defined by the variable <code class="literal">noOfSamples</code>, for each of the four modes. Once the prompt '<span class="emphasis"><em><code class="literal">*** Collecting data for mode = ' Stop ' ***</code></em></span>'' appears on your screen, start capturing data for the Stop mode. Continue capturing the data related to Stop<span class="emphasis"><em> </em></span>mode until the prompts for Block, Normal, and Rotor Imbalanced mode appear. MATLAB stores the data related to the four modes in the <code class="literal">Stop_raw_data.mat</code>, <code class="literal">Normal_raw_data.mat</code>, <code class="literal">Block_raw_data.mat</code>, <code class="literal">and</code> <code class="literal">RotorImbalance_raw_data.mat </code>files.</p><p>For capturing data in the Stop mode, ensure that the device is in the power OFF state. Similarly, for capturing data in the Normal mode, power ON the device. Use a piece of cardboard or any other object to block any moving part of the device while in the ON state. For the Rotor Imbalanced mode, you can move or shake the whole setup of the device.</p><p>These images and gif shows the four operational modes of Stop, Normal, Block, and Rotor Imbalanced.</p><p><span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_02.png" alt="Figure shows the stop mode." height="264" width="250"></span></span>  </p><div class="informalfigure"><div id="d126e71486" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_03.png" alt="Figure shows the normal mode." height="280" width="250"></p></div></div><p><span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_04.png" alt="Figure shows the block mode." height="287" width="248"></span></span>          </p><p>                                </p><p><span class="guiicon"><span class="inlinemediaobject"><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_05.gif" alt="Figure shows the Rotor Imbalanced mode." height="260" width="344"></span></span><strong class="emphasis bold"> </strong></p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#228B22">% Check this if you want to manually collect the data</span>
collectData = <span class="live_control_container"><img tabindex="-1" alt="" src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_25.png"><span data-examplename="openExample('arduinoio/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample')" tabindex="0" data-controlvalue="false" data-bs-trigger="focus" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-html="true" class="popover_trigger add_cursor_pointer live_control_equivalent_value">false</span></span>;

<span style="color:#228B22">% Create Mode list</span>
modeList = {<span style="color:#A020F0">'Stop'</span> , <span style="color:#A020F0">'Normal'</span>, <span style="color:#A020F0">'Block'</span>,<span style="color:#A020F0">'RotorImbalance'</span>};

<span style="color:#228B22">% Collect data for all modes</span>
noOfSamples = 30000;
<span style="color:#0000FF">if</span> collectData
    <span style="color:#0000FF">for</span> idx = 1:length(modeList)
        collectModeData(modeList{idx},noOfSamples);
    <span style="color:#0000FF">end</span>
<span style="color:#0000FF">end</span></pre></div></div></div><h4 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-5"><strong class="emphasis bold">Feature Extraction</strong></h4><p>Select <code class="literal">samplesPerObservation</code> based on the granularity you desire in extracted features. For this example, set samples per observation to 50<code class="literal">.</code></p><p>The <code class="literal">extractModeFeatures</code> function is used to extract features from the data acquired using the accelerometer on the LSM9DS1 IMU sensor. The extracted features are stored in the variable <code class="literal">features</code>. To use the <code class="literal">extractModeFeatures</code> function, click <strong class="emphasis bold">Open Live Script</strong> and download the <code class="literal">extractModeFeatures.m</code> file. </p><p>The <code class="literal">modeIDList </code>contains the IDs corresponding to the operational modes of the rotating device, where ID <code class="literal">1</code> corresponds to Stop, ID 2 to Normal, ID 3 to Block, and ID 4 corresponds to Rotor Imbalance.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#228B22">% Initialize the buffer size</span>
samplesPerObservation = 50;
features =[];
modeIDList =[];
<span style="color:#228B22">% Extract features</span>
<span style="color:#0000FF">for</span> idx = 1: length(modeList)
    data = load([modeList{idx} <span style="color:#A020F0">'_raw_data.mat'</span>],<span style="color:#A020F0">'data'</span>);
    data = data.data;
    data = data.(<span style="color:#A020F0">"Acceleration"</span>);

    <span style="color:#228B22">% Calculate the number of groups</span>
    numOfObservations = floor(size(data,1)/samplesPerObservation);
    <span style="color:#0000FF">for</span> i = 1:numOfObservations
        idx1 = (i-1)*samplesPerObservation +1;
        idx2 = i*samplesPerObservation;
        features = [features; extractModeFeatures(data(idx1:idx2,1),data(idx1:idx2,2),data(idx1:idx2,3))];
    <span style="color:#0000FF">end</span>

    modeIDList = [modeIDList;ones(numOfObservations,1)*idx];
<span style="color:#0000FF">end</span></pre></div></div></div><h4 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-6"><strong class="emphasis bold">Develop Predictive Model to Classify Data</strong></h4><p>Use the <a href="../../stats/classificationlearner-app.html" data-docid="stats_ug#buggk6h" class="a">Classification Learner</a><span role="cross_prod"> (Statistics and Machine Learning Toolbox)</span> app to train a classification model. To open the Classification Learner app, type <code class="literal">classificationLearner</code> at the MATLAB command line.</p><p>Alternatively, in the <strong class="emphasis bold">Apps</strong> tab click the arrow on the right on the <strong class="emphasis bold">Apps</strong> tab to open the gallery. Then, under <strong class="emphasis bold">Machine Learning and Deep Learning</strong>, click <strong class="emphasis bold">Classification Learner</strong>.</p><div class="informalfigure"><div id="d126e71569" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_06.png" alt="Figure shows the Apps tab." height="244" width="644"></p></div></div><p>In the app, click the <strong class="emphasis bold">New Session</strong> button, and then click <strong class="emphasis bold">From Workspace</strong>.</p><div class="informalfigure"><div id="d126e71582" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_07.png" alt="Figure shows the new session button." height="259" width="517"></p></div></div><p>In the <strong class="emphasis bold">Data set</strong> pane, click the arrow under <strong class="emphasis bold">Data Set Variable</strong>, and then select <code class="literal">features</code>. Select <strong class="emphasis bold">From Workspace </strong>under <strong class="emphasis bold">Response</strong> and select <code class="literal">modeIDList.</code></p><p>In the <strong class="emphasis bold">Validation</strong> pane, under <strong class="emphasis bold">Validation Scheme</strong>, select <strong class="emphasis bold">Holdout Validation</strong>. Select percentage of data to be used as a validation set. </p><p>The app trains a model on the training set and assesses its performance with the validation set. The model used for validation is based on only a portion of the data, so <strong class="emphasis bold">Holdout Validation</strong> is recommended only for large data sets. The final model is trained with the full data set. In this example, <strong class="emphasis bold">Percent held out</strong> is set to <code class="literal">30</code>. This value indicates that 70% of the data is used for training the machine learning algorithm.</p><p>Click <strong class="emphasis bold">Start Session</strong>.</p><div class="informalfigure"><div id="d126e71631" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_08.png" alt="Figure shows a new session." height="587" width="754"></p></div></div><p>Classification Learner app loads the data set and plots a scatter plot of the first two features. The X and Y fields of Predictors can be changed to different values to see the correlation between different features.</p><div class="informalfigure"><div id="d126e71638" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_09.png" alt="Figure shows the Classification Learner App." height="635" width="922"></p></div></div><p>On the app toolstrip, in the <strong class="emphasis bold">Train</strong> section, click <strong class="emphasis bold">Train All</strong> and select <strong class="emphasis bold">Train Selected</strong>. When the training is complete, the <strong class="emphasis bold">Models</strong> pane displays the accuracy of the validation scheme. For this example the accuracy is 97.2%<code class="literal">.</code></p><div class="informalfigure"><div id="d126e71658" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_10.png" alt="Figure shows the accuracy of the model." height="152" width="453"></p></div></div><p>To see the Validation Confusion Matrix, in the <strong class="emphasis bold">Plots and Results </strong>section of the app toolstrip, click <strong class="emphasis bold">Confusion Matrix (Validation).</strong></p><div class="informalfigure"><div id="d126e71670" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_11.png" alt="Figure shows the Validation Confusion Matrix." height="521" width="541"></p></div></div><p>To export the model, on the app toolstrip, in the <strong class="emphasis bold">Export</strong> section click <strong class="emphasis bold">Export Model.</strong></p><div class="informalfigure"><div id="d126e71682" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_12.png" alt="Figure shows how to select export model." height="135" width="285"></p></div></div><p>In the Export Classification Model dialog box, clear the check box to exclude the training data and export a compact model, and then click<strong class="emphasis bold"> OK</strong>.</p><div class="informalfigure"><div id="d126e71692" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_13.png" alt="Figure shows the Export Classification Model dialog box." height="285" width="604"></p></div></div><p>The structure <code class="literal">trainedModel</code> appears in the MATLAB workspace. Save the model using the following command.</p><div class="code_responsive"><pre id="d126e71701" class="programlisting">save(<span style="color:#A020F0">'modeTrainedModel.mat'</span>,<span style="color:#A020F0">'trainedModel'</span>);
</pre></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-7"><strong class="emphasis bold">Create ThingSpeak Channel and Add Widgets to monitor the state of the device</strong></h3><p>ThingSpeak is an IoT analytics platform service that you can use to aggregate, visualize, and analyze live data streams in the cloud. For more information, see <a href="https://www.mathworks.com/help/thingspeak/getting-started-with-thingspeak.html" data-docid="thingspeak_doccenter#bu36ili" class="a">Get Started with ThingSpeak</a><span role="cross_prod"> (ThingSpeak)</span>.</p><p>To monitor the device using ThingSpeak&#8482;, sign in using your MathWorks&#174; Account credentials, or create a new account. Create a new channel in ThingSpeak to collect and analyze the data from the device. To create a new channel in ThingSpeak, on the <strong class="emphasis bold">Channels</strong> tab, click <code class="literal">My Channels</code>. In the <code class="literal">My Channels</code> window, click <strong class="emphasis bold">New Channel</strong> and enter these values to customize the channel.</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><strong class="emphasis bold">Name:</strong> Machine Monitoring</p></li><li><p><strong class="emphasis bold">Field 1: </strong>Mode</p></li><li><p><strong class="emphasis bold">Field 2: </strong>Acceleration Along X-axis</p></li><li><p><strong class="emphasis bold">Field 3: </strong>Acceleration Along Y-axis</p></li><li><p><strong class="emphasis bold">Field 4: </strong>Acceleration Along Z-axis</p></li><li><p><strong class="emphasis bold">Field 5: </strong>Abnormality</p></li></ol></div><p>ThingSpeak uses the<strong class="emphasis bold"> Field 5 </strong> to track if any abnormality is detected that is when the machine is running in Block Mode or RotorImbalanced Mode.</p><div class="informalfigure"><div id="d126e71760" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_14.png" alt="Figure shows the ThingSpeak channel." height="608" width="997"></p></div></div><p>Click <strong class="emphasis bold">Save Channel</strong> to save the channel settings. In the Channels window, click <strong class="emphasis bold">Add Visualizations</strong> to add graphs for monitoring the mode, acceleration along <span class="emphasis"><em>X</em></span>-, <span class="emphasis"><em>Y</em></span>-, and <span class="emphasis"><em>Z</em></span>- axes. Click <strong class="emphasis bold">Add Widgets </strong>to add the Lamp Indicator for detecting any abnormality.</p><div class="informalfigure"><div id="d126e71783" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_15.png" alt="Figure shows the Machine Monitoring channel." height="1126" width="962"></p></div></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-8"><strong class="emphasis bold">Identify API Keys in ThingSpeak</strong></h3><p>Identify the API keys of the ThingSpeak channel to read data from and write data to your channel.</p><p>To identify the API keys, on the <strong class="emphasis bold">Channels</strong> tab, click <strong class="emphasis bold">API Keys</strong>.</p><div class="informalfigure"><div id="d126e71801" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_16.png" alt="Figure shows how to get the API keys." height="749" width="1026"></p></div></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-9">Predict and Write Data to ThingSpeak</h3><p>Run this MATLAB code to predict the mode of operation of the rotating device and publish the data on the ThingSpeak channel. In this MATLAB code, the machine is being monitored for 180 seconds. You can set an infinite while loop to continuously monitor the rotation device.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre><span style="color:#228B22">% Create an arduino object for ESP32 board over WiFi</span>
aObj = arduino;

<span style="color:#228B22">% Create IMU sensor object</span>
imuObj = lsm9ds1(aObj,<span style="color:#A020F0">"SamplesPerRead"</span>,50);

<span style="color:#228B22">% ThingSpeak Configuration</span>

<span style="color:#228B22">% channel id </span>
channelId = 2392616;

<span style="color:#228B22">% Write key </span>
writeKey = <span style="color:#A020F0">'9V0CRQ5MLJTWM3J0'</span>;


<span style="color:#228B22">% Predict the mode</span>
tic;
<span style="color:#0000FF">while</span>(toc&lt;60)
    
    <span style="color:#228B22">% Read the sensor values and extract the features</span>
    accelerationValues = read(imuObj);
    accelerationValues = accelerationValues.(<span style="color:#A020F0">"Acceleration"</span>);
    [features,featuresX,featuresY,featuresZ]  = extractModeFeatures(accelerationValues(:,1),accelerationValues(:,2),accelerationValues(:,3));

    <span style="color:#228B22">% Predict mode</span>
    abnormality = 0;
    y = predictMode(features);

    disp([<span style="color:#A020F0">'Detected Mode = '</span> modeList{y}]);
    <span style="color:#0000FF">if</span>(y==3 || y==4)
        abnormality = 1;
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Publishing data to the ThingSpeak</span>
    thingSpeakWrite(channelId,[y,featuresX,featuresY,featuresZ,abnormality],<span style="color:#A020F0">'WriteKey'</span>,<span style="color:#A020F0">'9V0CRQ5MLJTWM3J0'</span>,<span style="color:#A020F0">'Fields'</span>,[1,2,3,4,5]);
    pause(0.5);

<span style="color:#0000FF">end</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Block
Detected Mode = Block
Detected Mode = Block
Detected Mode = Block
Detected Mode = Stop
Detected Mode = Block
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Normal
Detected Mode = Block
Detected Mode = Stop
Detected Mode = Block
Detected Mode = Block
Detected Mode = Stop
Detected Mode = Block
Detected Mode = Block
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
Detected Mode = Stop
</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre></pre></div></div></div><p>This image shows the channel dashboard after running the rotating device in different modes and executing the above code.</p><div class="informalfigure"><div id="d126e71815" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_17.png" alt="Figure shows the channel dashboard." height="976" width="808"></p></div></div><h3 class="title" id="PredictiveMaintenanceRotatingDeviceThingSpeakMLExample-10">Set Up Email Alert</h3><p>Configure ThingSpeak to alert you via email if abnormality is detected. ThingSpeak sends the email to the email address associated with your ThingSpeak account.</p><p>To set up the email alert, on the <strong class="emphasis bold">Apps</strong> tab on the ThingSpeak toolstrip, click <code class="literal">MATLAB Analysis</code>.</p><div class="informalfigure"><div id="d126e71830" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_18.png" alt="Figure shows how to set up the email alert, on the Apps tab on the ThingSpeak toolstrip by clicking MATLAB Analysis." height="347" width="1175"></p></div></div><p>Click <strong class="emphasis bold">New</strong> to select a code template.</p><div class="informalfigure"><div id="d126e71840" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_19.png" alt="Figure shows the MATLAB Analysis tab." height="207" width="643"></p></div></div><p>Select the <code class="literal">Custom (no starter code)</code> option and then click <strong class="emphasis bold">Create</strong> to create the template.</p><div class="informalfigure"><div id="d126e71852" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_20.png" alt="Figure shows New tab." height="673" width="506"></p></div></div><p>Set the <strong class="emphasis bold">Name</strong> to <code class="literal">AbnormalityAlert</code> and enter the code in the <strong class="emphasis bold">MATLAB Code</strong> window or copy the sample code from the<strong class="emphasis bold"> </strong><code class="literal">AbnormalityAlert.m </code>file<strong class="emphasis bold"> </strong>provided with this example. To access the <code class="literal">AbnormalityAlert.m </code>file, click the <strong class="emphasis bold">Open Live Script</strong> button and download the file.</p><div class="informalfigure"><div id="d126e71880" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_21.png" alt="Figure shows how to set the Name to AbnormalityAlert and enter the code in the MATLAB Code window." height="709" width="643"></p></div></div><p>Specify the channel ID, <strong class="emphasis bold">Read API</strong> key, and <strong class="emphasis bold">Alerts API</strong> key corresponding to your channel in code. You can access the alerts key from your ThingSpeak profile page.</p><div class="informalfigure"><div id="d126e71894" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_22.png" alt="Figure shows where to specify the channel ID, Read API key, and Alerts API key corresponding to your channel in code." height="563" width="567"></p></div></div><p>To set up an email alert for when any abnormality is detected, on the <strong class="emphasis bold">Apps</strong> tab in ThingSpeak, click <strong class="emphasis bold">Actions</strong>, and then click <strong class="emphasis bold">React.</strong><strong class="emphasis bold"> </strong>In the React window, set these parameters.</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">React Name</strong><strong class="emphasis bold"> </strong>&#8212; Enter a unique name for your alert. For this example, set it to <code class="literal"> AbnormalTrigger</code>.</p></li><li><p><strong class="emphasis bold">Condition Type</strong> &#8212; Select <code class="literal">Numeric.</code></p></li><li><p><strong class="emphasis bold">Test Frequency</strong><strong class="emphasis bold"> </strong>&#8212; Select <code class="literal">On Data Insertion</code>.</p></li><li><p><strong class="emphasis bold">Condition</strong><strong class="emphasis bold"> </strong>&#8212; Select the name of your channel and the field and set the condition for your alert. In this example, select field 5 <code class="literal">(Abnormality)</code><code class="literal"> </code>and<code class="literal"> </code>set the condition to <code class="literal">is equal to 1.</code></p></li><li><p><strong class="emphasis bold">Action</strong> &#8212; Select <strong class="emphasis bold">MATLAB Analysis</strong>.<strong class="emphasis bold"> </strong>In the <strong class="emphasis bold">code to execute</strong><strong class="emphasis bold"> </strong>list, select the name of the MATLAB file where you stored the analysis code. For this example, select <code class="literal">AbnormalityAlert.</code></p></li><li><p><strong class="emphasis bold">Options</strong><strong class="emphasis bold"> </strong>&#8212; Select <code class="literal">Run action only the first time the condition is met</code>.</p></li></ul></div><p>Click <strong class="emphasis bold">Save React </strong>to save your alert.</p><div class="informalfigure"><div id="d126e71981" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_23.png" alt="Figure shows how to set up an email alert for when any abnormality is detected, on the Apps tab in ThingSpeak." height="966" width="569"></p></div></div><p>When any abnormality is detected, ThingSpeak sends an email to the registered email address. This is an image of a sample email sent by ThingSpeak.</p><div class="informalfigure"><div id="d126e71987" class="mediaobject"><p><img src="../../examples/arduinoio/win64/PredictiveMaintenanceRotatingDeviceThingSpeakMLExample_24.png" alt="Figure shows the email sent to the registered email address when any abnormality is detected." height="375" width="681"></p></div></div></div></section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey"><script src="https://www.mathworks.com/help/docsurvey/docfeedback.js"></script>
<script>loadSurveyHidden();</script>
<link rel="stylesheet" href="https://www.mathworks.com/help/docsurvey/release/index-css.css" type="text/css">
<script src="https://www.mathworks.com/help/docsurvey/release/bundle.index.js"></script>

<script>initDocSurvey();</script></div></main>


</div>
</div>
</div>
</div><!--close_0960-->
<footer xmlns="http://www.w3.org/1999/xhtml" id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-12">
<p class="copyright"> 1994-2025 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="matlab:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="matlab:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="matlab:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="matlab:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</div><!--close_0970-->
</body>
</html>
